{"ast":null,"code":"/**\n * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v26.0.0\n * @link http://www.ag-grid.com/\n * @license MIT\n */\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n};\n\nimport { Constants } from \"../../constants/constants\";\nimport { BeanStub } from \"../../context/beanStub\";\nimport { RowHighlightPosition, RowNode } from \"../../entities/rowNode\";\nimport { Events } from \"../../events\";\nimport { ModuleNames } from \"../../modules/moduleNames\";\nimport { ModuleRegistry } from \"../../modules/moduleRegistry\";\nimport { addCssClass, addOrRemoveCssClass, isElementChildOfClass, removeCssClass } from \"../../utils/dom\";\nimport { isStopPropagationForAgGrid } from \"../../utils/event\";\nimport { executeNextVMTurn } from \"../../utils/function\";\nimport { exists, find } from \"../../utils/generic\";\nimport { convertToMap } from \"../../utils/map\";\nimport { assign } from \"../../utils/object\";\nimport { escapeString } from \"../../utils/string\";\nimport { CellCtrl } from \"../cell/cellCtrl\";\nimport { AngularRowUtils } from \"./angularRowUtils\";\nimport { RowDragComp } from \"./rowDragComp\";\nexport var RowType;\n\n(function (RowType) {\n  RowType[\"Normal\"] = \"Normal\";\n  RowType[\"FullWidth\"] = \"FullWidth\";\n  RowType[\"FullWidthLoading\"] = \"FullWidthLoading\";\n  RowType[\"FullWidthGroup\"] = \"FullWidthGroup\";\n  RowType[\"FullWidthDetail\"] = \"FullWidthDetail\";\n})(RowType || (RowType = {}));\n\nexport var FullWidthRenderers = convertToMap([[RowType.FullWidthLoading, 'agLoadingCellRenderer'], [RowType.FullWidthGroup, 'agGroupRowRenderer'], [RowType.FullWidthDetail, 'agDetailCellRenderer']]);\nexport var FullWidthKeys = convertToMap([[RowType.FullWidth, 'fullWidthCellRenderer'], [RowType.FullWidthLoading, 'loadingCellRenderer'], [RowType.FullWidthGroup, 'groupRowRenderer'], [RowType.FullWidthDetail, 'detailCellRenderer']]);\nvar instanceIdSequence = 0;\n\nvar RowCtrl = function (_super) {\n  __extends(RowCtrl, _super);\n\n  function RowCtrl(parentScope, rowNode, beans, animateIn, useAnimationFrameForCreate, printLayout) {\n    var _this = _super.call(this) || this;\n\n    _this.allRowGuis = [];\n    _this.active = true;\n    _this.centerCellCtrls = {\n      list: [],\n      map: {}\n    };\n    _this.leftCellCtrls = {\n      list: [],\n      map: {}\n    };\n    _this.rightCellCtrls = {\n      list: [],\n      map: {}\n    };\n    _this.lastMouseDownOnDragger = false;\n    _this.updateColumnListsPending = false;\n    _this.parentScope = parentScope;\n    _this.beans = beans;\n    _this.rowNode = rowNode;\n    _this.paginationPage = _this.beans.paginationProxy.getCurrentPage();\n    _this.useAnimationFrameForCreate = useAnimationFrameForCreate;\n    _this.printLayout = printLayout;\n    _this.instanceId = rowNode.id + '-' + instanceIdSequence++;\n\n    _this.setAnimateFlags(animateIn);\n\n    _this.rowFocused = _this.beans.focusService.isRowFocused(_this.rowNode.rowIndex, _this.rowNode.rowPinned);\n\n    _this.setupAngular1Scope();\n\n    _this.rowLevel = _this.beans.rowCssClassCalculator.calculateRowLevel(_this.rowNode);\n\n    _this.setRowType();\n\n    _this.addListeners();\n\n    _this.setInitialRowTop();\n\n    return _this;\n  }\n\n  RowCtrl.prototype.getBeans = function () {\n    return this.beans;\n  };\n\n  RowCtrl.prototype.getInstanceId = function () {\n    return this.instanceId;\n  };\n\n  RowCtrl.prototype.setComp = function (rowComp, element, pinned) {\n    var gui = {\n      rowComp: rowComp,\n      element: element,\n      pinned: pinned\n    };\n    this.allRowGuis.push(gui);\n\n    if (pinned === Constants.PINNED_LEFT) {\n      this.leftGui = gui;\n    } else if (pinned === Constants.PINNED_RIGHT) {\n      this.rightGui = gui;\n    } else if (this.isFullWidth() && !this.beans.gridOptionsWrapper.isEmbedFullWidthRows()) {\n      this.fullWidthGui = gui;\n    } else {\n      this.centerGui = gui;\n    }\n\n    var allNormalPresent = this.leftGui != null && this.rightGui != null && this.centerGui != null;\n    var fullWidthPresent = this.fullWidthGui != null;\n\n    if (allNormalPresent || fullWidthPresent) {\n      this.initialiseRowComps();\n    }\n  };\n\n  RowCtrl.prototype.isCacheable = function () {\n    return this.rowType === RowType.FullWidthDetail && this.beans.gridOptionsWrapper.isKeepDetailRows();\n  };\n\n  RowCtrl.prototype.setCached = function (cached) {\n    var displayValue = cached ? 'none' : undefined;\n    this.allRowGuis.forEach(function (rg) {\n      return rg.rowComp.setDisplay(displayValue);\n    });\n  };\n\n  RowCtrl.prototype.initialiseRowComps = function () {\n    var _this = this;\n\n    var gow = this.beans.gridOptionsWrapper;\n    this.onRowHeightChanged();\n    this.updateRowIndexes();\n    this.setFocusedClasses();\n    this.setStylesFromGridOptions();\n\n    if (gow.isRowSelection() && this.rowNode.selectable) {\n      this.onRowSelected();\n    }\n\n    this.updateColumnLists(!this.useAnimationFrameForCreate);\n\n    if (this.slideRowIn) {\n      executeNextVMTurn(this.onTopChanged.bind(this));\n    }\n\n    if (this.fadeRowIn) {\n      executeNextVMTurn(function () {\n        _this.allRowGuis.forEach(function (gui) {\n          return gui.rowComp.addOrRemoveCssClass('ag-opacity-zero', false);\n        });\n      });\n    }\n\n    var businessKey = this.getRowBusinessKey();\n    var rowIdSanitised = escapeString(this.rowNode.id);\n    var businessKeySanitised = escapeString(businessKey);\n    this.allRowGuis.forEach(function (gui) {\n      var comp = gui.rowComp;\n      comp.setRole('row');\n\n      var initialRowClasses = _this.getInitialRowClasses(gui.pinned);\n\n      initialRowClasses.forEach(function (name) {\n        return comp.addOrRemoveCssClass(name, true);\n      });\n\n      if (_this.rowNode.group) {\n        comp.setAriaExpanded(_this.rowNode.expanded == true);\n      }\n\n      if (rowIdSanitised != null) {\n        comp.setRowId(rowIdSanitised);\n      }\n\n      if (businessKeySanitised != null) {\n        comp.setRowBusinessKey(businessKeySanitised);\n      }\n\n      if (_this.isFullWidth()) {\n        comp.setTabIndex(-1);\n      } // DOM DATA\n\n\n      gow.setDomData(gui.element, RowCtrl.DOM_DATA_KEY_RENDERED_ROW, _this);\n\n      _this.addDestroyFunc(function () {\n        return gow.setDomData(gui.element, RowCtrl.DOM_DATA_KEY_RENDERED_ROW, null);\n      }); // adding hover functionality adds listener to this row, so we\n      // do it lazily in an animation frame\n\n\n      if (_this.useAnimationFrameForCreate) {\n        _this.beans.taskQueue.createTask(_this.addHoverFunctionality.bind(_this, gui.element), _this.rowNode.rowIndex, 'createTasksP2');\n      } else {\n        _this.addHoverFunctionality(gui.element);\n      }\n\n      if (_this.isFullWidth()) {\n        _this.setupFullWidth(gui);\n      }\n    });\n    this.executeProcessRowPostCreateFunc();\n  };\n\n  RowCtrl.prototype.getFullWidthCellRendererType = function () {\n    return FullWidthKeys.get(this.rowType);\n  };\n\n  RowCtrl.prototype.getFullWidthCellRendererName = function () {\n    return FullWidthRenderers.get(this.rowType);\n  };\n\n  RowCtrl.prototype.setupFullWidth = function (gui) {\n    var params = this.createFullWidthParams(gui.element, gui.pinned);\n    var cellRendererType = this.getFullWidthCellRendererType();\n    var cellRendererName = this.getFullWidthCellRendererName();\n    var compDetails = this.beans.userComponentFactory.getFullWidthCellRendererDetails(params, cellRendererType, cellRendererName);\n\n    if (compDetails) {\n      gui.rowComp.showFullWidth(compDetails);\n    } else {\n      var masterDetailModuleLoaded = ModuleRegistry.isRegistered(ModuleNames.MasterDetailModule);\n\n      if (cellRendererName === 'agDetailCellRenderer' && !masterDetailModuleLoaded) {\n        console.warn(\"AG Grid: cell renderer agDetailCellRenderer (for master detail) not found. Did you forget to include the master detail module?\");\n      } else {\n        console.error(\"AG Grid: fullWidthCellRenderer \" + cellRendererName + \" not found\");\n      }\n    }\n  };\n\n  RowCtrl.prototype.getScope = function () {\n    return this.scope;\n  };\n\n  RowCtrl.prototype.isPrintLayout = function () {\n    return this.printLayout;\n  };\n\n  RowCtrl.prototype.setupAngular1Scope = function () {\n    var scopeResult = AngularRowUtils.createChildScopeOrNull(this.rowNode, this.parentScope, this.beans.gridOptionsWrapper);\n\n    if (scopeResult) {\n      this.scope = scopeResult.scope;\n      this.addDestroyFunc(scopeResult.scopeDestroyFunc);\n    }\n  }; // use by autoWidthCalculator, as it clones the elements\n\n\n  RowCtrl.prototype.getCellElement = function (column) {\n    var cellCtrl = this.getCellCtrl(column);\n    return cellCtrl ? cellCtrl.getGui() : null;\n  };\n\n  RowCtrl.prototype.executeProcessRowPostCreateFunc = function () {\n    var func = this.beans.gridOptionsWrapper.getProcessRowPostCreateFunc();\n\n    if (!func) {\n      return;\n    }\n\n    var params = {\n      eRow: this.centerGui ? this.centerGui.element : undefined,\n      ePinnedLeftRow: this.leftGui ? this.leftGui.element : undefined,\n      ePinnedRightRow: this.rightGui ? this.rightGui.element : undefined,\n      node: this.rowNode,\n      api: this.beans.gridOptionsWrapper.getApi(),\n      rowIndex: this.rowNode.rowIndex,\n      addRenderedRowListener: this.addEventListener.bind(this),\n      columnApi: this.beans.gridOptionsWrapper.getColumnApi(),\n      context: this.beans.gridOptionsWrapper.getContext()\n    };\n    func(params);\n  };\n\n  RowCtrl.prototype.setRowType = function () {\n    var isStub = this.rowNode.stub;\n    var isFullWidthCell = this.rowNode.isFullWidthCell();\n    var isDetailCell = this.beans.doingMasterDetail && this.rowNode.detail;\n    var pivotMode = this.beans.columnModel.isPivotMode(); // we only use full width for groups, not footers. it wouldn't make sense to include footers if not looking\n    // for totals. if users complain about this, then we should introduce a new property 'footerUseEntireRow'\n    // so each can be set independently (as a customer complained about footers getting full width, hence\n    // introducing this logic)\n\n    var isGroupRow = !!this.rowNode.group && !this.rowNode.footer;\n    var isFullWidthGroup = isGroupRow && this.beans.gridOptionsWrapper.isGroupUseEntireRow(pivotMode);\n\n    if (isStub) {\n      this.rowType = RowType.FullWidthLoading;\n    } else if (isDetailCell) {\n      this.rowType = RowType.FullWidthDetail;\n    } else if (isFullWidthCell) {\n      this.rowType = RowType.FullWidth;\n    } else if (isFullWidthGroup) {\n      this.rowType = RowType.FullWidthGroup;\n    } else {\n      this.rowType = RowType.Normal;\n    }\n  };\n\n  RowCtrl.prototype.updateColumnLists = function (suppressAnimationFrame) {\n    var _this = this;\n\n    if (suppressAnimationFrame === void 0) {\n      suppressAnimationFrame = false;\n    }\n\n    if (this.isFullWidth()) {\n      return;\n    }\n\n    var noAnimation = suppressAnimationFrame || this.beans.gridOptionsWrapper.isSuppressAnimationFrame() || this.printLayout;\n\n    if (noAnimation) {\n      this.updateColumnListsImpl();\n      return;\n    }\n\n    if (this.updateColumnListsPending) {\n      return;\n    }\n\n    this.beans.taskQueue.createTask(function () {\n      if (!_this.active) {\n        return;\n      }\n\n      _this.updateColumnListsImpl();\n    }, this.rowNode.rowIndex, 'createTasksP1');\n    this.updateColumnListsPending = true;\n  };\n\n  RowCtrl.prototype.createCellCtrls = function (prev, cols, pinned) {\n    var _this = this;\n\n    if (pinned === void 0) {\n      pinned = null;\n    }\n\n    var res = {\n      list: [],\n      map: {}\n    };\n\n    var addCell = function (colInstanceId, cellCtrl) {\n      res.list.push(cellCtrl);\n      res.map[colInstanceId] = cellCtrl;\n    };\n\n    cols.forEach(function (col) {\n      // we use instanceId's rather than colId as it's possible there is a Column with same Id,\n      // but it's referring to a different column instance. Happens a lot with pivot, as pivot col id's are\n      // reused eg pivot_0, pivot_1 etc\n      var colInstanceId = col.getInstanceId();\n      var cellCtrl = prev.map[colInstanceId];\n\n      if (!cellCtrl) {\n        cellCtrl = new CellCtrl(col, _this.rowNode, _this.beans, _this);\n      }\n\n      addCell(colInstanceId, cellCtrl);\n    });\n    prev.list.forEach(function (prevCellCtrl) {\n      var cellInResult = res.map[prevCellCtrl.getColumn().getInstanceId()] != null;\n\n      if (cellInResult) {\n        return;\n      }\n\n      var keepCell = !_this.isCellEligibleToBeRemoved(prevCellCtrl, pinned);\n\n      if (keepCell) {\n        addCell(prevCellCtrl.getColumn().getInstanceId(), prevCellCtrl);\n        return;\n      }\n\n      prevCellCtrl.destroy();\n    });\n    return res;\n  };\n\n  RowCtrl.prototype.updateColumnListsImpl = function () {\n    var _this = this;\n\n    this.updateColumnListsPending = false;\n    var columnModel = this.beans.columnModel;\n\n    if (this.printLayout) {\n      this.centerCellCtrls = this.createCellCtrls(this.centerCellCtrls, columnModel.getAllDisplayedColumns());\n      this.leftCellCtrls = {\n        list: [],\n        map: {}\n      };\n      this.rightCellCtrls = {\n        list: [],\n        map: {}\n      };\n    } else {\n      var centerCols = columnModel.getViewportCenterColumnsForRow(this.rowNode);\n      this.centerCellCtrls = this.createCellCtrls(this.centerCellCtrls, centerCols);\n      var leftCols = columnModel.getDisplayedLeftColumnsForRow(this.rowNode);\n      this.leftCellCtrls = this.createCellCtrls(this.leftCellCtrls, leftCols, Constants.PINNED_LEFT);\n      var rightCols = columnModel.getDisplayedRightColumnsForRow(this.rowNode);\n      this.rightCellCtrls = this.createCellCtrls(this.rightCellCtrls, rightCols, Constants.PINNED_RIGHT);\n    }\n\n    this.allRowGuis.forEach(function (item) {\n      var cellControls = item.pinned === Constants.PINNED_LEFT ? _this.leftCellCtrls : item.pinned === Constants.PINNED_RIGHT ? _this.rightCellCtrls : _this.centerCellCtrls;\n      item.rowComp.setCellCtrls(cellControls.list);\n    });\n  };\n\n  RowCtrl.prototype.isCellEligibleToBeRemoved = function (cellCtrl, nextContainerPinned) {\n    var REMOVE_CELL = true;\n    var KEEP_CELL = false; // always remove the cell if it's not rendered or if it's in the wrong pinned location\n\n    var column = cellCtrl.getColumn();\n\n    if (column.getPinned() != nextContainerPinned) {\n      return REMOVE_CELL;\n    } // we want to try and keep editing and focused cells\n\n\n    var editing = cellCtrl.isEditing();\n    var focused = this.beans.focusService.isCellFocused(cellCtrl.getCellPosition());\n    var mightWantToKeepCell = editing || focused;\n\n    if (mightWantToKeepCell) {\n      var column_1 = cellCtrl.getColumn();\n      var displayedColumns = this.beans.columnModel.getAllDisplayedColumns();\n      var cellStillDisplayed = displayedColumns.indexOf(column_1) >= 0;\n      return cellStillDisplayed ? KEEP_CELL : REMOVE_CELL;\n    }\n\n    return REMOVE_CELL;\n  };\n\n  RowCtrl.prototype.setAnimateFlags = function (animateIn) {\n    if (animateIn) {\n      var oldRowTopExists = exists(this.rowNode.oldRowTop); // if the row had a previous position, we slide it in (animate row top)\n\n      this.slideRowIn = oldRowTopExists; // if the row had no previous position, we fade it in (animate\n\n      this.fadeRowIn = !oldRowTopExists;\n    } else {\n      this.slideRowIn = false;\n      this.fadeRowIn = false;\n    }\n  };\n\n  RowCtrl.prototype.isEditing = function () {\n    return this.editingRow;\n  };\n\n  RowCtrl.prototype.stopRowEditing = function (cancel) {\n    this.stopEditing(cancel);\n  };\n\n  RowCtrl.prototype.isFullWidth = function () {\n    return this.rowType !== RowType.Normal;\n  };\n\n  RowCtrl.prototype.getRowType = function () {\n    return this.rowType;\n  };\n\n  RowCtrl.prototype.refreshFullWidth = function () {\n    var _this = this; // returns 'true' if refresh succeeded\n\n\n    var tryRefresh = function (gui, pinned) {\n      if (!gui) {\n        return true;\n      } // no refresh needed\n\n\n      var cellRenderer = gui.rowComp.getFullWidthCellRenderer(); // no cell renderer, either means comp not yet ready, or comp ready but now reference\n      // to it (happens in react when comp is stateless). if comp not ready, we don't need to\n      // refresh, however we don't know which one, so we refresh to cover the case where it's\n      // react comp without reference so need to force a refresh\n\n      if (!cellRenderer) {\n        return false;\n      } // no refresh method present, so can't refresh, hard refresh needed\n\n\n      if (!cellRenderer.refresh) {\n        return false;\n      }\n\n      var params = _this.createFullWidthParams(gui.element, pinned);\n\n      var refreshSucceeded = cellRenderer.refresh(params);\n      return refreshSucceeded;\n    };\n\n    var fullWidthSuccess = tryRefresh(this.fullWidthGui, null);\n    var centerSuccess = tryRefresh(this.centerGui, null);\n    var leftSuccess = tryRefresh(this.leftGui, Constants.PINNED_LEFT);\n    var rightSuccess = tryRefresh(this.rightGui, Constants.PINNED_RIGHT);\n    var allFullWidthRowsRefreshed = fullWidthSuccess && centerSuccess && leftSuccess && rightSuccess;\n    return allFullWidthRowsRefreshed;\n  };\n\n  RowCtrl.prototype.addListeners = function () {\n    this.addManagedListener(this.rowNode, RowNode.EVENT_HEIGHT_CHANGED, this.onRowHeightChanged.bind(this));\n    this.addManagedListener(this.rowNode, RowNode.EVENT_ROW_SELECTED, this.onRowSelected.bind(this));\n    this.addManagedListener(this.rowNode, RowNode.EVENT_ROW_INDEX_CHANGED, this.onRowIndexChanged.bind(this));\n    this.addManagedListener(this.rowNode, RowNode.EVENT_TOP_CHANGED, this.onTopChanged.bind(this));\n    this.addManagedListener(this.rowNode, RowNode.EVENT_EXPANDED_CHANGED, this.updateExpandedCss.bind(this));\n    this.addManagedListener(this.rowNode, RowNode.EVENT_HAS_CHILDREN_CHANGED, this.updateExpandedCss.bind(this));\n    this.addManagedListener(this.rowNode, RowNode.EVENT_DATA_CHANGED, this.onRowNodeDataChanged.bind(this));\n    this.addManagedListener(this.rowNode, RowNode.EVENT_CELL_CHANGED, this.onRowNodeCellChanged.bind(this));\n    this.addManagedListener(this.rowNode, RowNode.EVENT_HIGHLIGHT_CHANGED, this.onRowNodeHighlightChanged.bind(this));\n    this.addManagedListener(this.rowNode, RowNode.EVENT_DRAGGING_CHANGED, this.onRowNodeDraggingChanged.bind(this));\n    this.addManagedListener(this.rowNode, RowNode.EVENT_UI_LEVEL_CHANGED, this.onUiLevelChanged.bind(this));\n    var eventService = this.beans.eventService;\n    this.addManagedListener(eventService, Events.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED, this.onPaginationPixelOffsetChanged.bind(this));\n    this.addManagedListener(eventService, Events.EVENT_HEIGHT_SCALE_CHANGED, this.onTopChanged.bind(this));\n    this.addManagedListener(eventService, Events.EVENT_DISPLAYED_COLUMNS_CHANGED, this.onDisplayedColumnsChanged.bind(this));\n    this.addManagedListener(eventService, Events.EVENT_VIRTUAL_COLUMNS_CHANGED, this.onVirtualColumnsChanged.bind(this));\n    this.addManagedListener(eventService, Events.EVENT_CELL_FOCUSED, this.onCellFocusChanged.bind(this));\n    this.addManagedListener(eventService, Events.EVENT_PAGINATION_CHANGED, this.onPaginationChanged.bind(this));\n    this.addManagedListener(eventService, Events.EVENT_MODEL_UPDATED, this.onModelUpdated.bind(this));\n    this.addManagedListener(eventService, Events.EVENT_COLUMN_MOVED, this.onColumnMoved.bind(this));\n    this.addListenersForCellComps();\n  };\n\n  RowCtrl.prototype.onColumnMoved = function () {\n    this.updateColumnLists();\n  };\n\n  RowCtrl.prototype.addListenersForCellComps = function () {\n    var _this = this;\n\n    this.addManagedListener(this.rowNode, RowNode.EVENT_ROW_INDEX_CHANGED, function () {\n      _this.getAllCellCtrls().forEach(function (cellCtrl) {\n        return cellCtrl.onRowIndexChanged();\n      });\n    });\n    this.addManagedListener(this.rowNode, RowNode.EVENT_CELL_CHANGED, function (event) {\n      _this.getAllCellCtrls().forEach(function (cellCtrl) {\n        return cellCtrl.onCellChanged(event);\n      });\n    });\n  };\n\n  RowCtrl.prototype.onRowNodeDataChanged = function (event) {\n    // if this is an update, we want to refresh, as this will allow the user to put in a transition\n    // into the cellRenderer refresh method. otherwise this might be completely new data, in which case\n    // we will want to completely replace the cells\n    this.getAllCellCtrls().forEach(function (cellCtrl) {\n      return cellCtrl.refreshCell({\n        suppressFlash: !event.update,\n        newData: !event.update\n      });\n    }); // check for selected also, as this could be after lazy loading of the row data, in which case\n    // the id might of just gotten set inside the row and the row selected state may of changed\n    // as a result. this is what happens when selected rows are loaded in virtual pagination.\n    // - niall note - since moving to the stub component, this may no longer be true, as replacing\n    // the stub component now replaces the entire row\n\n    this.onRowSelected(); // as data has changed, then the style and class needs to be recomputed\n\n    this.postProcessCss();\n  };\n\n  RowCtrl.prototype.onRowNodeCellChanged = function () {\n    // as data has changed, then the style and class needs to be recomputed\n    this.postProcessCss();\n  };\n\n  RowCtrl.prototype.postProcessCss = function () {\n    this.setStylesFromGridOptions();\n    this.postProcessClassesFromGridOptions();\n    this.postProcessRowClassRules();\n    this.postProcessRowDragging();\n  };\n\n  RowCtrl.prototype.onRowNodeHighlightChanged = function () {\n    var highlighted = this.rowNode.highlighted;\n    this.allRowGuis.forEach(function (gui) {\n      var aboveOn = highlighted === RowHighlightPosition.Above;\n      var belowOn = highlighted === RowHighlightPosition.Below;\n      gui.rowComp.addOrRemoveCssClass('ag-row-highlight-above', aboveOn);\n      gui.rowComp.addOrRemoveCssClass('ag-row-highlight-below', belowOn);\n    });\n  };\n\n  RowCtrl.prototype.onRowNodeDraggingChanged = function () {\n    this.postProcessRowDragging();\n  };\n\n  RowCtrl.prototype.postProcessRowDragging = function () {\n    var dragging = this.rowNode.dragging;\n    this.allRowGuis.forEach(function (gui) {\n      return gui.rowComp.addOrRemoveCssClass('ag-row-dragging', dragging);\n    });\n  };\n\n  RowCtrl.prototype.updateExpandedCss = function () {\n    var expandable = this.rowNode.isExpandable();\n    var expanded = this.rowNode.expanded == true;\n    this.allRowGuis.forEach(function (gui) {\n      gui.rowComp.addOrRemoveCssClass('ag-row-group', expandable);\n      gui.rowComp.addOrRemoveCssClass('ag-row-group-expanded', expandable && expanded);\n      gui.rowComp.addOrRemoveCssClass('ag-row-group-contracted', expandable && !expanded);\n      gui.rowComp.setAriaExpanded(expandable && expanded);\n    });\n  };\n\n  RowCtrl.prototype.onDisplayedColumnsChanged = function () {\n    // we skip animations for onDisplayedColumnChanged, as otherwise the client could remove columns and\n    // then set data, and any old valueGetter's (ie from cols that were removed) would still get called.\n    this.updateColumnLists(true);\n\n    if (this.beans.columnModel.wasAutoRowHeightEverActive()) {\n      this.rowNode.checkAutoHeights();\n    }\n  };\n\n  RowCtrl.prototype.onVirtualColumnsChanged = function () {\n    this.updateColumnLists();\n  };\n\n  RowCtrl.prototype.getRowPosition = function () {\n    return {\n      rowPinned: this.rowNode.rowPinned,\n      rowIndex: this.rowNode.rowIndex\n    };\n  };\n\n  RowCtrl.prototype.onKeyboardNavigate = function (keyboardEvent) {\n    var currentFullWidthComp = find(this.allRowGuis, function (c) {\n      return c.element.contains(keyboardEvent.target);\n    });\n    var currentFullWidthContainer = currentFullWidthComp ? currentFullWidthComp.element : null;\n    var isFullWidthContainerFocused = currentFullWidthContainer === keyboardEvent.target;\n\n    if (!isFullWidthContainerFocused) {\n      return;\n    }\n\n    var node = this.rowNode;\n    var lastFocusedCell = this.beans.focusService.getFocusedCell();\n    var cellPosition = {\n      rowIndex: node.rowIndex,\n      rowPinned: node.rowPinned,\n      column: lastFocusedCell && lastFocusedCell.column\n    };\n    this.beans.navigationService.navigateToNextCell(keyboardEvent, keyboardEvent.keyCode, cellPosition, true);\n    keyboardEvent.preventDefault();\n  };\n\n  RowCtrl.prototype.onTabKeyDown = function (keyboardEvent) {\n    if (keyboardEvent.defaultPrevented || isStopPropagationForAgGrid(keyboardEvent)) {\n      return;\n    }\n\n    var currentFullWidthComp = find(this.allRowGuis, function (c) {\n      return c.element.contains(keyboardEvent.target);\n    });\n    var currentFullWidthContainer = currentFullWidthComp ? currentFullWidthComp.element : null;\n    var isFullWidthContainerFocused = currentFullWidthContainer === keyboardEvent.target;\n    var nextEl = null;\n\n    if (!isFullWidthContainerFocused) {\n      nextEl = this.beans.focusService.findNextFocusableElement(currentFullWidthContainer, false, keyboardEvent.shiftKey);\n    }\n\n    if (this.isFullWidth() && isFullWidthContainerFocused || !nextEl) {\n      this.beans.navigationService.onTabKeyDown(this, keyboardEvent);\n    }\n  };\n\n  RowCtrl.prototype.onFullWidthRowFocused = function (event) {\n    var node = this.rowNode;\n    var isFocused = this.isFullWidth() && event.rowIndex === node.rowIndex && event.rowPinned == node.rowPinned;\n    var element = this.fullWidthGui ? this.fullWidthGui.element : this.centerGui.element;\n    addOrRemoveCssClass(element, 'ag-full-width-focus', isFocused);\n\n    if (isFocused) {\n      // we don't scroll normal rows into view when we focus them, so we don't want\n      // to scroll Full Width rows either.\n      element.focus({\n        preventScroll: true\n      });\n    }\n  };\n\n  RowCtrl.prototype.refreshCell = function (cellCtrl) {\n    this.centerCellCtrls = this.removeCellCtrl(this.centerCellCtrls, cellCtrl);\n    this.leftCellCtrls = this.removeCellCtrl(this.leftCellCtrls, cellCtrl);\n    this.rightCellCtrls = this.removeCellCtrl(this.rightCellCtrls, cellCtrl);\n    this.updateColumnLists();\n  };\n\n  RowCtrl.prototype.removeCellCtrl = function (prev, cellCtrlToRemove) {\n    var res = {\n      list: [],\n      map: {}\n    };\n    prev.list.forEach(function (cellCtrl) {\n      if (cellCtrl === cellCtrlToRemove) {\n        return;\n      }\n\n      res.list.push(cellCtrl);\n      res.map[cellCtrl.getInstanceId()] = cellCtrl;\n    });\n    return res;\n  };\n\n  RowCtrl.prototype.onMouseEvent = function (eventName, mouseEvent) {\n    switch (eventName) {\n      case 'dblclick':\n        this.onRowDblClick(mouseEvent);\n        break;\n\n      case 'click':\n        this.onRowClick(mouseEvent);\n        break;\n\n      case 'touchstart':\n      case 'mousedown':\n        this.onRowMouseDown(mouseEvent);\n        break;\n    }\n  };\n\n  RowCtrl.prototype.createRowEvent = function (type, domEvent) {\n    return {\n      type: type,\n      node: this.rowNode,\n      data: this.rowNode.data,\n      rowIndex: this.rowNode.rowIndex,\n      rowPinned: this.rowNode.rowPinned,\n      context: this.beans.gridOptionsWrapper.getContext(),\n      api: this.beans.gridOptionsWrapper.getApi(),\n      columnApi: this.beans.gridOptionsWrapper.getColumnApi(),\n      event: domEvent\n    };\n  };\n\n  RowCtrl.prototype.createRowEventWithSource = function (type, domEvent) {\n    var event = this.createRowEvent(type, domEvent); // when first developing this, we included the rowComp in the event.\n    // this seems very weird. so when introducing the event types, i left the 'source'\n    // out of the type, and just include the source in the two places where this event\n    // was fired (rowClicked and rowDoubleClicked). it doesn't make sense for any\n    // users to be using this, as the rowComp isn't an object we expose, so would be\n    // very surprising if a user was using it.\n\n    event.source = this;\n    return event;\n  };\n\n  RowCtrl.prototype.onRowDblClick = function (mouseEvent) {\n    if (isStopPropagationForAgGrid(mouseEvent)) {\n      return;\n    }\n\n    var agEvent = this.createRowEventWithSource(Events.EVENT_ROW_DOUBLE_CLICKED, mouseEvent);\n    this.beans.eventService.dispatchEvent(agEvent);\n  };\n\n  RowCtrl.prototype.onRowMouseDown = function (mouseEvent) {\n    this.lastMouseDownOnDragger = isElementChildOfClass(mouseEvent.target, 'ag-row-drag', 3);\n\n    if (!this.isFullWidth()) {\n      return;\n    }\n\n    var node = this.rowNode;\n    var columnModel = this.beans.columnModel;\n    this.beans.focusService.setFocusedCell(node.rowIndex, columnModel.getAllDisplayedColumns()[0], node.rowPinned, true);\n  };\n\n  RowCtrl.prototype.onRowClick = function (mouseEvent) {\n    var stop = isStopPropagationForAgGrid(mouseEvent) || this.lastMouseDownOnDragger;\n\n    if (stop) {\n      return;\n    }\n\n    var agEvent = this.createRowEventWithSource(Events.EVENT_ROW_CLICKED, mouseEvent);\n    this.beans.eventService.dispatchEvent(agEvent); // ctrlKey for windows, metaKey for Apple\n\n    var multiSelectKeyPressed = mouseEvent.ctrlKey || mouseEvent.metaKey;\n    var shiftKeyPressed = mouseEvent.shiftKey; // we do not allow selecting the group by clicking, when groupSelectChildren, as the logic to\n    // handle this is broken. to observe, change the logic below and allow groups to be selected.\n    // you will see the group gets selected, then all children get selected, then the grid unselects\n    // the children (as the default behaviour when clicking is to unselect other rows) which results\n    // in the group getting unselected (as all children are unselected). the correct thing would be\n    // to change this, so that children of the selected group are not then subsequenly un-selected.\n\n    var groupSelectsChildren = this.beans.gridOptionsWrapper.isGroupSelectsChildren();\n\n    if ( // we do not allow selecting groups by clicking (as the click here expands the group), or if it's a detail row,\n    // so return if it's a group row\n    groupSelectsChildren && this.rowNode.group || // this is needed so we don't unselect other rows when we click this row, eg if this row is not selectable,\n    // and we click it, the selection should not change (ie any currently selected row should stay selected)\n    !this.rowNode.selectable || // we also don't allow selection of pinned rows\n    this.rowNode.rowPinned || // if no selection method enabled, do nothing\n    !this.beans.gridOptionsWrapper.isRowSelection() || // if click selection suppressed, do nothing\n    this.beans.gridOptionsWrapper.isSuppressRowClickSelection()) {\n      return;\n    }\n\n    var multiSelectOnClick = this.beans.gridOptionsWrapper.isRowMultiSelectWithClick();\n    var rowDeselectionWithCtrl = !this.beans.gridOptionsWrapper.isSuppressRowDeselection();\n\n    if (this.rowNode.isSelected()) {\n      if (multiSelectOnClick) {\n        this.rowNode.setSelectedParams({\n          newValue: false\n        });\n      } else if (multiSelectKeyPressed) {\n        if (rowDeselectionWithCtrl) {\n          this.rowNode.setSelectedParams({\n            newValue: false\n          });\n        }\n      } else {\n        // selected with no multi key, must make sure anything else is unselected\n        this.rowNode.setSelectedParams({\n          newValue: !shiftKeyPressed,\n          clearSelection: !shiftKeyPressed,\n          rangeSelect: shiftKeyPressed\n        });\n      }\n    } else {\n      var clearSelection = multiSelectOnClick ? false : !multiSelectKeyPressed;\n      this.rowNode.setSelectedParams({\n        newValue: true,\n        clearSelection: clearSelection,\n        rangeSelect: shiftKeyPressed\n      });\n    }\n  };\n\n  RowCtrl.prototype.setupDetailRowAutoHeight = function (eDetailGui) {\n    var _this = this;\n\n    if (!this.beans.gridOptionsWrapper.isDetailRowAutoHeight()) {\n      return;\n    }\n\n    var checkRowSizeFunc = function () {\n      var clientHeight = eDetailGui.clientHeight; // if the UI is not ready, the height can be 0, which we ignore, as otherwise a flicker will occur\n      // as UI goes from the default height, to 0, then to the real height as UI becomes ready. this means\n      // it's not possible for have 0 as auto-height, however this is an improbable use case, as even an\n      // empty detail grid would still have some styling around it giving at least a few pixels.\n\n      if (clientHeight != null && clientHeight > 0) {\n        // we do the update in a timeout, to make sure we are not calling from inside the grid\n        // doing another update\n        var updateRowHeightFunc = function () {\n          _this.rowNode.setRowHeight(clientHeight);\n\n          if (_this.beans.clientSideRowModel) {\n            _this.beans.clientSideRowModel.onRowHeightChanged();\n          } else if (_this.beans.serverSideRowModel) {\n            _this.beans.serverSideRowModel.onRowHeightChanged();\n          }\n        };\n\n        _this.beans.frameworkOverrides.setTimeout(updateRowHeightFunc, 0);\n      }\n    };\n\n    var resizeObserverDestroyFunc = this.beans.resizeObserverService.observeResize(eDetailGui, checkRowSizeFunc);\n    this.addDestroyFunc(resizeObserverDestroyFunc);\n    checkRowSizeFunc();\n  };\n\n  RowCtrl.prototype.createFullWidthParams = function (eRow, pinned) {\n    var _this = this;\n\n    var params = {\n      fullWidth: true,\n      data: this.rowNode.data,\n      node: this.rowNode,\n      value: this.rowNode.key,\n      valueFormatted: this.rowNode.key,\n      $scope: this.scope ? this.scope : this.parentScope,\n      $compile: this.beans.$compile,\n      rowIndex: this.rowNode.rowIndex,\n      api: this.beans.gridOptionsWrapper.getApi(),\n      columnApi: this.beans.gridOptionsWrapper.getColumnApi(),\n      context: this.beans.gridOptionsWrapper.getContext(),\n      // these need to be taken out, as part of 'afterAttached' now\n      eGridCell: eRow,\n      eParentOfValue: eRow,\n      pinned: pinned,\n      addRenderedRowListener: this.addEventListener.bind(this),\n      registerRowDragger: function (rowDraggerElement, dragStartPixels, value) {\n        return _this.addFullWidthRowDragging(rowDraggerElement, dragStartPixels, value);\n      }\n    };\n    return params;\n  };\n\n  RowCtrl.prototype.addFullWidthRowDragging = function (rowDraggerElement, dragStartPixels, value) {\n    if (value === void 0) {\n      value = '';\n    }\n\n    if (!this.isFullWidth()) {\n      return;\n    }\n\n    var rowDragComp = new RowDragComp(function () {\n      return value;\n    }, this.rowNode, undefined, rowDraggerElement, dragStartPixels);\n    this.createManagedBean(rowDragComp, this.beans.context);\n  };\n\n  RowCtrl.prototype.onUiLevelChanged = function () {\n    var newLevel = this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);\n\n    if (this.rowLevel != newLevel) {\n      var classToAdd_1 = 'ag-row-level-' + newLevel;\n      var classToRemove_1 = 'ag-row-level-' + this.rowLevel;\n      this.allRowGuis.forEach(function (gui) {\n        gui.rowComp.addOrRemoveCssClass(classToAdd_1, true);\n        gui.rowComp.addOrRemoveCssClass(classToRemove_1, false);\n      });\n    }\n\n    this.rowLevel = newLevel;\n  };\n\n  RowCtrl.prototype.isFirstRowOnPage = function () {\n    return this.rowNode.rowIndex === this.beans.paginationProxy.getPageFirstRow();\n  };\n\n  RowCtrl.prototype.isLastRowOnPage = function () {\n    return this.rowNode.rowIndex === this.beans.paginationProxy.getPageLastRow();\n  };\n\n  RowCtrl.prototype.onModelUpdated = function () {\n    var newFirst = this.isFirstRowOnPage();\n    var newLast = this.isLastRowOnPage();\n\n    if (this.firstRowOnPage !== newFirst) {\n      this.firstRowOnPage = newFirst;\n      this.allRowGuis.forEach(function (gui) {\n        return gui.rowComp.addOrRemoveCssClass('ag-row-first', newFirst);\n      });\n    }\n\n    if (this.lastRowOnPage !== newLast) {\n      this.lastRowOnPage = newLast;\n      this.allRowGuis.forEach(function (gui) {\n        return gui.rowComp.addOrRemoveCssClass('ag-row-last', newLast);\n      });\n    }\n  };\n\n  RowCtrl.prototype.stopEditing = function (cancel) {\n    if (cancel === void 0) {\n      cancel = false;\n    }\n\n    this.getAllCellCtrls().forEach(function (cellCtrl) {\n      return cellCtrl.stopEditing(cancel);\n    });\n\n    if (!this.editingRow) {\n      return;\n    }\n\n    if (!cancel) {\n      var event_1 = this.createRowEvent(Events.EVENT_ROW_VALUE_CHANGED);\n      this.beans.eventService.dispatchEvent(event_1);\n    }\n\n    this.setEditingRow(false);\n  };\n\n  RowCtrl.prototype.setInlineEditingCss = function (editing) {\n    this.allRowGuis.forEach(function (gui) {\n      gui.rowComp.addOrRemoveCssClass(\"ag-row-inline-editing\", editing);\n      gui.rowComp.addOrRemoveCssClass(\"ag-row-not-inline-editing\", !editing);\n    });\n  };\n\n  RowCtrl.prototype.setEditingRow = function (value) {\n    this.editingRow = value;\n    this.allRowGuis.forEach(function (gui) {\n      return gui.rowComp.addOrRemoveCssClass('ag-row-editing', value);\n    });\n    var event = value ? this.createRowEvent(Events.EVENT_ROW_EDITING_STARTED) : this.createRowEvent(Events.EVENT_ROW_EDITING_STOPPED);\n    this.beans.eventService.dispatchEvent(event);\n  };\n\n  RowCtrl.prototype.startRowEditing = function (keyPress, charPress, sourceRenderedCell) {\n    if (keyPress === void 0) {\n      keyPress = null;\n    }\n\n    if (charPress === void 0) {\n      charPress = null;\n    }\n\n    if (sourceRenderedCell === void 0) {\n      sourceRenderedCell = null;\n    } // don't do it if already editing\n\n\n    if (this.editingRow) {\n      return;\n    }\n\n    this.getAllCellCtrls().forEach(function (cellCtrl) {\n      var cellStartedEdit = cellCtrl === sourceRenderedCell;\n\n      if (cellStartedEdit) {\n        cellCtrl.startEditing(keyPress, charPress, cellStartedEdit);\n      } else {\n        cellCtrl.startEditing(null, null, cellStartedEdit);\n      }\n    });\n    this.setEditingRow(true);\n  };\n\n  RowCtrl.prototype.getAllCellCtrls = function () {\n    var res = __spreadArrays(this.centerCellCtrls.list, this.leftCellCtrls.list, this.rightCellCtrls.list);\n\n    return res;\n  };\n\n  RowCtrl.prototype.postProcessClassesFromGridOptions = function () {\n    var _this = this;\n\n    var cssClasses = this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode, this.scope);\n\n    if (!cssClasses || !cssClasses.length) {\n      return;\n    }\n\n    cssClasses.forEach(function (classStr) {\n      _this.allRowGuis.forEach(function (c) {\n        return c.rowComp.addOrRemoveCssClass(classStr, true);\n      });\n    });\n  };\n\n  RowCtrl.prototype.postProcessRowClassRules = function () {\n    var _this = this;\n\n    this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode, this.scope, function (className) {\n      _this.allRowGuis.forEach(function (gui) {\n        return gui.rowComp.addOrRemoveCssClass(className, true);\n      });\n    }, function (className) {\n      _this.allRowGuis.forEach(function (gui) {\n        return gui.rowComp.addOrRemoveCssClass(className, false);\n      });\n    });\n  };\n\n  RowCtrl.prototype.setStylesFromGridOptions = function () {\n    var rowStyles = this.processStylesFromGridOptions();\n    this.allRowGuis.forEach(function (gui) {\n      return gui.rowComp.setUserStyles(rowStyles);\n    });\n  };\n\n  RowCtrl.prototype.getRowBusinessKey = function () {\n    var businessKeyForNodeFunc = this.beans.gridOptionsWrapper.getBusinessKeyForNodeFunc();\n\n    if (typeof businessKeyForNodeFunc !== 'function') {\n      return;\n    }\n\n    return businessKeyForNodeFunc(this.rowNode);\n  };\n\n  RowCtrl.prototype.getInitialRowClasses = function (pinned) {\n    var params = {\n      rowNode: this.rowNode,\n      rowFocused: this.rowFocused,\n      fadeRowIn: this.fadeRowIn,\n      rowIsEven: this.rowNode.rowIndex % 2 === 0,\n      rowLevel: this.rowLevel,\n      fullWidthRow: this.isFullWidth(),\n      firstRowOnPage: this.isFirstRowOnPage(),\n      lastRowOnPage: this.isLastRowOnPage(),\n      printLayout: this.printLayout,\n      expandable: this.rowNode.isExpandable(),\n      scope: this.scope,\n      pinned: pinned\n    };\n    return this.beans.rowCssClassCalculator.getInitialRowClasses(params);\n  };\n\n  RowCtrl.prototype.processStylesFromGridOptions = function () {\n    // part 1 - rowStyle\n    var rowStyle = this.beans.gridOptionsWrapper.getRowStyle();\n\n    if (rowStyle && typeof rowStyle === 'function') {\n      console.warn('AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead');\n      return;\n    } // part 1 - rowStyleFunc\n\n\n    var rowStyleFunc = this.beans.gridOptionsWrapper.getRowStyleFunc();\n    var rowStyleFuncResult;\n\n    if (rowStyleFunc) {\n      var params = {\n        data: this.rowNode.data,\n        node: this.rowNode,\n        rowIndex: this.rowNode.rowIndex,\n        $scope: this.scope,\n        api: this.beans.gridOptionsWrapper.getApi(),\n        columnApi: this.beans.gridOptionsWrapper.getColumnApi(),\n        context: this.beans.gridOptionsWrapper.getContext()\n      };\n      rowStyleFuncResult = rowStyleFunc(params);\n    }\n\n    return assign({}, rowStyle, rowStyleFuncResult);\n  };\n\n  RowCtrl.prototype.onRowSelected = function () {\n    var _this = this;\n\n    var selected = this.rowNode.isSelected();\n    this.allRowGuis.forEach(function (gui) {\n      gui.rowComp.setAriaSelected(selected ? true : undefined);\n      gui.rowComp.addOrRemoveCssClass('ag-row-selected', selected);\n      gui.rowComp.setAriaLabel(_this.createAriaLabel());\n    });\n  };\n\n  RowCtrl.prototype.createAriaLabel = function () {\n    var selected = this.rowNode.isSelected();\n\n    if (selected && this.beans.gridOptionsWrapper.isSuppressRowDeselection()) {\n      return undefined;\n    }\n\n    var translate = this.beans.gridOptionsWrapper.getLocaleTextFunc();\n    var label = translate(selected ? 'ariaRowDeselect' : 'ariaRowSelect', \"Press SPACE to \" + (selected ? 'deselect' : 'select') + \" this row.\");\n    return label;\n  };\n\n  RowCtrl.prototype.isUseAnimationFrameForCreate = function () {\n    return this.useAnimationFrameForCreate;\n  };\n\n  RowCtrl.prototype.addHoverFunctionality = function (eRow) {\n    var _this = this; // because we use animation frames to do this, it's possible the row no longer exists\n    // by the time we get to add it\n\n\n    if (!this.active) {\n      return;\n    } // because mouseenter and mouseleave do not propagate, we cannot listen on the gridPanel\n    // like we do for all the other mouse events.\n    // because of the pinning, we cannot simply add / remove the class based on the eRow. we\n    // have to check all eRow's (body & pinned). so the trick is if any of the rows gets a\n    // mouse hover, it sets such in the rowNode, and then all three reflect the change as\n    // all are listening for event on the row node.\n    // step 1 - add listener, to set flag on row node\n\n\n    this.addManagedListener(eRow, 'mouseenter', function () {\n      return _this.rowNode.onMouseEnter();\n    });\n    this.addManagedListener(eRow, 'mouseleave', function () {\n      return _this.rowNode.onMouseLeave();\n    }); // step 2 - listen for changes on row node (which any eRow can trigger)\n\n    this.addManagedListener(this.rowNode, RowNode.EVENT_MOUSE_ENTER, function () {\n      // if hover turned off, we don't add the class. we do this here so that if the application\n      // toggles this property mid way, we remove the hover form the last row, but we stop\n      // adding hovers from that point onwards.\n      if (!_this.beans.gridOptionsWrapper.isSuppressRowHoverHighlight()) {\n        addCssClass(eRow, 'ag-row-hover');\n      }\n    });\n    this.addManagedListener(this.rowNode, RowNode.EVENT_MOUSE_LEAVE, function () {\n      removeCssClass(eRow, 'ag-row-hover');\n    });\n  }; // for animation, we don't want to animate entry or exit to a very far away pixel,\n  // otherwise the row would move so fast, it would appear to disappear. so this method\n  // moves the row closer to the viewport if it is far away, so the row slide in / out\n  // at a speed the user can see.\n\n\n  RowCtrl.prototype.roundRowTopToBounds = function (rowTop) {\n    var gridBodyCon = this.beans.ctrlsService.getGridBodyCtrl();\n    var range = gridBodyCon.getScrollFeature().getVScrollPosition();\n    var minPixel = this.applyPaginationOffset(range.top, true) - 100;\n    var maxPixel = this.applyPaginationOffset(range.bottom, true) + 100;\n    return Math.min(Math.max(minPixel, rowTop), maxPixel);\n  };\n\n  RowCtrl.prototype.getFrameworkOverrides = function () {\n    return this.beans.frameworkOverrides;\n  };\n\n  RowCtrl.prototype.onRowHeightChanged = function () {\n    // check for exists first - if the user is resetting the row height, then\n    // it will be null (or undefined) momentarily until the next time the flatten\n    // stage is called where the row will then update again with a new height\n    if (exists(this.rowNode.rowHeight)) {\n      var heightPx_1 = this.rowNode.rowHeight + \"px\";\n      this.allRowGuis.forEach(function (gui) {\n        return gui.rowComp.setHeight(heightPx_1);\n      });\n    }\n  };\n\n  RowCtrl.prototype.addEventListener = function (eventType, listener) {\n    if (eventType === 'renderedRowRemoved' || eventType === 'rowRemoved') {\n      eventType = Events.EVENT_VIRTUAL_ROW_REMOVED;\n      console.warn('AG Grid: Since version 11, event renderedRowRemoved is now called ' + Events.EVENT_VIRTUAL_ROW_REMOVED);\n    }\n\n    _super.prototype.addEventListener.call(this, eventType, listener);\n  };\n\n  RowCtrl.prototype.removeEventListener = function (eventType, listener) {\n    if (eventType === 'renderedRowRemoved' || eventType === 'rowRemoved') {\n      eventType = Events.EVENT_VIRTUAL_ROW_REMOVED;\n      console.warn('AG Grid: Since version 11, event renderedRowRemoved and rowRemoved is now called ' + Events.EVENT_VIRTUAL_ROW_REMOVED);\n    }\n\n    _super.prototype.removeEventListener.call(this, eventType, listener);\n  }; // note - this is NOT called by context, as we don't wire / unwire the CellComp for performance reasons.\n\n\n  RowCtrl.prototype.destroyFirstPass = function () {\n    this.active = false; // why do we have this method? shouldn't everything below be added as a destroy func beside\n    // the corresponding create logic?\n\n    this.setupRemoveAnimation();\n    var event = this.createRowEvent(Events.EVENT_VIRTUAL_ROW_REMOVED);\n    this.dispatchEvent(event);\n    this.beans.eventService.dispatchEvent(event);\n\n    _super.prototype.destroy.call(this);\n  };\n\n  RowCtrl.prototype.setupRemoveAnimation = function () {\n    var rowStillVisibleJustNotInViewport = this.rowNode.rowTop != null;\n\n    if (rowStillVisibleJustNotInViewport) {\n      // if the row is not rendered, but in viewport, it means it has moved,\n      // so we animate the row out. if the new location is very far away,\n      // the animation will be so fast the row will look like it's just disappeared,\n      // so instead we animate to a position just outside the viewport.\n      var rowTop = this.roundRowTopToBounds(this.rowNode.rowTop);\n      this.setRowTop(rowTop);\n    } else {\n      this.allRowGuis.forEach(function (gui) {\n        return gui.rowComp.addOrRemoveCssClass('ag-opacity-zero', true);\n      });\n    }\n  };\n\n  RowCtrl.prototype.destroySecondPass = function () {\n    this.allRowGuis.length = 0;\n\n    var destroyCellCtrls = function (ctrls) {\n      ctrls.list.forEach(function (c) {\n        return c.destroy();\n      });\n      return {\n        list: [],\n        map: {}\n      };\n    };\n\n    this.centerCellCtrls = destroyCellCtrls(this.centerCellCtrls);\n    this.leftCellCtrls = destroyCellCtrls(this.leftCellCtrls);\n    this.rightCellCtrls = destroyCellCtrls(this.rightCellCtrls);\n  };\n\n  RowCtrl.prototype.setFocusedClasses = function () {\n    var _this = this;\n\n    this.allRowGuis.forEach(function (gui) {\n      gui.rowComp.addOrRemoveCssClass('ag-row-focus', _this.rowFocused);\n      gui.rowComp.addOrRemoveCssClass('ag-row-no-focus', !_this.rowFocused);\n    });\n  };\n\n  RowCtrl.prototype.onCellFocusChanged = function () {\n    var rowFocused = this.beans.focusService.isRowFocused(this.rowNode.rowIndex, this.rowNode.rowPinned);\n\n    if (rowFocused !== this.rowFocused) {\n      this.rowFocused = rowFocused;\n      this.setFocusedClasses();\n    } // if we are editing, then moving the focus out of a row will stop editing\n\n\n    if (!rowFocused && this.editingRow) {\n      this.stopEditing(false);\n    }\n  };\n\n  RowCtrl.prototype.onPaginationChanged = function () {\n    var currentPage = this.beans.paginationProxy.getCurrentPage(); // it is possible this row is in the new page, but the page number has changed, which means\n    // it needs to reposition itself relative to the new page\n\n    if (this.paginationPage !== currentPage) {\n      this.paginationPage = currentPage;\n      this.onTopChanged();\n    }\n  };\n\n  RowCtrl.prototype.onTopChanged = function () {\n    this.setRowTop(this.rowNode.rowTop);\n  };\n\n  RowCtrl.prototype.onPaginationPixelOffsetChanged = function () {\n    // the pixel offset is used when calculating rowTop to set on the row DIV\n    this.onTopChanged();\n  }; // applies pagination offset, eg if on second page, and page height is 500px, then removes\n  // 500px from the top position, so a row with rowTop 600px is displayed at location 100px.\n  // reverse will take the offset away rather than add.\n\n\n  RowCtrl.prototype.applyPaginationOffset = function (topPx, reverse) {\n    if (reverse === void 0) {\n      reverse = false;\n    }\n\n    if (this.rowNode.isRowPinned()) {\n      return topPx;\n    }\n\n    var pixelOffset = this.beans.paginationProxy.getPixelOffset();\n    var multiplier = reverse ? 1 : -1;\n    return topPx + pixelOffset * multiplier;\n  };\n\n  RowCtrl.prototype.setRowTop = function (pixels) {\n    // print layout uses normal flow layout for row positioning\n    if (this.printLayout) {\n      return;\n    } // need to make sure rowTop is not null, as this can happen if the node was once\n    // visible (ie parent group was expanded) but is now not visible\n\n\n    if (exists(pixels)) {\n      var afterPaginationPixels = this.applyPaginationOffset(pixels);\n      var afterScalingPixels = this.rowNode.isRowPinned() ? afterPaginationPixels : this.beans.rowContainerHeightService.getRealPixelPosition(afterPaginationPixels);\n      var topPx = afterScalingPixels + \"px\";\n      this.setRowTopStyle(topPx);\n    }\n  };\n\n  RowCtrl.prototype.getInitialRowTop = function () {\n    return this.initialTop;\n  };\n\n  RowCtrl.prototype.getInitialTransform = function () {\n    return this.initialTransform;\n  };\n\n  RowCtrl.prototype.setInitialRowTop = function () {\n    // print layout uses normal flow layout for row positioning\n    if (this.printLayout) {\n      return '';\n    } // if sliding in, we take the old row top. otherwise we just set the current row top.\n\n\n    var pixels = this.slideRowIn ? this.roundRowTopToBounds(this.rowNode.oldRowTop) : this.rowNode.rowTop;\n    var afterPaginationPixels = this.applyPaginationOffset(pixels); // we don't apply scaling if row is pinned\n\n    var afterScalingPixels = this.rowNode.isRowPinned() ? afterPaginationPixels : this.beans.rowContainerHeightService.getRealPixelPosition(afterPaginationPixels);\n    var res = afterScalingPixels + 'px';\n    var suppressRowTransform = this.beans.gridOptionsWrapper.isSuppressRowTransform();\n\n    if (suppressRowTransform) {\n      this.initialTop = res;\n    } else {\n      this.initialTransform = \"translateY(\" + res + \")\";\n    }\n  };\n\n  RowCtrl.prototype.setRowTopStyle = function (topPx) {\n    var suppressRowTransform = this.beans.gridOptionsWrapper.isSuppressRowTransform();\n    this.allRowGuis.forEach(function (gui) {\n      return suppressRowTransform ? gui.rowComp.setTop(topPx) : gui.rowComp.setTransform(\"translateY(\" + topPx + \")\");\n    });\n  };\n\n  RowCtrl.prototype.getRowNode = function () {\n    return this.rowNode;\n  };\n\n  RowCtrl.prototype.getCellCtrl = function (column) {\n    // first up, check for cell directly linked to this column\n    var res = null;\n    this.getAllCellCtrls().forEach(function (cellCtrl) {\n      if (cellCtrl.getColumn() == column) {\n        res = cellCtrl;\n      }\n    });\n\n    if (res != null) {\n      return res;\n    } // second up, if not found, then check for spanned cols.\n    // we do this second (and not at the same time) as this is\n    // more expensive, as spanning cols is a\n    // infrequently used feature so we don't need to do this most\n    // of the time\n\n\n    this.getAllCellCtrls().forEach(function (cellCtrl) {\n      if (cellCtrl.getColSpanningList().indexOf(column) >= 0) {\n        res = cellCtrl;\n      }\n    });\n    return res;\n  };\n\n  RowCtrl.prototype.onRowIndexChanged = function () {\n    // we only bother updating if the rowIndex is present. if it is not present, it means this row\n    // is child of a group node, and the group node was closed, it's the only way to have no row index.\n    // when this happens, row is about to be de-rendered, so we don't care, rowComp is about to die!\n    if (this.rowNode.rowIndex != null) {\n      this.onCellFocusChanged();\n      this.updateRowIndexes();\n    }\n  };\n\n  RowCtrl.prototype.updateRowIndexes = function () {\n    var _this = this;\n\n    var rowIndexStr = this.rowNode.getRowIndexString();\n    var headerRowCount = this.beans.headerNavigationService.getHeaderRowCount();\n    var rowIsEven = this.rowNode.rowIndex % 2 === 0;\n    this.allRowGuis.forEach(function (c) {\n      c.rowComp.setRowIndex(rowIndexStr);\n      c.rowComp.setAriaRowIndex(headerRowCount + _this.rowNode.rowIndex + 1);\n      c.rowComp.addOrRemoveCssClass('ag-row-even', rowIsEven);\n      c.rowComp.addOrRemoveCssClass('ag-row-odd', !rowIsEven);\n    });\n  }; // returns the pinned left container, either the normal one, or the embedded full with one if exists\n\n\n  RowCtrl.prototype.getPinnedLeftRowElement = function () {\n    return this.leftGui ? this.leftGui.element : undefined;\n  }; // returns the pinned right container, either the normal one, or the embedded full with one if exists\n\n\n  RowCtrl.prototype.getPinnedRightRowElement = function () {\n    return this.rightGui ? this.rightGui.element : undefined;\n  }; // returns the body container, either the normal one, or the embedded full with one if exists\n\n\n  RowCtrl.prototype.getBodyRowElement = function () {\n    return this.centerGui ? this.centerGui.element : undefined;\n  }; // returns the full width container\n\n\n  RowCtrl.prototype.getFullWidthRowElement = function () {\n    return this.fullWidthGui ? this.fullWidthGui.element : undefined;\n  };\n\n  RowCtrl.DOM_DATA_KEY_RENDERED_ROW = 'renderedRow';\n  return RowCtrl;\n}(BeanStub);\n\nexport { RowCtrl };","map":{"version":3,"sources":["/Users/mphelps/react-app/TasQDashboard-main/node_modules/@ag-grid-community/core/dist/es6/rendering/row/rowCtrl.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__spreadArrays","s","i","il","arguments","length","r","k","a","j","jl","Constants","BeanStub","RowHighlightPosition","RowNode","Events","ModuleNames","ModuleRegistry","addCssClass","addOrRemoveCssClass","isElementChildOfClass","removeCssClass","isStopPropagationForAgGrid","executeNextVMTurn","exists","find","convertToMap","assign","escapeString","CellCtrl","AngularRowUtils","RowDragComp","RowType","FullWidthRenderers","FullWidthLoading","FullWidthGroup","FullWidthDetail","FullWidthKeys","FullWidth","instanceIdSequence","RowCtrl","_super","parentScope","rowNode","beans","animateIn","useAnimationFrameForCreate","printLayout","_this","call","allRowGuis","active","centerCellCtrls","list","map","leftCellCtrls","rightCellCtrls","lastMouseDownOnDragger","updateColumnListsPending","paginationPage","paginationProxy","getCurrentPage","instanceId","id","setAnimateFlags","rowFocused","focusService","isRowFocused","rowIndex","rowPinned","setupAngular1Scope","rowLevel","rowCssClassCalculator","calculateRowLevel","setRowType","addListeners","setInitialRowTop","getBeans","getInstanceId","setComp","rowComp","element","pinned","gui","push","PINNED_LEFT","leftGui","PINNED_RIGHT","rightGui","isFullWidth","gridOptionsWrapper","isEmbedFullWidthRows","fullWidthGui","centerGui","allNormalPresent","fullWidthPresent","initialiseRowComps","isCacheable","rowType","isKeepDetailRows","setCached","cached","displayValue","undefined","forEach","rg","setDisplay","gow","onRowHeightChanged","updateRowIndexes","setFocusedClasses","setStylesFromGridOptions","isRowSelection","selectable","onRowSelected","updateColumnLists","slideRowIn","onTopChanged","bind","fadeRowIn","businessKey","getRowBusinessKey","rowIdSanitised","businessKeySanitised","comp","setRole","initialRowClasses","getInitialRowClasses","name","group","setAriaExpanded","expanded","setRowId","setRowBusinessKey","setTabIndex","setDomData","DOM_DATA_KEY_RENDERED_ROW","addDestroyFunc","taskQueue","createTask","addHoverFunctionality","setupFullWidth","executeProcessRowPostCreateFunc","getFullWidthCellRendererType","get","getFullWidthCellRendererName","params","createFullWidthParams","cellRendererType","cellRendererName","compDetails","userComponentFactory","getFullWidthCellRendererDetails","showFullWidth","masterDetailModuleLoaded","isRegistered","MasterDetailModule","console","warn","error","getScope","scope","isPrintLayout","scopeResult","createChildScopeOrNull","scopeDestroyFunc","getCellElement","column","cellCtrl","getCellCtrl","getGui","func","getProcessRowPostCreateFunc","eRow","ePinnedLeftRow","ePinnedRightRow","node","api","getApi","addRenderedRowListener","addEventListener","columnApi","getColumnApi","context","getContext","isStub","stub","isFullWidthCell","isDetailCell","doingMasterDetail","detail","pivotMode","columnModel","isPivotMode","isGroupRow","footer","isFullWidthGroup","isGroupUseEntireRow","Normal","suppressAnimationFrame","noAnimation","isSuppressAnimationFrame","updateColumnListsImpl","createCellCtrls","prev","cols","res","addCell","colInstanceId","col","prevCellCtrl","cellInResult","getColumn","keepCell","isCellEligibleToBeRemoved","destroy","getAllDisplayedColumns","centerCols","getViewportCenterColumnsForRow","leftCols","getDisplayedLeftColumnsForRow","rightCols","getDisplayedRightColumnsForRow","item","cellControls","setCellCtrls","nextContainerPinned","REMOVE_CELL","KEEP_CELL","getPinned","editing","isEditing","focused","isCellFocused","getCellPosition","mightWantToKeepCell","column_1","displayedColumns","cellStillDisplayed","indexOf","oldRowTopExists","oldRowTop","editingRow","stopRowEditing","cancel","stopEditing","getRowType","refreshFullWidth","tryRefresh","cellRenderer","getFullWidthCellRenderer","refresh","refreshSucceeded","fullWidthSuccess","centerSuccess","leftSuccess","rightSuccess","allFullWidthRowsRefreshed","addManagedListener","EVENT_HEIGHT_CHANGED","EVENT_ROW_SELECTED","EVENT_ROW_INDEX_CHANGED","onRowIndexChanged","EVENT_TOP_CHANGED","EVENT_EXPANDED_CHANGED","updateExpandedCss","EVENT_HAS_CHILDREN_CHANGED","EVENT_DATA_CHANGED","onRowNodeDataChanged","EVENT_CELL_CHANGED","onRowNodeCellChanged","EVENT_HIGHLIGHT_CHANGED","onRowNodeHighlightChanged","EVENT_DRAGGING_CHANGED","onRowNodeDraggingChanged","EVENT_UI_LEVEL_CHANGED","onUiLevelChanged","eventService","EVENT_PAGINATION_PIXEL_OFFSET_CHANGED","onPaginationPixelOffsetChanged","EVENT_HEIGHT_SCALE_CHANGED","EVENT_DISPLAYED_COLUMNS_CHANGED","onDisplayedColumnsChanged","EVENT_VIRTUAL_COLUMNS_CHANGED","onVirtualColumnsChanged","EVENT_CELL_FOCUSED","onCellFocusChanged","EVENT_PAGINATION_CHANGED","onPaginationChanged","EVENT_MODEL_UPDATED","onModelUpdated","EVENT_COLUMN_MOVED","onColumnMoved","addListenersForCellComps","getAllCellCtrls","event","onCellChanged","refreshCell","suppressFlash","update","newData","postProcessCss","postProcessClassesFromGridOptions","postProcessRowClassRules","postProcessRowDragging","highlighted","aboveOn","Above","belowOn","Below","dragging","expandable","isExpandable","wasAutoRowHeightEverActive","checkAutoHeights","getRowPosition","onKeyboardNavigate","keyboardEvent","currentFullWidthComp","c","contains","target","currentFullWidthContainer","isFullWidthContainerFocused","lastFocusedCell","getFocusedCell","cellPosition","navigationService","navigateToNextCell","keyCode","preventDefault","onTabKeyDown","defaultPrevented","nextEl","findNextFocusableElement","shiftKey","onFullWidthRowFocused","isFocused","focus","preventScroll","removeCellCtrl","cellCtrlToRemove","onMouseEvent","eventName","mouseEvent","onRowDblClick","onRowClick","onRowMouseDown","createRowEvent","type","domEvent","data","createRowEventWithSource","source","agEvent","EVENT_ROW_DOUBLE_CLICKED","dispatchEvent","setFocusedCell","stop","EVENT_ROW_CLICKED","multiSelectKeyPressed","ctrlKey","metaKey","shiftKeyPressed","groupSelectsChildren","isGroupSelectsChildren","isSuppressRowClickSelection","multiSelectOnClick","isRowMultiSelectWithClick","rowDeselectionWithCtrl","isSuppressRowDeselection","isSelected","setSelectedParams","newValue","clearSelection","rangeSelect","setupDetailRowAutoHeight","eDetailGui","isDetailRowAutoHeight","checkRowSizeFunc","clientHeight","updateRowHeightFunc","setRowHeight","clientSideRowModel","serverSideRowModel","frameworkOverrides","setTimeout","resizeObserverDestroyFunc","resizeObserverService","observeResize","fullWidth","value","key","valueFormatted","$scope","$compile","eGridCell","eParentOfValue","registerRowDragger","rowDraggerElement","dragStartPixels","addFullWidthRowDragging","rowDragComp","createManagedBean","newLevel","classToAdd_1","classToRemove_1","isFirstRowOnPage","getPageFirstRow","isLastRowOnPage","getPageLastRow","newFirst","newLast","firstRowOnPage","lastRowOnPage","event_1","EVENT_ROW_VALUE_CHANGED","setEditingRow","setInlineEditingCss","EVENT_ROW_EDITING_STARTED","EVENT_ROW_EDITING_STOPPED","startRowEditing","keyPress","charPress","sourceRenderedCell","cellStartedEdit","startEditing","cssClasses","processClassesFromGridOptions","classStr","processRowClassRules","className","rowStyles","processStylesFromGridOptions","setUserStyles","businessKeyForNodeFunc","getBusinessKeyForNodeFunc","rowIsEven","fullWidthRow","rowStyle","getRowStyle","rowStyleFunc","getRowStyleFunc","rowStyleFuncResult","selected","setAriaSelected","setAriaLabel","createAriaLabel","translate","getLocaleTextFunc","label","isUseAnimationFrameForCreate","onMouseEnter","onMouseLeave","EVENT_MOUSE_ENTER","isSuppressRowHoverHighlight","EVENT_MOUSE_LEAVE","roundRowTopToBounds","rowTop","gridBodyCon","ctrlsService","getGridBodyCtrl","range","getScrollFeature","getVScrollPosition","minPixel","applyPaginationOffset","top","maxPixel","bottom","Math","min","max","getFrameworkOverrides","rowHeight","heightPx_1","setHeight","eventType","listener","EVENT_VIRTUAL_ROW_REMOVED","removeEventListener","destroyFirstPass","setupRemoveAnimation","rowStillVisibleJustNotInViewport","setRowTop","destroySecondPass","destroyCellCtrls","ctrls","currentPage","topPx","reverse","isRowPinned","pixelOffset","getPixelOffset","multiplier","pixels","afterPaginationPixels","afterScalingPixels","rowContainerHeightService","getRealPixelPosition","setRowTopStyle","getInitialRowTop","initialTop","getInitialTransform","initialTransform","suppressRowTransform","isSuppressRowTransform","setTop","setTransform","getRowNode","getColSpanningList","rowIndexStr","getRowIndexString","headerRowCount","headerNavigationService","getHeaderRowCount","setRowIndex","setAriaRowIndex","getPinnedLeftRowElement","getPinnedRightRowElement","getBodyRowElement","getFullWidthRowElement"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIA,SAAS,GAAI,QAAQ,KAAKA,SAAd,IAA6B,YAAY;AACrD,MAAIC,aAAa,GAAG,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChCF,IAAAA,aAAa,GAAGG,MAAM,CAACC,cAAP,IACX;AAAEC,MAAAA,SAAS,EAAE;AAAb,iBAA6BC,KAA7B,IAAsC,UAAUL,CAAV,EAAaC,CAAb,EAAgB;AAAED,MAAAA,CAAC,CAACI,SAAF,GAAcH,CAAd;AAAkB,KAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AAAE,WAAK,IAAIK,CAAT,IAAcL,CAAd,EAAiB,IAAIA,CAAC,CAACM,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBN,CAAC,CAACM,CAAD,CAAD,GAAOL,CAAC,CAACK,CAAD,CAAR;AAAc,KAF9E;;AAGA,WAAOP,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAApB;AACH,GALD;;AAMA,SAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AACnBF,IAAAA,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAAb;;AACA,aAASO,EAAT,GAAc;AAAE,WAAKC,WAAL,GAAmBT,CAAnB;AAAuB;;AACvCA,IAAAA,CAAC,CAACU,SAAF,GAAcT,CAAC,KAAK,IAAN,GAAaC,MAAM,CAACS,MAAP,CAAcV,CAAd,CAAb,IAAiCO,EAAE,CAACE,SAAH,GAAeT,CAAC,CAACS,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;AACH,GAJD;AAKH,CAZ2C,EAA5C;;AAaA,IAAII,cAAc,GAAI,QAAQ,KAAKA,cAAd,IAAiC,YAAY;AAC9D,OAAK,IAAIC,CAAC,GAAG,CAAR,EAAWC,CAAC,GAAG,CAAf,EAAkBC,EAAE,GAAGC,SAAS,CAACC,MAAtC,EAA8CH,CAAC,GAAGC,EAAlD,EAAsDD,CAAC,EAAvD,EAA2DD,CAAC,IAAIG,SAAS,CAACF,CAAD,CAAT,CAAaG,MAAlB;;AAC3D,OAAK,IAAIC,CAAC,GAAGb,KAAK,CAACQ,CAAD,CAAb,EAAkBM,CAAC,GAAG,CAAtB,EAAyBL,CAAC,GAAG,CAAlC,EAAqCA,CAAC,GAAGC,EAAzC,EAA6CD,CAAC,EAA9C,EACI,KAAK,IAAIM,CAAC,GAAGJ,SAAS,CAACF,CAAD,CAAjB,EAAsBO,CAAC,GAAG,CAA1B,EAA6BC,EAAE,GAAGF,CAAC,CAACH,MAAzC,EAAiDI,CAAC,GAAGC,EAArD,EAAyDD,CAAC,IAAIF,CAAC,EAA/D,EACID,CAAC,CAACC,CAAD,CAAD,GAAOC,CAAC,CAACC,CAAD,CAAR;;AACR,SAAOH,CAAP;AACH,CAND;;AAOA,SAASK,SAAT,QAA0B,2BAA1B;AACA,SAASC,QAAT,QAAyB,wBAAzB;AACA,SAASC,oBAAT,EAA+BC,OAA/B,QAA8C,wBAA9C;AACA,SAASC,MAAT,QAAuB,cAAvB;AACA,SAASC,WAAT,QAA4B,2BAA5B;AACA,SAASC,cAAT,QAA+B,8BAA/B;AACA,SAASC,WAAT,EAAsBC,mBAAtB,EAA2CC,qBAA3C,EAAkEC,cAAlE,QAAwF,iBAAxF;AACA,SAASC,0BAAT,QAA2C,mBAA3C;AACA,SAASC,iBAAT,QAAkC,sBAAlC;AACA,SAASC,MAAT,EAAiBC,IAAjB,QAA6B,qBAA7B;AACA,SAASC,YAAT,QAA6B,iBAA7B;AACA,SAASC,MAAT,QAAuB,oBAAvB;AACA,SAASC,YAAT,QAA6B,oBAA7B;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,SAASC,eAAT,QAAgC,mBAAhC;AACA,SAASC,WAAT,QAA4B,eAA5B;AACA,OAAO,IAAIC,OAAJ;;AACP,CAAC,UAAUA,OAAV,EAAmB;AAChBA,EAAAA,OAAO,CAAC,QAAD,CAAP,GAAoB,QAApB;AACAA,EAAAA,OAAO,CAAC,WAAD,CAAP,GAAuB,WAAvB;AACAA,EAAAA,OAAO,CAAC,kBAAD,CAAP,GAA8B,kBAA9B;AACAA,EAAAA,OAAO,CAAC,gBAAD,CAAP,GAA4B,gBAA5B;AACAA,EAAAA,OAAO,CAAC,iBAAD,CAAP,GAA6B,iBAA7B;AACH,CAND,EAMGA,OAAO,KAAKA,OAAO,GAAG,EAAf,CANV;;AAOA,OAAO,IAAIC,kBAAkB,GAAGP,YAAY,CAAC,CACzC,CAACM,OAAO,CAACE,gBAAT,EAA2B,uBAA3B,CADyC,EAEzC,CAACF,OAAO,CAACG,cAAT,EAAyB,oBAAzB,CAFyC,EAGzC,CAACH,OAAO,CAACI,eAAT,EAA0B,sBAA1B,CAHyC,CAAD,CAArC;AAKP,OAAO,IAAIC,aAAa,GAAGX,YAAY,CAAC,CACpC,CAACM,OAAO,CAACM,SAAT,EAAoB,uBAApB,CADoC,EAEpC,CAACN,OAAO,CAACE,gBAAT,EAA2B,qBAA3B,CAFoC,EAGpC,CAACF,OAAO,CAACG,cAAT,EAAyB,kBAAzB,CAHoC,EAIpC,CAACH,OAAO,CAACI,eAAT,EAA0B,oBAA1B,CAJoC,CAAD,CAAhC;AAMP,IAAIG,kBAAkB,GAAG,CAAzB;;AACA,IAAIC,OAAO,GAAkB,UAAUC,MAAV,EAAkB;AAC3CvD,EAAAA,SAAS,CAACsD,OAAD,EAAUC,MAAV,CAAT;;AACA,WAASD,OAAT,CAAiBE,WAAjB,EAA8BC,OAA9B,EAAuCC,KAAvC,EAA8CC,SAA9C,EAAyDC,0BAAzD,EAAqFC,WAArF,EAAkG;AAC9F,QAAIC,KAAK,GAAGP,MAAM,CAACQ,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;AACAD,IAAAA,KAAK,CAACE,UAAN,GAAmB,EAAnB;AACAF,IAAAA,KAAK,CAACG,MAAN,GAAe,IAAf;AACAH,IAAAA,KAAK,CAACI,eAAN,GAAwB;AAAEC,MAAAA,IAAI,EAAE,EAAR;AAAYC,MAAAA,GAAG,EAAE;AAAjB,KAAxB;AACAN,IAAAA,KAAK,CAACO,aAAN,GAAsB;AAAEF,MAAAA,IAAI,EAAE,EAAR;AAAYC,MAAAA,GAAG,EAAE;AAAjB,KAAtB;AACAN,IAAAA,KAAK,CAACQ,cAAN,GAAuB;AAAEH,MAAAA,IAAI,EAAE,EAAR;AAAYC,MAAAA,GAAG,EAAE;AAAjB,KAAvB;AACAN,IAAAA,KAAK,CAACS,sBAAN,GAA+B,KAA/B;AACAT,IAAAA,KAAK,CAACU,wBAAN,GAAiC,KAAjC;AACAV,IAAAA,KAAK,CAACN,WAAN,GAAoBA,WAApB;AACAM,IAAAA,KAAK,CAACJ,KAAN,GAAcA,KAAd;AACAI,IAAAA,KAAK,CAACL,OAAN,GAAgBA,OAAhB;AACAK,IAAAA,KAAK,CAACW,cAAN,GAAuBX,KAAK,CAACJ,KAAN,CAAYgB,eAAZ,CAA4BC,cAA5B,EAAvB;AACAb,IAAAA,KAAK,CAACF,0BAAN,GAAmCA,0BAAnC;AACAE,IAAAA,KAAK,CAACD,WAAN,GAAoBA,WAApB;AACAC,IAAAA,KAAK,CAACc,UAAN,GAAmBnB,OAAO,CAACoB,EAAR,GAAa,GAAb,GAAmBxB,kBAAkB,EAAxD;;AACAS,IAAAA,KAAK,CAACgB,eAAN,CAAsBnB,SAAtB;;AACAG,IAAAA,KAAK,CAACiB,UAAN,GAAmBjB,KAAK,CAACJ,KAAN,CAAYsB,YAAZ,CAAyBC,YAAzB,CAAsCnB,KAAK,CAACL,OAAN,CAAcyB,QAApD,EAA8DpB,KAAK,CAACL,OAAN,CAAc0B,SAA5E,CAAnB;;AACArB,IAAAA,KAAK,CAACsB,kBAAN;;AACAtB,IAAAA,KAAK,CAACuB,QAAN,GAAiBvB,KAAK,CAACJ,KAAN,CAAY4B,qBAAZ,CAAkCC,iBAAlC,CAAoDzB,KAAK,CAACL,OAA1D,CAAjB;;AACAK,IAAAA,KAAK,CAAC0B,UAAN;;AACA1B,IAAAA,KAAK,CAAC2B,YAAN;;AACA3B,IAAAA,KAAK,CAAC4B,gBAAN;;AACA,WAAO5B,KAAP;AACH;;AACDR,EAAAA,OAAO,CAAC1C,SAAR,CAAkB+E,QAAlB,GAA6B,YAAY;AACrC,WAAO,KAAKjC,KAAZ;AACH,GAFD;;AAGAJ,EAAAA,OAAO,CAAC1C,SAAR,CAAkBgF,aAAlB,GAAkC,YAAY;AAC1C,WAAO,KAAKhB,UAAZ;AACH,GAFD;;AAGAtB,EAAAA,OAAO,CAAC1C,SAAR,CAAkBiF,OAAlB,GAA4B,UAAUC,OAAV,EAAmBC,OAAnB,EAA4BC,MAA5B,EAAoC;AAC5D,QAAIC,GAAG,GAAG;AAAEH,MAAAA,OAAO,EAAEA,OAAX;AAAoBC,MAAAA,OAAO,EAAEA,OAA7B;AAAsCC,MAAAA,MAAM,EAAEA;AAA9C,KAAV;AACA,SAAKhC,UAAL,CAAgBkC,IAAhB,CAAqBD,GAArB;;AACA,QAAID,MAAM,KAAKvE,SAAS,CAAC0E,WAAzB,EAAsC;AAClC,WAAKC,OAAL,GAAeH,GAAf;AACH,KAFD,MAGK,IAAID,MAAM,KAAKvE,SAAS,CAAC4E,YAAzB,EAAuC;AACxC,WAAKC,QAAL,GAAgBL,GAAhB;AACH,KAFI,MAGA,IAAI,KAAKM,WAAL,MAAsB,CAAC,KAAK7C,KAAL,CAAW8C,kBAAX,CAA8BC,oBAA9B,EAA3B,EAAiF;AAClF,WAAKC,YAAL,GAAoBT,GAApB;AACH,KAFI,MAGA;AACD,WAAKU,SAAL,GAAiBV,GAAjB;AACH;;AACD,QAAIW,gBAAgB,GAAG,KAAKR,OAAL,IAAgB,IAAhB,IAAwB,KAAKE,QAAL,IAAiB,IAAzC,IAAiD,KAAKK,SAAL,IAAkB,IAA1F;AACA,QAAIE,gBAAgB,GAAG,KAAKH,YAAL,IAAqB,IAA5C;;AACA,QAAIE,gBAAgB,IAAIC,gBAAxB,EAA0C;AACtC,WAAKC,kBAAL;AACH;AACJ,GApBD;;AAqBAxD,EAAAA,OAAO,CAAC1C,SAAR,CAAkBmG,WAAlB,GAAgC,YAAY;AACxC,WAAO,KAAKC,OAAL,KAAiBlE,OAAO,CAACI,eAAzB,IACA,KAAKQ,KAAL,CAAW8C,kBAAX,CAA8BS,gBAA9B,EADP;AAEH,GAHD;;AAIA3D,EAAAA,OAAO,CAAC1C,SAAR,CAAkBsG,SAAlB,GAA8B,UAAUC,MAAV,EAAkB;AAC5C,QAAIC,YAAY,GAAGD,MAAM,GAAG,MAAH,GAAYE,SAArC;AACA,SAAKrD,UAAL,CAAgBsD,OAAhB,CAAwB,UAAUC,EAAV,EAAc;AAAE,aAAOA,EAAE,CAACzB,OAAH,CAAW0B,UAAX,CAAsBJ,YAAtB,CAAP;AAA6C,KAArF;AACH,GAHD;;AAIA9D,EAAAA,OAAO,CAAC1C,SAAR,CAAkBkG,kBAAlB,GAAuC,YAAY;AAC/C,QAAIhD,KAAK,GAAG,IAAZ;;AACA,QAAI2D,GAAG,GAAG,KAAK/D,KAAL,CAAW8C,kBAArB;AACA,SAAKkB,kBAAL;AACA,SAAKC,gBAAL;AACA,SAAKC,iBAAL;AACA,SAAKC,wBAAL;;AACA,QAAIJ,GAAG,CAACK,cAAJ,MAAwB,KAAKrE,OAAL,CAAasE,UAAzC,EAAqD;AACjD,WAAKC,aAAL;AACH;;AACD,SAAKC,iBAAL,CAAuB,CAAC,KAAKrE,0BAA7B;;AACA,QAAI,KAAKsE,UAAT,EAAqB;AACjB7F,MAAAA,iBAAiB,CAAC,KAAK8F,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAAD,CAAjB;AACH;;AACD,QAAI,KAAKC,SAAT,EAAoB;AAChBhG,MAAAA,iBAAiB,CAAC,YAAY;AAC1ByB,QAAAA,KAAK,CAACE,UAAN,CAAiBsD,OAAjB,CAAyB,UAAUrB,GAAV,EAAe;AAAE,iBAAOA,GAAG,CAACH,OAAJ,CAAY7D,mBAAZ,CAAgC,iBAAhC,EAAmD,KAAnD,CAAP;AAAmE,SAA7G;AACH,OAFgB,CAAjB;AAGH;;AACD,QAAIqG,WAAW,GAAG,KAAKC,iBAAL,EAAlB;AACA,QAAIC,cAAc,GAAG9F,YAAY,CAAC,KAAKe,OAAL,CAAaoB,EAAd,CAAjC;AACA,QAAI4D,oBAAoB,GAAG/F,YAAY,CAAC4F,WAAD,CAAvC;AACA,SAAKtE,UAAL,CAAgBsD,OAAhB,CAAwB,UAAUrB,GAAV,EAAe;AACnC,UAAIyC,IAAI,GAAGzC,GAAG,CAACH,OAAf;AACA4C,MAAAA,IAAI,CAACC,OAAL,CAAa,KAAb;;AACA,UAAIC,iBAAiB,GAAG9E,KAAK,CAAC+E,oBAAN,CAA2B5C,GAAG,CAACD,MAA/B,CAAxB;;AACA4C,MAAAA,iBAAiB,CAACtB,OAAlB,CAA0B,UAAUwB,IAAV,EAAgB;AAAE,eAAOJ,IAAI,CAACzG,mBAAL,CAAyB6G,IAAzB,EAA+B,IAA/B,CAAP;AAA8C,OAA1F;;AACA,UAAIhF,KAAK,CAACL,OAAN,CAAcsF,KAAlB,EAAyB;AACrBL,QAAAA,IAAI,CAACM,eAAL,CAAqBlF,KAAK,CAACL,OAAN,CAAcwF,QAAd,IAA0B,IAA/C;AACH;;AACD,UAAIT,cAAc,IAAI,IAAtB,EAA4B;AACxBE,QAAAA,IAAI,CAACQ,QAAL,CAAcV,cAAd;AACH;;AACD,UAAIC,oBAAoB,IAAI,IAA5B,EAAkC;AAC9BC,QAAAA,IAAI,CAACS,iBAAL,CAAuBV,oBAAvB;AACH;;AACD,UAAI3E,KAAK,CAACyC,WAAN,EAAJ,EAAyB;AACrBmC,QAAAA,IAAI,CAACU,WAAL,CAAiB,CAAC,CAAlB;AACH,OAhBkC,CAiBnC;;;AACA3B,MAAAA,GAAG,CAAC4B,UAAJ,CAAepD,GAAG,CAACF,OAAnB,EAA4BzC,OAAO,CAACgG,yBAApC,EAA+DxF,KAA/D;;AACAA,MAAAA,KAAK,CAACyF,cAAN,CAAqB,YAAY;AAAE,eAAO9B,GAAG,CAAC4B,UAAJ,CAAepD,GAAG,CAACF,OAAnB,EAA4BzC,OAAO,CAACgG,yBAApC,EAA+D,IAA/D,CAAP;AAA8E,OAAjH,EAnBmC,CAoBnC;AACA;;;AACA,UAAIxF,KAAK,CAACF,0BAAV,EAAsC;AAClCE,QAAAA,KAAK,CAACJ,KAAN,CAAY8F,SAAZ,CAAsBC,UAAtB,CAAiC3F,KAAK,CAAC4F,qBAAN,CAA4BtB,IAA5B,CAAiCtE,KAAjC,EAAwCmC,GAAG,CAACF,OAA5C,CAAjC,EAAuFjC,KAAK,CAACL,OAAN,CAAcyB,QAArG,EAA+G,eAA/G;AACH,OAFD,MAGK;AACDpB,QAAAA,KAAK,CAAC4F,qBAAN,CAA4BzD,GAAG,CAACF,OAAhC;AACH;;AACD,UAAIjC,KAAK,CAACyC,WAAN,EAAJ,EAAyB;AACrBzC,QAAAA,KAAK,CAAC6F,cAAN,CAAqB1D,GAArB;AACH;AACJ,KA/BD;AAgCA,SAAK2D,+BAAL;AACH,GAvDD;;AAwDAtG,EAAAA,OAAO,CAAC1C,SAAR,CAAkBiJ,4BAAlB,GAAiD,YAAY;AACzD,WAAO1G,aAAa,CAAC2G,GAAd,CAAkB,KAAK9C,OAAvB,CAAP;AACH,GAFD;;AAGA1D,EAAAA,OAAO,CAAC1C,SAAR,CAAkBmJ,4BAAlB,GAAiD,YAAY;AACzD,WAAOhH,kBAAkB,CAAC+G,GAAnB,CAAuB,KAAK9C,OAA5B,CAAP;AACH,GAFD;;AAGA1D,EAAAA,OAAO,CAAC1C,SAAR,CAAkB+I,cAAlB,GAAmC,UAAU1D,GAAV,EAAe;AAC9C,QAAI+D,MAAM,GAAG,KAAKC,qBAAL,CAA2BhE,GAAG,CAACF,OAA/B,EAAwCE,GAAG,CAACD,MAA5C,CAAb;AACA,QAAIkE,gBAAgB,GAAG,KAAKL,4BAAL,EAAvB;AACA,QAAIM,gBAAgB,GAAG,KAAKJ,4BAAL,EAAvB;AACA,QAAIK,WAAW,GAAG,KAAK1G,KAAL,CAAW2G,oBAAX,CAAgCC,+BAAhC,CAAgEN,MAAhE,EAAwEE,gBAAxE,EAA0FC,gBAA1F,CAAlB;;AACA,QAAIC,WAAJ,EAAiB;AACbnE,MAAAA,GAAG,CAACH,OAAJ,CAAYyE,aAAZ,CAA0BH,WAA1B;AACH,KAFD,MAGK;AACD,UAAII,wBAAwB,GAAGzI,cAAc,CAAC0I,YAAf,CAA4B3I,WAAW,CAAC4I,kBAAxC,CAA/B;;AACA,UAAIP,gBAAgB,KAAK,sBAArB,IAA+C,CAACK,wBAApD,EAA8E;AAC1EG,QAAAA,OAAO,CAACC,IAAR,CAAa,gIAAb;AACH,OAFD,MAGK;AACDD,QAAAA,OAAO,CAACE,KAAR,CAAc,oCAAoCV,gBAApC,GAAuD,YAArE;AACH;AACJ;AACJ,GAjBD;;AAkBA7G,EAAAA,OAAO,CAAC1C,SAAR,CAAkBkK,QAAlB,GAA6B,YAAY;AACrC,WAAO,KAAKC,KAAZ;AACH,GAFD;;AAGAzH,EAAAA,OAAO,CAAC1C,SAAR,CAAkBoK,aAAlB,GAAkC,YAAY;AAC1C,WAAO,KAAKnH,WAAZ;AACH,GAFD;;AAGAP,EAAAA,OAAO,CAAC1C,SAAR,CAAkBwE,kBAAlB,GAAuC,YAAY;AAC/C,QAAI6F,WAAW,GAAGrI,eAAe,CAACsI,sBAAhB,CAAuC,KAAKzH,OAA5C,EAAqD,KAAKD,WAA1D,EAAuE,KAAKE,KAAL,CAAW8C,kBAAlF,CAAlB;;AACA,QAAIyE,WAAJ,EAAiB;AACb,WAAKF,KAAL,GAAaE,WAAW,CAACF,KAAzB;AACA,WAAKxB,cAAL,CAAoB0B,WAAW,CAACE,gBAAhC;AACH;AACJ,GAND,CApJ2C,CA2J3C;;;AACA7H,EAAAA,OAAO,CAAC1C,SAAR,CAAkBwK,cAAlB,GAAmC,UAAUC,MAAV,EAAkB;AACjD,QAAIC,QAAQ,GAAG,KAAKC,WAAL,CAAiBF,MAAjB,CAAf;AACA,WAAOC,QAAQ,GAAGA,QAAQ,CAACE,MAAT,EAAH,GAAuB,IAAtC;AACH,GAHD;;AAIAlI,EAAAA,OAAO,CAAC1C,SAAR,CAAkBgJ,+BAAlB,GAAoD,YAAY;AAC5D,QAAI6B,IAAI,GAAG,KAAK/H,KAAL,CAAW8C,kBAAX,CAA8BkF,2BAA9B,EAAX;;AACA,QAAI,CAACD,IAAL,EAAW;AACP;AACH;;AACD,QAAIzB,MAAM,GAAG;AACT2B,MAAAA,IAAI,EAAE,KAAKhF,SAAL,GAAiB,KAAKA,SAAL,CAAeZ,OAAhC,GAA0CsB,SADvC;AAETuE,MAAAA,cAAc,EAAE,KAAKxF,OAAL,GAAe,KAAKA,OAAL,CAAaL,OAA5B,GAAsCsB,SAF7C;AAGTwE,MAAAA,eAAe,EAAE,KAAKvF,QAAL,GAAgB,KAAKA,QAAL,CAAcP,OAA9B,GAAwCsB,SAHhD;AAITyE,MAAAA,IAAI,EAAE,KAAKrI,OAJF;AAKTsI,MAAAA,GAAG,EAAE,KAAKrI,KAAL,CAAW8C,kBAAX,CAA8BwF,MAA9B,EALI;AAMT9G,MAAAA,QAAQ,EAAE,KAAKzB,OAAL,CAAayB,QANd;AAOT+G,MAAAA,sBAAsB,EAAE,KAAKC,gBAAL,CAAsB9D,IAAtB,CAA2B,IAA3B,CAPf;AAQT+D,MAAAA,SAAS,EAAE,KAAKzI,KAAL,CAAW8C,kBAAX,CAA8B4F,YAA9B,EARF;AASTC,MAAAA,OAAO,EAAE,KAAK3I,KAAL,CAAW8C,kBAAX,CAA8B8F,UAA9B;AATA,KAAb;AAWAb,IAAAA,IAAI,CAACzB,MAAD,CAAJ;AACH,GAjBD;;AAkBA1G,EAAAA,OAAO,CAAC1C,SAAR,CAAkB4E,UAAlB,GAA+B,YAAY;AACvC,QAAI+G,MAAM,GAAG,KAAK9I,OAAL,CAAa+I,IAA1B;AACA,QAAIC,eAAe,GAAG,KAAKhJ,OAAL,CAAagJ,eAAb,EAAtB;AACA,QAAIC,YAAY,GAAG,KAAKhJ,KAAL,CAAWiJ,iBAAX,IAAgC,KAAKlJ,OAAL,CAAamJ,MAAhE;AACA,QAAIC,SAAS,GAAG,KAAKnJ,KAAL,CAAWoJ,WAAX,CAAuBC,WAAvB,EAAhB,CAJuC,CAKvC;AACA;AACA;AACA;;AACA,QAAIC,UAAU,GAAG,CAAC,CAAC,KAAKvJ,OAAL,CAAasF,KAAf,IAAwB,CAAC,KAAKtF,OAAL,CAAawJ,MAAvD;AACA,QAAIC,gBAAgB,GAAGF,UAAU,IAAI,KAAKtJ,KAAL,CAAW8C,kBAAX,CAA8B2G,mBAA9B,CAAkDN,SAAlD,CAArC;;AACA,QAAIN,MAAJ,EAAY;AACR,WAAKvF,OAAL,GAAelE,OAAO,CAACE,gBAAvB;AACH,KAFD,MAGK,IAAI0J,YAAJ,EAAkB;AACnB,WAAK1F,OAAL,GAAelE,OAAO,CAACI,eAAvB;AACH,KAFI,MAGA,IAAIuJ,eAAJ,EAAqB;AACtB,WAAKzF,OAAL,GAAelE,OAAO,CAACM,SAAvB;AACH,KAFI,MAGA,IAAI8J,gBAAJ,EAAsB;AACvB,WAAKlG,OAAL,GAAelE,OAAO,CAACG,cAAvB;AACH,KAFI,MAGA;AACD,WAAK+D,OAAL,GAAelE,OAAO,CAACsK,MAAvB;AACH;AACJ,GA1BD;;AA2BA9J,EAAAA,OAAO,CAAC1C,SAAR,CAAkBqH,iBAAlB,GAAsC,UAAUoF,sBAAV,EAAkC;AACpE,QAAIvJ,KAAK,GAAG,IAAZ;;AACA,QAAIuJ,sBAAsB,KAAK,KAAK,CAApC,EAAuC;AAAEA,MAAAA,sBAAsB,GAAG,KAAzB;AAAiC;;AAC1E,QAAI,KAAK9G,WAAL,EAAJ,EAAwB;AACpB;AACH;;AACD,QAAI+G,WAAW,GAAGD,sBAAsB,IACjC,KAAK3J,KAAL,CAAW8C,kBAAX,CAA8B+G,wBAA9B,EADW,IAEX,KAAK1J,WAFZ;;AAGA,QAAIyJ,WAAJ,EAAiB;AACb,WAAKE,qBAAL;AACA;AACH;;AACD,QAAI,KAAKhJ,wBAAT,EAAmC;AAC/B;AACH;;AACD,SAAKd,KAAL,CAAW8F,SAAX,CAAqBC,UAArB,CAAgC,YAAY;AACxC,UAAI,CAAC3F,KAAK,CAACG,MAAX,EAAmB;AACf;AACH;;AACDH,MAAAA,KAAK,CAAC0J,qBAAN;AACH,KALD,EAKG,KAAK/J,OAAL,CAAayB,QALhB,EAK0B,eAL1B;AAMA,SAAKV,wBAAL,GAAgC,IAAhC;AACH,GAvBD;;AAwBAlB,EAAAA,OAAO,CAAC1C,SAAR,CAAkB6M,eAAlB,GAAoC,UAAUC,IAAV,EAAgBC,IAAhB,EAAsB3H,MAAtB,EAA8B;AAC9D,QAAIlC,KAAK,GAAG,IAAZ;;AACA,QAAIkC,MAAM,KAAK,KAAK,CAApB,EAAuB;AAAEA,MAAAA,MAAM,GAAG,IAAT;AAAgB;;AACzC,QAAI4H,GAAG,GAAG;AACNzJ,MAAAA,IAAI,EAAE,EADA;AAENC,MAAAA,GAAG,EAAE;AAFC,KAAV;;AAIA,QAAIyJ,OAAO,GAAG,UAAUC,aAAV,EAAyBxC,QAAzB,EAAmC;AAC7CsC,MAAAA,GAAG,CAACzJ,IAAJ,CAAS+B,IAAT,CAAcoF,QAAd;AACAsC,MAAAA,GAAG,CAACxJ,GAAJ,CAAQ0J,aAAR,IAAyBxC,QAAzB;AACH,KAHD;;AAIAqC,IAAAA,IAAI,CAACrG,OAAL,CAAa,UAAUyG,GAAV,EAAe;AACxB;AACA;AACA;AACA,UAAID,aAAa,GAAGC,GAAG,CAACnI,aAAJ,EAApB;AACA,UAAI0F,QAAQ,GAAGoC,IAAI,CAACtJ,GAAL,CAAS0J,aAAT,CAAf;;AACA,UAAI,CAACxC,QAAL,EAAe;AACXA,QAAAA,QAAQ,GAAG,IAAI3I,QAAJ,CAAaoL,GAAb,EAAkBjK,KAAK,CAACL,OAAxB,EAAiCK,KAAK,CAACJ,KAAvC,EAA8CI,KAA9C,CAAX;AACH;;AACD+J,MAAAA,OAAO,CAACC,aAAD,EAAgBxC,QAAhB,CAAP;AACH,KAVD;AAWAoC,IAAAA,IAAI,CAACvJ,IAAL,CAAUmD,OAAV,CAAkB,UAAU0G,YAAV,EAAwB;AACtC,UAAIC,YAAY,GAAGL,GAAG,CAACxJ,GAAJ,CAAQ4J,YAAY,CAACE,SAAb,GAAyBtI,aAAzB,EAAR,KAAqD,IAAxE;;AACA,UAAIqI,YAAJ,EAAkB;AACd;AACH;;AACD,UAAIE,QAAQ,GAAG,CAACrK,KAAK,CAACsK,yBAAN,CAAgCJ,YAAhC,EAA8ChI,MAA9C,CAAhB;;AACA,UAAImI,QAAJ,EAAc;AACVN,QAAAA,OAAO,CAACG,YAAY,CAACE,SAAb,GAAyBtI,aAAzB,EAAD,EAA2CoI,YAA3C,CAAP;AACA;AACH;;AACDA,MAAAA,YAAY,CAACK,OAAb;AACH,KAXD;AAYA,WAAOT,GAAP;AACH,GAnCD;;AAoCAtK,EAAAA,OAAO,CAAC1C,SAAR,CAAkB4M,qBAAlB,GAA0C,YAAY;AAClD,QAAI1J,KAAK,GAAG,IAAZ;;AACA,SAAKU,wBAAL,GAAgC,KAAhC;AACA,QAAIsI,WAAW,GAAG,KAAKpJ,KAAL,CAAWoJ,WAA7B;;AACA,QAAI,KAAKjJ,WAAT,EAAsB;AAClB,WAAKK,eAAL,GAAuB,KAAKuJ,eAAL,CAAqB,KAAKvJ,eAA1B,EAA2C4I,WAAW,CAACwB,sBAAZ,EAA3C,CAAvB;AACA,WAAKjK,aAAL,GAAqB;AAAEF,QAAAA,IAAI,EAAE,EAAR;AAAYC,QAAAA,GAAG,EAAE;AAAjB,OAArB;AACA,WAAKE,cAAL,GAAsB;AAAEH,QAAAA,IAAI,EAAE,EAAR;AAAYC,QAAAA,GAAG,EAAE;AAAjB,OAAtB;AACH,KAJD,MAKK;AACD,UAAImK,UAAU,GAAGzB,WAAW,CAAC0B,8BAAZ,CAA2C,KAAK/K,OAAhD,CAAjB;AACA,WAAKS,eAAL,GAAuB,KAAKuJ,eAAL,CAAqB,KAAKvJ,eAA1B,EAA2CqK,UAA3C,CAAvB;AACA,UAAIE,QAAQ,GAAG3B,WAAW,CAAC4B,6BAAZ,CAA0C,KAAKjL,OAA/C,CAAf;AACA,WAAKY,aAAL,GAAqB,KAAKoJ,eAAL,CAAqB,KAAKpJ,aAA1B,EAAyCoK,QAAzC,EAAmDhN,SAAS,CAAC0E,WAA7D,CAArB;AACA,UAAIwI,SAAS,GAAG7B,WAAW,CAAC8B,8BAAZ,CAA2C,KAAKnL,OAAhD,CAAhB;AACA,WAAKa,cAAL,GAAsB,KAAKmJ,eAAL,CAAqB,KAAKnJ,cAA1B,EAA0CqK,SAA1C,EAAqDlN,SAAS,CAAC4E,YAA/D,CAAtB;AACH;;AACD,SAAKrC,UAAL,CAAgBsD,OAAhB,CAAwB,UAAUuH,IAAV,EAAgB;AACpC,UAAIC,YAAY,GAAGD,IAAI,CAAC7I,MAAL,KAAgBvE,SAAS,CAAC0E,WAA1B,GAAwCrC,KAAK,CAACO,aAA9C,GACfwK,IAAI,CAAC7I,MAAL,KAAgBvE,SAAS,CAAC4E,YAA1B,GAAyCvC,KAAK,CAACQ,cAA/C,GAAgER,KAAK,CAACI,eAD1E;AAEA2K,MAAAA,IAAI,CAAC/I,OAAL,CAAaiJ,YAAb,CAA0BD,YAAY,CAAC3K,IAAvC;AACH,KAJD;AAKH,GAtBD;;AAuBAb,EAAAA,OAAO,CAAC1C,SAAR,CAAkBwN,yBAAlB,GAA8C,UAAU9C,QAAV,EAAoB0D,mBAApB,EAAyC;AACnF,QAAIC,WAAW,GAAG,IAAlB;AACA,QAAIC,SAAS,GAAG,KAAhB,CAFmF,CAGnF;;AACA,QAAI7D,MAAM,GAAGC,QAAQ,CAAC4C,SAAT,EAAb;;AACA,QAAI7C,MAAM,CAAC8D,SAAP,MAAsBH,mBAA1B,EAA+C;AAC3C,aAAOC,WAAP;AACH,KAPkF,CAQnF;;;AACA,QAAIG,OAAO,GAAG9D,QAAQ,CAAC+D,SAAT,EAAd;AACA,QAAIC,OAAO,GAAG,KAAK5L,KAAL,CAAWsB,YAAX,CAAwBuK,aAAxB,CAAsCjE,QAAQ,CAACkE,eAAT,EAAtC,CAAd;AACA,QAAIC,mBAAmB,GAAGL,OAAO,IAAIE,OAArC;;AACA,QAAIG,mBAAJ,EAAyB;AACrB,UAAIC,QAAQ,GAAGpE,QAAQ,CAAC4C,SAAT,EAAf;AACA,UAAIyB,gBAAgB,GAAG,KAAKjM,KAAL,CAAWoJ,WAAX,CAAuBwB,sBAAvB,EAAvB;AACA,UAAIsB,kBAAkB,GAAGD,gBAAgB,CAACE,OAAjB,CAAyBH,QAAzB,KAAsC,CAA/D;AACA,aAAOE,kBAAkB,GAAGV,SAAH,GAAeD,WAAxC;AACH;;AACD,WAAOA,WAAP;AACH,GAnBD;;AAoBA3L,EAAAA,OAAO,CAAC1C,SAAR,CAAkBkE,eAAlB,GAAoC,UAAUnB,SAAV,EAAqB;AACrD,QAAIA,SAAJ,EAAe;AACX,UAAImM,eAAe,GAAGxN,MAAM,CAAC,KAAKmB,OAAL,CAAasM,SAAd,CAA5B,CADW,CAEX;;AACA,WAAK7H,UAAL,GAAkB4H,eAAlB,CAHW,CAIX;;AACA,WAAKzH,SAAL,GAAiB,CAACyH,eAAlB;AACH,KAND,MAOK;AACD,WAAK5H,UAAL,GAAkB,KAAlB;AACA,WAAKG,SAAL,GAAiB,KAAjB;AACH;AACJ,GAZD;;AAaA/E,EAAAA,OAAO,CAAC1C,SAAR,CAAkByO,SAAlB,GAA8B,YAAY;AACtC,WAAO,KAAKW,UAAZ;AACH,GAFD;;AAGA1M,EAAAA,OAAO,CAAC1C,SAAR,CAAkBqP,cAAlB,GAAmC,UAAUC,MAAV,EAAkB;AACjD,SAAKC,WAAL,CAAiBD,MAAjB;AACH,GAFD;;AAGA5M,EAAAA,OAAO,CAAC1C,SAAR,CAAkB2F,WAAlB,GAAgC,YAAY;AACxC,WAAO,KAAKS,OAAL,KAAiBlE,OAAO,CAACsK,MAAhC;AACH,GAFD;;AAGA9J,EAAAA,OAAO,CAAC1C,SAAR,CAAkBwP,UAAlB,GAA+B,YAAY;AACvC,WAAO,KAAKpJ,OAAZ;AACH,GAFD;;AAGA1D,EAAAA,OAAO,CAAC1C,SAAR,CAAkByP,gBAAlB,GAAqC,YAAY;AAC7C,QAAIvM,KAAK,GAAG,IAAZ,CAD6C,CAE7C;;;AACA,QAAIwM,UAAU,GAAG,UAAUrK,GAAV,EAAeD,MAAf,EAAuB;AACpC,UAAI,CAACC,GAAL,EAAU;AACN,eAAO,IAAP;AACH,OAHmC,CAGlC;;;AACF,UAAIsK,YAAY,GAAGtK,GAAG,CAACH,OAAJ,CAAY0K,wBAAZ,EAAnB,CAJoC,CAKpC;AACA;AACA;AACA;;AACA,UAAI,CAACD,YAAL,EAAmB;AACf,eAAO,KAAP;AACH,OAXmC,CAYpC;;;AACA,UAAI,CAACA,YAAY,CAACE,OAAlB,EAA2B;AACvB,eAAO,KAAP;AACH;;AACD,UAAIzG,MAAM,GAAGlG,KAAK,CAACmG,qBAAN,CAA4BhE,GAAG,CAACF,OAAhC,EAAyCC,MAAzC,CAAb;;AACA,UAAI0K,gBAAgB,GAAGH,YAAY,CAACE,OAAb,CAAqBzG,MAArB,CAAvB;AACA,aAAO0G,gBAAP;AACH,KAnBD;;AAoBA,QAAIC,gBAAgB,GAAGL,UAAU,CAAC,KAAK5J,YAAN,EAAoB,IAApB,CAAjC;AACA,QAAIkK,aAAa,GAAGN,UAAU,CAAC,KAAK3J,SAAN,EAAiB,IAAjB,CAA9B;AACA,QAAIkK,WAAW,GAAGP,UAAU,CAAC,KAAKlK,OAAN,EAAe3E,SAAS,CAAC0E,WAAzB,CAA5B;AACA,QAAI2K,YAAY,GAAGR,UAAU,CAAC,KAAKhK,QAAN,EAAgB7E,SAAS,CAAC4E,YAA1B,CAA7B;AACA,QAAI0K,yBAAyB,GAAGJ,gBAAgB,IAAIC,aAApB,IAAqCC,WAArC,IAAoDC,YAApF;AACA,WAAOC,yBAAP;AACH,GA7BD;;AA8BAzN,EAAAA,OAAO,CAAC1C,SAAR,CAAkB6E,YAAlB,GAAiC,YAAY;AACzC,SAAKuL,kBAAL,CAAwB,KAAKvN,OAA7B,EAAsC7B,OAAO,CAACqP,oBAA9C,EAAoE,KAAKvJ,kBAAL,CAAwBU,IAAxB,CAA6B,IAA7B,CAApE;AACA,SAAK4I,kBAAL,CAAwB,KAAKvN,OAA7B,EAAsC7B,OAAO,CAACsP,kBAA9C,EAAkE,KAAKlJ,aAAL,CAAmBI,IAAnB,CAAwB,IAAxB,CAAlE;AACA,SAAK4I,kBAAL,CAAwB,KAAKvN,OAA7B,EAAsC7B,OAAO,CAACuP,uBAA9C,EAAuE,KAAKC,iBAAL,CAAuBhJ,IAAvB,CAA4B,IAA5B,CAAvE;AACA,SAAK4I,kBAAL,CAAwB,KAAKvN,OAA7B,EAAsC7B,OAAO,CAACyP,iBAA9C,EAAiE,KAAKlJ,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAAjE;AACA,SAAK4I,kBAAL,CAAwB,KAAKvN,OAA7B,EAAsC7B,OAAO,CAAC0P,sBAA9C,EAAsE,KAAKC,iBAAL,CAAuBnJ,IAAvB,CAA4B,IAA5B,CAAtE;AACA,SAAK4I,kBAAL,CAAwB,KAAKvN,OAA7B,EAAsC7B,OAAO,CAAC4P,0BAA9C,EAA0E,KAAKD,iBAAL,CAAuBnJ,IAAvB,CAA4B,IAA5B,CAA1E;AACA,SAAK4I,kBAAL,CAAwB,KAAKvN,OAA7B,EAAsC7B,OAAO,CAAC6P,kBAA9C,EAAkE,KAAKC,oBAAL,CAA0BtJ,IAA1B,CAA+B,IAA/B,CAAlE;AACA,SAAK4I,kBAAL,CAAwB,KAAKvN,OAA7B,EAAsC7B,OAAO,CAAC+P,kBAA9C,EAAkE,KAAKC,oBAAL,CAA0BxJ,IAA1B,CAA+B,IAA/B,CAAlE;AACA,SAAK4I,kBAAL,CAAwB,KAAKvN,OAA7B,EAAsC7B,OAAO,CAACiQ,uBAA9C,EAAuE,KAAKC,yBAAL,CAA+B1J,IAA/B,CAAoC,IAApC,CAAvE;AACA,SAAK4I,kBAAL,CAAwB,KAAKvN,OAA7B,EAAsC7B,OAAO,CAACmQ,sBAA9C,EAAsE,KAAKC,wBAAL,CAA8B5J,IAA9B,CAAmC,IAAnC,CAAtE;AACA,SAAK4I,kBAAL,CAAwB,KAAKvN,OAA7B,EAAsC7B,OAAO,CAACqQ,sBAA9C,EAAsE,KAAKC,gBAAL,CAAsB9J,IAAtB,CAA2B,IAA3B,CAAtE;AACA,QAAI+J,YAAY,GAAG,KAAKzO,KAAL,CAAWyO,YAA9B;AACA,SAAKnB,kBAAL,CAAwBmB,YAAxB,EAAsCtQ,MAAM,CAACuQ,qCAA7C,EAAoF,KAAKC,8BAAL,CAAoCjK,IAApC,CAAyC,IAAzC,CAApF;AACA,SAAK4I,kBAAL,CAAwBmB,YAAxB,EAAsCtQ,MAAM,CAACyQ,0BAA7C,EAAyE,KAAKnK,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAAzE;AACA,SAAK4I,kBAAL,CAAwBmB,YAAxB,EAAsCtQ,MAAM,CAAC0Q,+BAA7C,EAA8E,KAAKC,yBAAL,CAA+BpK,IAA/B,CAAoC,IAApC,CAA9E;AACA,SAAK4I,kBAAL,CAAwBmB,YAAxB,EAAsCtQ,MAAM,CAAC4Q,6BAA7C,EAA4E,KAAKC,uBAAL,CAA6BtK,IAA7B,CAAkC,IAAlC,CAA5E;AACA,SAAK4I,kBAAL,CAAwBmB,YAAxB,EAAsCtQ,MAAM,CAAC8Q,kBAA7C,EAAiE,KAAKC,kBAAL,CAAwBxK,IAAxB,CAA6B,IAA7B,CAAjE;AACA,SAAK4I,kBAAL,CAAwBmB,YAAxB,EAAsCtQ,MAAM,CAACgR,wBAA7C,EAAuE,KAAKC,mBAAL,CAAyB1K,IAAzB,CAA8B,IAA9B,CAAvE;AACA,SAAK4I,kBAAL,CAAwBmB,YAAxB,EAAsCtQ,MAAM,CAACkR,mBAA7C,EAAkE,KAAKC,cAAL,CAAoB5K,IAApB,CAAyB,IAAzB,CAAlE;AACA,SAAK4I,kBAAL,CAAwBmB,YAAxB,EAAsCtQ,MAAM,CAACoR,kBAA7C,EAAiE,KAAKC,aAAL,CAAmB9K,IAAnB,CAAwB,IAAxB,CAAjE;AACA,SAAK+K,wBAAL;AACH,GAtBD;;AAuBA7P,EAAAA,OAAO,CAAC1C,SAAR,CAAkBsS,aAAlB,GAAkC,YAAY;AAC1C,SAAKjL,iBAAL;AACH,GAFD;;AAGA3E,EAAAA,OAAO,CAAC1C,SAAR,CAAkBuS,wBAAlB,GAA6C,YAAY;AACrD,QAAIrP,KAAK,GAAG,IAAZ;;AACA,SAAKkN,kBAAL,CAAwB,KAAKvN,OAA7B,EAAsC7B,OAAO,CAACuP,uBAA9C,EAAuE,YAAY;AAC/ErN,MAAAA,KAAK,CAACsP,eAAN,GAAwB9L,OAAxB,CAAgC,UAAUgE,QAAV,EAAoB;AAAE,eAAOA,QAAQ,CAAC8F,iBAAT,EAAP;AAAsC,OAA5F;AACH,KAFD;AAGA,SAAKJ,kBAAL,CAAwB,KAAKvN,OAA7B,EAAsC7B,OAAO,CAAC+P,kBAA9C,EAAkE,UAAU0B,KAAV,EAAiB;AAC/EvP,MAAAA,KAAK,CAACsP,eAAN,GAAwB9L,OAAxB,CAAgC,UAAUgE,QAAV,EAAoB;AAAE,eAAOA,QAAQ,CAACgI,aAAT,CAAuBD,KAAvB,CAAP;AAAuC,OAA7F;AACH,KAFD;AAGH,GARD;;AASA/P,EAAAA,OAAO,CAAC1C,SAAR,CAAkB8Q,oBAAlB,GAAyC,UAAU2B,KAAV,EAAiB;AACtD;AACA;AACA;AACA,SAAKD,eAAL,GAAuB9L,OAAvB,CAA+B,UAAUgE,QAAV,EAAoB;AAC/C,aAAOA,QAAQ,CAACiI,WAAT,CAAqB;AACxBC,QAAAA,aAAa,EAAE,CAACH,KAAK,CAACI,MADE;AAExBC,QAAAA,OAAO,EAAE,CAACL,KAAK,CAACI;AAFQ,OAArB,CAAP;AAIH,KALD,EAJsD,CAUtD;AACA;AACA;AACA;AACA;;AACA,SAAKzL,aAAL,GAfsD,CAgBtD;;AACA,SAAK2L,cAAL;AACH,GAlBD;;AAmBArQ,EAAAA,OAAO,CAAC1C,SAAR,CAAkBgR,oBAAlB,GAAyC,YAAY;AACjD;AACA,SAAK+B,cAAL;AACH,GAHD;;AAIArQ,EAAAA,OAAO,CAAC1C,SAAR,CAAkB+S,cAAlB,GAAmC,YAAY;AAC3C,SAAK9L,wBAAL;AACA,SAAK+L,iCAAL;AACA,SAAKC,wBAAL;AACA,SAAKC,sBAAL;AACH,GALD;;AAMAxQ,EAAAA,OAAO,CAAC1C,SAAR,CAAkBkR,yBAAlB,GAA8C,YAAY;AACtD,QAAIiC,WAAW,GAAG,KAAKtQ,OAAL,CAAasQ,WAA/B;AACA,SAAK/P,UAAL,CAAgBsD,OAAhB,CAAwB,UAAUrB,GAAV,EAAe;AACnC,UAAI+N,OAAO,GAAGD,WAAW,KAAKpS,oBAAoB,CAACsS,KAAnD;AACA,UAAIC,OAAO,GAAGH,WAAW,KAAKpS,oBAAoB,CAACwS,KAAnD;AACAlO,MAAAA,GAAG,CAACH,OAAJ,CAAY7D,mBAAZ,CAAgC,wBAAhC,EAA0D+R,OAA1D;AACA/N,MAAAA,GAAG,CAACH,OAAJ,CAAY7D,mBAAZ,CAAgC,wBAAhC,EAA0DiS,OAA1D;AACH,KALD;AAMH,GARD;;AASA5Q,EAAAA,OAAO,CAAC1C,SAAR,CAAkBoR,wBAAlB,GAA6C,YAAY;AACrD,SAAK8B,sBAAL;AACH,GAFD;;AAGAxQ,EAAAA,OAAO,CAAC1C,SAAR,CAAkBkT,sBAAlB,GAA2C,YAAY;AACnD,QAAIM,QAAQ,GAAG,KAAK3Q,OAAL,CAAa2Q,QAA5B;AACA,SAAKpQ,UAAL,CAAgBsD,OAAhB,CAAwB,UAAUrB,GAAV,EAAe;AAAE,aAAOA,GAAG,CAACH,OAAJ,CAAY7D,mBAAZ,CAAgC,iBAAhC,EAAmDmS,QAAnD,CAAP;AAAsE,KAA/G;AACH,GAHD;;AAIA9Q,EAAAA,OAAO,CAAC1C,SAAR,CAAkB2Q,iBAAlB,GAAsC,YAAY;AAC9C,QAAI8C,UAAU,GAAG,KAAK5Q,OAAL,CAAa6Q,YAAb,EAAjB;AACA,QAAIrL,QAAQ,GAAG,KAAKxF,OAAL,CAAawF,QAAb,IAAyB,IAAxC;AACA,SAAKjF,UAAL,CAAgBsD,OAAhB,CAAwB,UAAUrB,GAAV,EAAe;AACnCA,MAAAA,GAAG,CAACH,OAAJ,CAAY7D,mBAAZ,CAAgC,cAAhC,EAAgDoS,UAAhD;AACApO,MAAAA,GAAG,CAACH,OAAJ,CAAY7D,mBAAZ,CAAgC,uBAAhC,EAAyDoS,UAAU,IAAIpL,QAAvE;AACAhD,MAAAA,GAAG,CAACH,OAAJ,CAAY7D,mBAAZ,CAAgC,yBAAhC,EAA2DoS,UAAU,IAAI,CAACpL,QAA1E;AACAhD,MAAAA,GAAG,CAACH,OAAJ,CAAYkD,eAAZ,CAA4BqL,UAAU,IAAIpL,QAA1C;AACH,KALD;AAMH,GATD;;AAUA3F,EAAAA,OAAO,CAAC1C,SAAR,CAAkB4R,yBAAlB,GAA8C,YAAY;AACtD;AACA;AACA,SAAKvK,iBAAL,CAAuB,IAAvB;;AACA,QAAI,KAAKvE,KAAL,CAAWoJ,WAAX,CAAuByH,0BAAvB,EAAJ,EAAyD;AACrD,WAAK9Q,OAAL,CAAa+Q,gBAAb;AACH;AACJ,GAPD;;AAQAlR,EAAAA,OAAO,CAAC1C,SAAR,CAAkB8R,uBAAlB,GAA4C,YAAY;AACpD,SAAKzK,iBAAL;AACH,GAFD;;AAGA3E,EAAAA,OAAO,CAAC1C,SAAR,CAAkB6T,cAAlB,GAAmC,YAAY;AAC3C,WAAO;AACHtP,MAAAA,SAAS,EAAE,KAAK1B,OAAL,CAAa0B,SADrB;AAEHD,MAAAA,QAAQ,EAAE,KAAKzB,OAAL,CAAayB;AAFpB,KAAP;AAIH,GALD;;AAMA5B,EAAAA,OAAO,CAAC1C,SAAR,CAAkB8T,kBAAlB,GAAuC,UAAUC,aAAV,EAAyB;AAC5D,QAAIC,oBAAoB,GAAGrS,IAAI,CAAC,KAAKyB,UAAN,EAAkB,UAAU6Q,CAAV,EAAa;AAAE,aAAOA,CAAC,CAAC9O,OAAF,CAAU+O,QAAV,CAAmBH,aAAa,CAACI,MAAjC,CAAP;AAAkD,KAAnF,CAA/B;AACA,QAAIC,yBAAyB,GAAGJ,oBAAoB,GAAGA,oBAAoB,CAAC7O,OAAxB,GAAkC,IAAtF;AACA,QAAIkP,2BAA2B,GAAGD,yBAAyB,KAAKL,aAAa,CAACI,MAA9E;;AACA,QAAI,CAACE,2BAAL,EAAkC;AAC9B;AACH;;AACD,QAAInJ,IAAI,GAAG,KAAKrI,OAAhB;AACA,QAAIyR,eAAe,GAAG,KAAKxR,KAAL,CAAWsB,YAAX,CAAwBmQ,cAAxB,EAAtB;AACA,QAAIC,YAAY,GAAG;AACflQ,MAAAA,QAAQ,EAAE4G,IAAI,CAAC5G,QADA;AAEfC,MAAAA,SAAS,EAAE2G,IAAI,CAAC3G,SAFD;AAGfkG,MAAAA,MAAM,EAAG6J,eAAe,IAAIA,eAAe,CAAC7J;AAH7B,KAAnB;AAKA,SAAK3H,KAAL,CAAW2R,iBAAX,CAA6BC,kBAA7B,CAAgDX,aAAhD,EAA+DA,aAAa,CAACY,OAA7E,EAAsFH,YAAtF,EAAoG,IAApG;AACAT,IAAAA,aAAa,CAACa,cAAd;AACH,GAhBD;;AAiBAlS,EAAAA,OAAO,CAAC1C,SAAR,CAAkB6U,YAAlB,GAAiC,UAAUd,aAAV,EAAyB;AACtD,QAAIA,aAAa,CAACe,gBAAd,IAAkCtT,0BAA0B,CAACuS,aAAD,CAAhE,EAAiF;AAC7E;AACH;;AACD,QAAIC,oBAAoB,GAAGrS,IAAI,CAAC,KAAKyB,UAAN,EAAkB,UAAU6Q,CAAV,EAAa;AAAE,aAAOA,CAAC,CAAC9O,OAAF,CAAU+O,QAAV,CAAmBH,aAAa,CAACI,MAAjC,CAAP;AAAkD,KAAnF,CAA/B;AACA,QAAIC,yBAAyB,GAAGJ,oBAAoB,GAAGA,oBAAoB,CAAC7O,OAAxB,GAAkC,IAAtF;AACA,QAAIkP,2BAA2B,GAAGD,yBAAyB,KAAKL,aAAa,CAACI,MAA9E;AACA,QAAIY,MAAM,GAAG,IAAb;;AACA,QAAI,CAACV,2BAAL,EAAkC;AAC9BU,MAAAA,MAAM,GAAG,KAAKjS,KAAL,CAAWsB,YAAX,CAAwB4Q,wBAAxB,CAAiDZ,yBAAjD,EAA4E,KAA5E,EAAmFL,aAAa,CAACkB,QAAjG,CAAT;AACH;;AACD,QAAK,KAAKtP,WAAL,MAAsB0O,2BAAvB,IAAuD,CAACU,MAA5D,EAAoE;AAChE,WAAKjS,KAAL,CAAW2R,iBAAX,CAA6BI,YAA7B,CAA0C,IAA1C,EAAgDd,aAAhD;AACH;AACJ,GAdD;;AAeArR,EAAAA,OAAO,CAAC1C,SAAR,CAAkBkV,qBAAlB,GAA0C,UAAUzC,KAAV,EAAiB;AACvD,QAAIvH,IAAI,GAAG,KAAKrI,OAAhB;AACA,QAAIsS,SAAS,GAAG,KAAKxP,WAAL,MAAsB8M,KAAK,CAACnO,QAAN,KAAmB4G,IAAI,CAAC5G,QAA9C,IAA0DmO,KAAK,CAAClO,SAAN,IAAmB2G,IAAI,CAAC3G,SAAlG;AACA,QAAIY,OAAO,GAAG,KAAKW,YAAL,GAAoB,KAAKA,YAAL,CAAkBX,OAAtC,GAAgD,KAAKY,SAAL,CAAeZ,OAA7E;AACA9D,IAAAA,mBAAmB,CAAC8D,OAAD,EAAU,qBAAV,EAAiCgQ,SAAjC,CAAnB;;AACA,QAAIA,SAAJ,EAAe;AACX;AACA;AACAhQ,MAAAA,OAAO,CAACiQ,KAAR,CAAc;AAAEC,QAAAA,aAAa,EAAE;AAAjB,OAAd;AACH;AACJ,GAVD;;AAWA3S,EAAAA,OAAO,CAAC1C,SAAR,CAAkB2S,WAAlB,GAAgC,UAAUjI,QAAV,EAAoB;AAChD,SAAKpH,eAAL,GAAuB,KAAKgS,cAAL,CAAoB,KAAKhS,eAAzB,EAA0CoH,QAA1C,CAAvB;AACA,SAAKjH,aAAL,GAAqB,KAAK6R,cAAL,CAAoB,KAAK7R,aAAzB,EAAwCiH,QAAxC,CAArB;AACA,SAAKhH,cAAL,GAAsB,KAAK4R,cAAL,CAAoB,KAAK5R,cAAzB,EAAyCgH,QAAzC,CAAtB;AACA,SAAKrD,iBAAL;AACH,GALD;;AAMA3E,EAAAA,OAAO,CAAC1C,SAAR,CAAkBsV,cAAlB,GAAmC,UAAUxI,IAAV,EAAgByI,gBAAhB,EAAkC;AACjE,QAAIvI,GAAG,GAAG;AACNzJ,MAAAA,IAAI,EAAE,EADA;AAENC,MAAAA,GAAG,EAAE;AAFC,KAAV;AAIAsJ,IAAAA,IAAI,CAACvJ,IAAL,CAAUmD,OAAV,CAAkB,UAAUgE,QAAV,EAAoB;AAClC,UAAIA,QAAQ,KAAK6K,gBAAjB,EAAmC;AAC/B;AACH;;AACDvI,MAAAA,GAAG,CAACzJ,IAAJ,CAAS+B,IAAT,CAAcoF,QAAd;AACAsC,MAAAA,GAAG,CAACxJ,GAAJ,CAAQkH,QAAQ,CAAC1F,aAAT,EAAR,IAAoC0F,QAApC;AACH,KAND;AAOA,WAAOsC,GAAP;AACH,GAbD;;AAcAtK,EAAAA,OAAO,CAAC1C,SAAR,CAAkBwV,YAAlB,GAAiC,UAAUC,SAAV,EAAqBC,UAArB,EAAiC;AAC9D,YAAQD,SAAR;AACI,WAAK,UAAL;AACI,aAAKE,aAAL,CAAmBD,UAAnB;AACA;;AACJ,WAAK,OAAL;AACI,aAAKE,UAAL,CAAgBF,UAAhB;AACA;;AACJ,WAAK,YAAL;AACA,WAAK,WAAL;AACI,aAAKG,cAAL,CAAoBH,UAApB;AACA;AAVR;AAYH,GAbD;;AAcAhT,EAAAA,OAAO,CAAC1C,SAAR,CAAkB8V,cAAlB,GAAmC,UAAUC,IAAV,EAAgBC,QAAhB,EAA0B;AACzD,WAAO;AACHD,MAAAA,IAAI,EAAEA,IADH;AAEH7K,MAAAA,IAAI,EAAE,KAAKrI,OAFR;AAGHoT,MAAAA,IAAI,EAAE,KAAKpT,OAAL,CAAaoT,IAHhB;AAIH3R,MAAAA,QAAQ,EAAE,KAAKzB,OAAL,CAAayB,QAJpB;AAKHC,MAAAA,SAAS,EAAE,KAAK1B,OAAL,CAAa0B,SALrB;AAMHkH,MAAAA,OAAO,EAAE,KAAK3I,KAAL,CAAW8C,kBAAX,CAA8B8F,UAA9B,EANN;AAOHP,MAAAA,GAAG,EAAE,KAAKrI,KAAL,CAAW8C,kBAAX,CAA8BwF,MAA9B,EAPF;AAQHG,MAAAA,SAAS,EAAE,KAAKzI,KAAL,CAAW8C,kBAAX,CAA8B4F,YAA9B,EARR;AASHiH,MAAAA,KAAK,EAAEuD;AATJ,KAAP;AAWH,GAZD;;AAaAtT,EAAAA,OAAO,CAAC1C,SAAR,CAAkBkW,wBAAlB,GAA6C,UAAUH,IAAV,EAAgBC,QAAhB,EAA0B;AACnE,QAAIvD,KAAK,GAAG,KAAKqD,cAAL,CAAoBC,IAApB,EAA0BC,QAA1B,CAAZ,CADmE,CAEnE;AACA;AACA;AACA;AACA;AACA;;AACAvD,IAAAA,KAAK,CAAC0D,MAAN,GAAe,IAAf;AACA,WAAO1D,KAAP;AACH,GAVD;;AAWA/P,EAAAA,OAAO,CAAC1C,SAAR,CAAkB2V,aAAlB,GAAkC,UAAUD,UAAV,EAAsB;AACpD,QAAIlU,0BAA0B,CAACkU,UAAD,CAA9B,EAA4C;AACxC;AACH;;AACD,QAAIU,OAAO,GAAG,KAAKF,wBAAL,CAA8BjV,MAAM,CAACoV,wBAArC,EAA+DX,UAA/D,CAAd;AACA,SAAK5S,KAAL,CAAWyO,YAAX,CAAwB+E,aAAxB,CAAsCF,OAAtC;AACH,GAND;;AAOA1T,EAAAA,OAAO,CAAC1C,SAAR,CAAkB6V,cAAlB,GAAmC,UAAUH,UAAV,EAAsB;AACrD,SAAK/R,sBAAL,GAA8BrC,qBAAqB,CAACoU,UAAU,CAACvB,MAAZ,EAAoB,aAApB,EAAmC,CAAnC,CAAnD;;AACA,QAAI,CAAC,KAAKxO,WAAL,EAAL,EAAyB;AACrB;AACH;;AACD,QAAIuF,IAAI,GAAG,KAAKrI,OAAhB;AACA,QAAIqJ,WAAW,GAAG,KAAKpJ,KAAL,CAAWoJ,WAA7B;AACA,SAAKpJ,KAAL,CAAWsB,YAAX,CAAwBmS,cAAxB,CAAuCrL,IAAI,CAAC5G,QAA5C,EAAsD4H,WAAW,CAACwB,sBAAZ,GAAqC,CAArC,CAAtD,EAA+FxC,IAAI,CAAC3G,SAApG,EAA+G,IAA/G;AACH,GARD;;AASA7B,EAAAA,OAAO,CAAC1C,SAAR,CAAkB4V,UAAlB,GAA+B,UAAUF,UAAV,EAAsB;AACjD,QAAIc,IAAI,GAAGhV,0BAA0B,CAACkU,UAAD,CAA1B,IAA0C,KAAK/R,sBAA1D;;AACA,QAAI6S,IAAJ,EAAU;AACN;AACH;;AACD,QAAIJ,OAAO,GAAG,KAAKF,wBAAL,CAA8BjV,MAAM,CAACwV,iBAArC,EAAwDf,UAAxD,CAAd;AACA,SAAK5S,KAAL,CAAWyO,YAAX,CAAwB+E,aAAxB,CAAsCF,OAAtC,EANiD,CAOjD;;AACA,QAAIM,qBAAqB,GAAGhB,UAAU,CAACiB,OAAX,IAAsBjB,UAAU,CAACkB,OAA7D;AACA,QAAIC,eAAe,GAAGnB,UAAU,CAACT,QAAjC,CATiD,CAUjD;AACA;AACA;AACA;AACA;AACA;;AACA,QAAI6B,oBAAoB,GAAG,KAAKhU,KAAL,CAAW8C,kBAAX,CAA8BmR,sBAA9B,EAA3B;;AACA,SACA;AACA;AACCD,IAAAA,oBAAoB,IAAI,KAAKjU,OAAL,CAAasF,KAAtC,IACI;AACA;AACA,KAAC,KAAKtF,OAAL,CAAasE,UAHlB,IAII;AACA,SAAKtE,OAAL,CAAa0B,SALjB,IAMI;AACA,KAAC,KAAKzB,KAAL,CAAW8C,kBAAX,CAA8BsB,cAA9B,EAPL,IAQI;AACA,SAAKpE,KAAL,CAAW8C,kBAAX,CAA8BoR,2BAA9B,EAZJ,EAYiE;AAC7D;AACH;;AACD,QAAIC,kBAAkB,GAAG,KAAKnU,KAAL,CAAW8C,kBAAX,CAA8BsR,yBAA9B,EAAzB;AACA,QAAIC,sBAAsB,GAAG,CAAC,KAAKrU,KAAL,CAAW8C,kBAAX,CAA8BwR,wBAA9B,EAA9B;;AACA,QAAI,KAAKvU,OAAL,CAAawU,UAAb,EAAJ,EAA+B;AAC3B,UAAIJ,kBAAJ,EAAwB;AACpB,aAAKpU,OAAL,CAAayU,iBAAb,CAA+B;AAAEC,UAAAA,QAAQ,EAAE;AAAZ,SAA/B;AACH,OAFD,MAGK,IAAIb,qBAAJ,EAA2B;AAC5B,YAAIS,sBAAJ,EAA4B;AACxB,eAAKtU,OAAL,CAAayU,iBAAb,CAA+B;AAAEC,YAAAA,QAAQ,EAAE;AAAZ,WAA/B;AACH;AACJ,OAJI,MAKA;AACD;AACA,aAAK1U,OAAL,CAAayU,iBAAb,CAA+B;AAAEC,UAAAA,QAAQ,EAAE,CAACV,eAAb;AAA8BW,UAAAA,cAAc,EAAE,CAACX,eAA/C;AAAgEY,UAAAA,WAAW,EAAEZ;AAA7E,SAA/B;AACH;AACJ,KAbD,MAcK;AACD,UAAIW,cAAc,GAAGP,kBAAkB,GAAG,KAAH,GAAW,CAACP,qBAAnD;AACA,WAAK7T,OAAL,CAAayU,iBAAb,CAA+B;AAAEC,QAAAA,QAAQ,EAAE,IAAZ;AAAkBC,QAAAA,cAAc,EAAEA,cAAlC;AAAkDC,QAAAA,WAAW,EAAEZ;AAA/D,OAA/B;AACH;AACJ,GApDD;;AAqDAnU,EAAAA,OAAO,CAAC1C,SAAR,CAAkB0X,wBAAlB,GAA6C,UAAUC,UAAV,EAAsB;AAC/D,QAAIzU,KAAK,GAAG,IAAZ;;AACA,QAAI,CAAC,KAAKJ,KAAL,CAAW8C,kBAAX,CAA8BgS,qBAA9B,EAAL,EAA4D;AACxD;AACH;;AACD,QAAIC,gBAAgB,GAAG,YAAY;AAC/B,UAAIC,YAAY,GAAGH,UAAU,CAACG,YAA9B,CAD+B,CAE/B;AACA;AACA;AACA;;AACA,UAAIA,YAAY,IAAI,IAAhB,IAAwBA,YAAY,GAAG,CAA3C,EAA8C;AAC1C;AACA;AACA,YAAIC,mBAAmB,GAAG,YAAY;AAClC7U,UAAAA,KAAK,CAACL,OAAN,CAAcmV,YAAd,CAA2BF,YAA3B;;AACA,cAAI5U,KAAK,CAACJ,KAAN,CAAYmV,kBAAhB,EAAoC;AAChC/U,YAAAA,KAAK,CAACJ,KAAN,CAAYmV,kBAAZ,CAA+BnR,kBAA/B;AACH,WAFD,MAGK,IAAI5D,KAAK,CAACJ,KAAN,CAAYoV,kBAAhB,EAAoC;AACrChV,YAAAA,KAAK,CAACJ,KAAN,CAAYoV,kBAAZ,CAA+BpR,kBAA/B;AACH;AACJ,SARD;;AASA5D,QAAAA,KAAK,CAACJ,KAAN,CAAYqV,kBAAZ,CAA+BC,UAA/B,CAA0CL,mBAA1C,EAA+D,CAA/D;AACH;AACJ,KApBD;;AAqBA,QAAIM,yBAAyB,GAAG,KAAKvV,KAAL,CAAWwV,qBAAX,CAAiCC,aAAjC,CAA+CZ,UAA/C,EAA2DE,gBAA3D,CAAhC;AACA,SAAKlP,cAAL,CAAoB0P,yBAApB;AACAR,IAAAA,gBAAgB;AACnB,GA7BD;;AA8BAnV,EAAAA,OAAO,CAAC1C,SAAR,CAAkBqJ,qBAAlB,GAA0C,UAAU0B,IAAV,EAAgB3F,MAAhB,EAAwB;AAC9D,QAAIlC,KAAK,GAAG,IAAZ;;AACA,QAAIkG,MAAM,GAAG;AACToP,MAAAA,SAAS,EAAE,IADF;AAETvC,MAAAA,IAAI,EAAE,KAAKpT,OAAL,CAAaoT,IAFV;AAGT/K,MAAAA,IAAI,EAAE,KAAKrI,OAHF;AAIT4V,MAAAA,KAAK,EAAE,KAAK5V,OAAL,CAAa6V,GAJX;AAKTC,MAAAA,cAAc,EAAE,KAAK9V,OAAL,CAAa6V,GALpB;AAMTE,MAAAA,MAAM,EAAE,KAAKzO,KAAL,GAAa,KAAKA,KAAlB,GAA0B,KAAKvH,WAN9B;AAOTiW,MAAAA,QAAQ,EAAE,KAAK/V,KAAL,CAAW+V,QAPZ;AAQTvU,MAAAA,QAAQ,EAAE,KAAKzB,OAAL,CAAayB,QARd;AAST6G,MAAAA,GAAG,EAAE,KAAKrI,KAAL,CAAW8C,kBAAX,CAA8BwF,MAA9B,EATI;AAUTG,MAAAA,SAAS,EAAE,KAAKzI,KAAL,CAAW8C,kBAAX,CAA8B4F,YAA9B,EAVF;AAWTC,MAAAA,OAAO,EAAE,KAAK3I,KAAL,CAAW8C,kBAAX,CAA8B8F,UAA9B,EAXA;AAYT;AACAoN,MAAAA,SAAS,EAAE/N,IAbF;AAcTgO,MAAAA,cAAc,EAAEhO,IAdP;AAeT3F,MAAAA,MAAM,EAAEA,MAfC;AAgBTiG,MAAAA,sBAAsB,EAAE,KAAKC,gBAAL,CAAsB9D,IAAtB,CAA2B,IAA3B,CAhBf;AAiBTwR,MAAAA,kBAAkB,EAAE,UAAUC,iBAAV,EAA6BC,eAA7B,EAA8CT,KAA9C,EAAqD;AAAE,eAAOvV,KAAK,CAACiW,uBAAN,CAA8BF,iBAA9B,EAAiDC,eAAjD,EAAkET,KAAlE,CAAP;AAAkF;AAjBpJ,KAAb;AAmBA,WAAOrP,MAAP;AACH,GAtBD;;AAuBA1G,EAAAA,OAAO,CAAC1C,SAAR,CAAkBmZ,uBAAlB,GAA4C,UAAUF,iBAAV,EAA6BC,eAA7B,EAA8CT,KAA9C,EAAqD;AAC7F,QAAIA,KAAK,KAAK,KAAK,CAAnB,EAAsB;AAAEA,MAAAA,KAAK,GAAG,EAAR;AAAa;;AACrC,QAAI,CAAC,KAAK9S,WAAL,EAAL,EAAyB;AACrB;AACH;;AACD,QAAIyT,WAAW,GAAG,IAAInX,WAAJ,CAAgB,YAAY;AAAE,aAAOwW,KAAP;AAAe,KAA7C,EAA+C,KAAK5V,OAApD,EAA6D4D,SAA7D,EAAwEwS,iBAAxE,EAA2FC,eAA3F,CAAlB;AACA,SAAKG,iBAAL,CAAuBD,WAAvB,EAAoC,KAAKtW,KAAL,CAAW2I,OAA/C;AACH,GAPD;;AAQA/I,EAAAA,OAAO,CAAC1C,SAAR,CAAkBsR,gBAAlB,GAAqC,YAAY;AAC7C,QAAIgI,QAAQ,GAAG,KAAKxW,KAAL,CAAW4B,qBAAX,CAAiCC,iBAAjC,CAAmD,KAAK9B,OAAxD,CAAf;;AACA,QAAI,KAAK4B,QAAL,IAAiB6U,QAArB,EAA+B;AAC3B,UAAIC,YAAY,GAAG,kBAAkBD,QAArC;AACA,UAAIE,eAAe,GAAG,kBAAkB,KAAK/U,QAA7C;AACA,WAAKrB,UAAL,CAAgBsD,OAAhB,CAAwB,UAAUrB,GAAV,EAAe;AACnCA,QAAAA,GAAG,CAACH,OAAJ,CAAY7D,mBAAZ,CAAgCkY,YAAhC,EAA8C,IAA9C;AACAlU,QAAAA,GAAG,CAACH,OAAJ,CAAY7D,mBAAZ,CAAgCmY,eAAhC,EAAiD,KAAjD;AACH,OAHD;AAIH;;AACD,SAAK/U,QAAL,GAAgB6U,QAAhB;AACH,GAXD;;AAYA5W,EAAAA,OAAO,CAAC1C,SAAR,CAAkByZ,gBAAlB,GAAqC,YAAY;AAC7C,WAAO,KAAK5W,OAAL,CAAayB,QAAb,KAA0B,KAAKxB,KAAL,CAAWgB,eAAX,CAA2B4V,eAA3B,EAAjC;AACH,GAFD;;AAGAhX,EAAAA,OAAO,CAAC1C,SAAR,CAAkB2Z,eAAlB,GAAoC,YAAY;AAC5C,WAAO,KAAK9W,OAAL,CAAayB,QAAb,KAA0B,KAAKxB,KAAL,CAAWgB,eAAX,CAA2B8V,cAA3B,EAAjC;AACH,GAFD;;AAGAlX,EAAAA,OAAO,CAAC1C,SAAR,CAAkBoS,cAAlB,GAAmC,YAAY;AAC3C,QAAIyH,QAAQ,GAAG,KAAKJ,gBAAL,EAAf;AACA,QAAIK,OAAO,GAAG,KAAKH,eAAL,EAAd;;AACA,QAAI,KAAKI,cAAL,KAAwBF,QAA5B,EAAsC;AAClC,WAAKE,cAAL,GAAsBF,QAAtB;AACA,WAAKzW,UAAL,CAAgBsD,OAAhB,CAAwB,UAAUrB,GAAV,EAAe;AAAE,eAAOA,GAAG,CAACH,OAAJ,CAAY7D,mBAAZ,CAAgC,cAAhC,EAAgDwY,QAAhD,CAAP;AAAmE,OAA5G;AACH;;AACD,QAAI,KAAKG,aAAL,KAAuBF,OAA3B,EAAoC;AAChC,WAAKE,aAAL,GAAqBF,OAArB;AACA,WAAK1W,UAAL,CAAgBsD,OAAhB,CAAwB,UAAUrB,GAAV,EAAe;AAAE,eAAOA,GAAG,CAACH,OAAJ,CAAY7D,mBAAZ,CAAgC,aAAhC,EAA+CyY,OAA/C,CAAP;AAAiE,OAA1G;AACH;AACJ,GAXD;;AAYApX,EAAAA,OAAO,CAAC1C,SAAR,CAAkBuP,WAAlB,GAAgC,UAAUD,MAAV,EAAkB;AAC9C,QAAIA,MAAM,KAAK,KAAK,CAApB,EAAuB;AAAEA,MAAAA,MAAM,GAAG,KAAT;AAAiB;;AAC1C,SAAKkD,eAAL,GAAuB9L,OAAvB,CAA+B,UAAUgE,QAAV,EAAoB;AAAE,aAAOA,QAAQ,CAAC6E,WAAT,CAAqBD,MAArB,CAAP;AAAsC,KAA3F;;AACA,QAAI,CAAC,KAAKF,UAAV,EAAsB;AAClB;AACH;;AACD,QAAI,CAACE,MAAL,EAAa;AACT,UAAI2K,OAAO,GAAG,KAAKnE,cAAL,CAAoB7U,MAAM,CAACiZ,uBAA3B,CAAd;AACA,WAAKpX,KAAL,CAAWyO,YAAX,CAAwB+E,aAAxB,CAAsC2D,OAAtC;AACH;;AACD,SAAKE,aAAL,CAAmB,KAAnB;AACH,GAXD;;AAYAzX,EAAAA,OAAO,CAAC1C,SAAR,CAAkBoa,mBAAlB,GAAwC,UAAU5L,OAAV,EAAmB;AACvD,SAAKpL,UAAL,CAAgBsD,OAAhB,CAAwB,UAAUrB,GAAV,EAAe;AACnCA,MAAAA,GAAG,CAACH,OAAJ,CAAY7D,mBAAZ,CAAgC,uBAAhC,EAAyDmN,OAAzD;AACAnJ,MAAAA,GAAG,CAACH,OAAJ,CAAY7D,mBAAZ,CAAgC,2BAAhC,EAA6D,CAACmN,OAA9D;AACH,KAHD;AAIH,GALD;;AAMA9L,EAAAA,OAAO,CAAC1C,SAAR,CAAkBma,aAAlB,GAAkC,UAAU1B,KAAV,EAAiB;AAC/C,SAAKrJ,UAAL,GAAkBqJ,KAAlB;AACA,SAAKrV,UAAL,CAAgBsD,OAAhB,CAAwB,UAAUrB,GAAV,EAAe;AAAE,aAAOA,GAAG,CAACH,OAAJ,CAAY7D,mBAAZ,CAAgC,gBAAhC,EAAkDoX,KAAlD,CAAP;AAAkE,KAA3G;AACA,QAAIhG,KAAK,GAAGgG,KAAK,GACb,KAAK3C,cAAL,CAAoB7U,MAAM,CAACoZ,yBAA3B,CADa,GAEX,KAAKvE,cAAL,CAAoB7U,MAAM,CAACqZ,yBAA3B,CAFN;AAGA,SAAKxX,KAAL,CAAWyO,YAAX,CAAwB+E,aAAxB,CAAsC7D,KAAtC;AACH,GAPD;;AAQA/P,EAAAA,OAAO,CAAC1C,SAAR,CAAkBua,eAAlB,GAAoC,UAAUC,QAAV,EAAoBC,SAApB,EAA+BC,kBAA/B,EAAmD;AACnF,QAAIF,QAAQ,KAAK,KAAK,CAAtB,EAAyB;AAAEA,MAAAA,QAAQ,GAAG,IAAX;AAAkB;;AAC7C,QAAIC,SAAS,KAAK,KAAK,CAAvB,EAA0B;AAAEA,MAAAA,SAAS,GAAG,IAAZ;AAAmB;;AAC/C,QAAIC,kBAAkB,KAAK,KAAK,CAAhC,EAAmC;AAAEA,MAAAA,kBAAkB,GAAG,IAArB;AAA4B,KAHkB,CAInF;;;AACA,QAAI,KAAKtL,UAAT,EAAqB;AACjB;AACH;;AACD,SAAKoD,eAAL,GAAuB9L,OAAvB,CAA+B,UAAUgE,QAAV,EAAoB;AAC/C,UAAIiQ,eAAe,GAAGjQ,QAAQ,KAAKgQ,kBAAnC;;AACA,UAAIC,eAAJ,EAAqB;AACjBjQ,QAAAA,QAAQ,CAACkQ,YAAT,CAAsBJ,QAAtB,EAAgCC,SAAhC,EAA2CE,eAA3C;AACH,OAFD,MAGK;AACDjQ,QAAAA,QAAQ,CAACkQ,YAAT,CAAsB,IAAtB,EAA4B,IAA5B,EAAkCD,eAAlC;AACH;AACJ,KARD;AASA,SAAKR,aAAL,CAAmB,IAAnB;AACH,GAlBD;;AAmBAzX,EAAAA,OAAO,CAAC1C,SAAR,CAAkBwS,eAAlB,GAAoC,YAAY;AAC5C,QAAIxF,GAAG,GAAG9M,cAAc,CAAC,KAAKoD,eAAL,CAAqBC,IAAtB,EAA4B,KAAKE,aAAL,CAAmBF,IAA/C,EAAqD,KAAKG,cAAL,CAAoBH,IAAzE,CAAxB;;AACA,WAAOyJ,GAAP;AACH,GAHD;;AAIAtK,EAAAA,OAAO,CAAC1C,SAAR,CAAkBgT,iCAAlB,GAAsD,YAAY;AAC9D,QAAI9P,KAAK,GAAG,IAAZ;;AACA,QAAI2X,UAAU,GAAG,KAAK/X,KAAL,CAAW4B,qBAAX,CAAiCoW,6BAAjC,CAA+D,KAAKjY,OAApE,EAA6E,KAAKsH,KAAlF,CAAjB;;AACA,QAAI,CAAC0Q,UAAD,IAAe,CAACA,UAAU,CAACta,MAA/B,EAAuC;AACnC;AACH;;AACDsa,IAAAA,UAAU,CAACnU,OAAX,CAAmB,UAAUqU,QAAV,EAAoB;AACnC7X,MAAAA,KAAK,CAACE,UAAN,CAAiBsD,OAAjB,CAAyB,UAAUuN,CAAV,EAAa;AAAE,eAAOA,CAAC,CAAC/O,OAAF,CAAU7D,mBAAV,CAA8B0Z,QAA9B,EAAwC,IAAxC,CAAP;AAAuD,OAA/F;AACH,KAFD;AAGH,GATD;;AAUArY,EAAAA,OAAO,CAAC1C,SAAR,CAAkBiT,wBAAlB,GAA6C,YAAY;AACrD,QAAI/P,KAAK,GAAG,IAAZ;;AACA,SAAKJ,KAAL,CAAW4B,qBAAX,CAAiCsW,oBAAjC,CAAsD,KAAKnY,OAA3D,EAAoE,KAAKsH,KAAzE,EAAgF,UAAU8Q,SAAV,EAAqB;AACjG/X,MAAAA,KAAK,CAACE,UAAN,CAAiBsD,OAAjB,CAAyB,UAAUrB,GAAV,EAAe;AAAE,eAAOA,GAAG,CAACH,OAAJ,CAAY7D,mBAAZ,CAAgC4Z,SAAhC,EAA2C,IAA3C,CAAP;AAA0D,OAApG;AACH,KAFD,EAEG,UAAUA,SAAV,EAAqB;AACpB/X,MAAAA,KAAK,CAACE,UAAN,CAAiBsD,OAAjB,CAAyB,UAAUrB,GAAV,EAAe;AAAE,eAAOA,GAAG,CAACH,OAAJ,CAAY7D,mBAAZ,CAAgC4Z,SAAhC,EAA2C,KAA3C,CAAP;AAA2D,OAArG;AACH,KAJD;AAKH,GAPD;;AAQAvY,EAAAA,OAAO,CAAC1C,SAAR,CAAkBiH,wBAAlB,GAA6C,YAAY;AACrD,QAAIiU,SAAS,GAAG,KAAKC,4BAAL,EAAhB;AACA,SAAK/X,UAAL,CAAgBsD,OAAhB,CAAwB,UAAUrB,GAAV,EAAe;AAAE,aAAOA,GAAG,CAACH,OAAJ,CAAYkW,aAAZ,CAA0BF,SAA1B,CAAP;AAA8C,KAAvF;AACH,GAHD;;AAIAxY,EAAAA,OAAO,CAAC1C,SAAR,CAAkB2H,iBAAlB,GAAsC,YAAY;AAC9C,QAAI0T,sBAAsB,GAAG,KAAKvY,KAAL,CAAW8C,kBAAX,CAA8B0V,yBAA9B,EAA7B;;AACA,QAAI,OAAOD,sBAAP,KAAkC,UAAtC,EAAkD;AAC9C;AACH;;AACD,WAAOA,sBAAsB,CAAC,KAAKxY,OAAN,CAA7B;AACH,GAND;;AAOAH,EAAAA,OAAO,CAAC1C,SAAR,CAAkBiI,oBAAlB,GAAyC,UAAU7C,MAAV,EAAkB;AACvD,QAAIgE,MAAM,GAAG;AACTvG,MAAAA,OAAO,EAAE,KAAKA,OADL;AAETsB,MAAAA,UAAU,EAAE,KAAKA,UAFR;AAGTsD,MAAAA,SAAS,EAAE,KAAKA,SAHP;AAIT8T,MAAAA,SAAS,EAAE,KAAK1Y,OAAL,CAAayB,QAAb,GAAwB,CAAxB,KAA8B,CAJhC;AAKTG,MAAAA,QAAQ,EAAE,KAAKA,QALN;AAMT+W,MAAAA,YAAY,EAAE,KAAK7V,WAAL,EANL;AAOToU,MAAAA,cAAc,EAAE,KAAKN,gBAAL,EAPP;AAQTO,MAAAA,aAAa,EAAE,KAAKL,eAAL,EARN;AAST1W,MAAAA,WAAW,EAAE,KAAKA,WATT;AAUTwQ,MAAAA,UAAU,EAAE,KAAK5Q,OAAL,CAAa6Q,YAAb,EAVH;AAWTvJ,MAAAA,KAAK,EAAE,KAAKA,KAXH;AAYT/E,MAAAA,MAAM,EAAEA;AAZC,KAAb;AAcA,WAAO,KAAKtC,KAAL,CAAW4B,qBAAX,CAAiCuD,oBAAjC,CAAsDmB,MAAtD,CAAP;AACH,GAhBD;;AAiBA1G,EAAAA,OAAO,CAAC1C,SAAR,CAAkBmb,4BAAlB,GAAiD,YAAY;AACzD;AACA,QAAIM,QAAQ,GAAG,KAAK3Y,KAAL,CAAW8C,kBAAX,CAA8B8V,WAA9B,EAAf;;AACA,QAAID,QAAQ,IAAI,OAAOA,QAAP,KAAoB,UAApC,EAAgD;AAC5C1R,MAAAA,OAAO,CAACC,IAAR,CAAa,yGAAb;AACA;AACH,KANwD,CAOzD;;;AACA,QAAI2R,YAAY,GAAG,KAAK7Y,KAAL,CAAW8C,kBAAX,CAA8BgW,eAA9B,EAAnB;AACA,QAAIC,kBAAJ;;AACA,QAAIF,YAAJ,EAAkB;AACd,UAAIvS,MAAM,GAAG;AACT6M,QAAAA,IAAI,EAAE,KAAKpT,OAAL,CAAaoT,IADV;AAET/K,QAAAA,IAAI,EAAE,KAAKrI,OAFF;AAGTyB,QAAAA,QAAQ,EAAE,KAAKzB,OAAL,CAAayB,QAHd;AAITsU,QAAAA,MAAM,EAAE,KAAKzO,KAJJ;AAKTgB,QAAAA,GAAG,EAAE,KAAKrI,KAAL,CAAW8C,kBAAX,CAA8BwF,MAA9B,EALI;AAMTG,QAAAA,SAAS,EAAE,KAAKzI,KAAL,CAAW8C,kBAAX,CAA8B4F,YAA9B,EANF;AAOTC,QAAAA,OAAO,EAAE,KAAK3I,KAAL,CAAW8C,kBAAX,CAA8B8F,UAA9B;AAPA,OAAb;AASAmQ,MAAAA,kBAAkB,GAAGF,YAAY,CAACvS,MAAD,CAAjC;AACH;;AACD,WAAOvH,MAAM,CAAC,EAAD,EAAK4Z,QAAL,EAAeI,kBAAf,CAAb;AACH,GAvBD;;AAwBAnZ,EAAAA,OAAO,CAAC1C,SAAR,CAAkBoH,aAAlB,GAAkC,YAAY;AAC1C,QAAIlE,KAAK,GAAG,IAAZ;;AACA,QAAI4Y,QAAQ,GAAG,KAAKjZ,OAAL,CAAawU,UAAb,EAAf;AACA,SAAKjU,UAAL,CAAgBsD,OAAhB,CAAwB,UAAUrB,GAAV,EAAe;AACnCA,MAAAA,GAAG,CAACH,OAAJ,CAAY6W,eAAZ,CAA4BD,QAAQ,GAAG,IAAH,GAAUrV,SAA9C;AACApB,MAAAA,GAAG,CAACH,OAAJ,CAAY7D,mBAAZ,CAAgC,iBAAhC,EAAmDya,QAAnD;AACAzW,MAAAA,GAAG,CAACH,OAAJ,CAAY8W,YAAZ,CAAyB9Y,KAAK,CAAC+Y,eAAN,EAAzB;AACH,KAJD;AAKH,GARD;;AASAvZ,EAAAA,OAAO,CAAC1C,SAAR,CAAkBic,eAAlB,GAAoC,YAAY;AAC5C,QAAIH,QAAQ,GAAG,KAAKjZ,OAAL,CAAawU,UAAb,EAAf;;AACA,QAAIyE,QAAQ,IAAI,KAAKhZ,KAAL,CAAW8C,kBAAX,CAA8BwR,wBAA9B,EAAhB,EAA0E;AACtE,aAAO3Q,SAAP;AACH;;AACD,QAAIyV,SAAS,GAAG,KAAKpZ,KAAL,CAAW8C,kBAAX,CAA8BuW,iBAA9B,EAAhB;AACA,QAAIC,KAAK,GAAGF,SAAS,CAACJ,QAAQ,GAAG,iBAAH,GAAuB,eAAhC,EAAiD,qBAAqBA,QAAQ,GAAG,UAAH,GAAgB,QAA7C,IAAyD,YAA1G,CAArB;AACA,WAAOM,KAAP;AACH,GARD;;AASA1Z,EAAAA,OAAO,CAAC1C,SAAR,CAAkBqc,4BAAlB,GAAiD,YAAY;AACzD,WAAO,KAAKrZ,0BAAZ;AACH,GAFD;;AAGAN,EAAAA,OAAO,CAAC1C,SAAR,CAAkB8I,qBAAlB,GAA0C,UAAUiC,IAAV,EAAgB;AACtD,QAAI7H,KAAK,GAAG,IAAZ,CADsD,CAEtD;AACA;;;AACA,QAAI,CAAC,KAAKG,MAAV,EAAkB;AACd;AACH,KANqD,CAOtD;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAAK+M,kBAAL,CAAwBrF,IAAxB,EAA8B,YAA9B,EAA4C,YAAY;AAAE,aAAO7H,KAAK,CAACL,OAAN,CAAcyZ,YAAd,EAAP;AAAsC,KAAhG;AACA,SAAKlM,kBAAL,CAAwBrF,IAAxB,EAA8B,YAA9B,EAA4C,YAAY;AAAE,aAAO7H,KAAK,CAACL,OAAN,CAAc0Z,YAAd,EAAP;AAAsC,KAAhG,EAfsD,CAgBtD;;AACA,SAAKnM,kBAAL,CAAwB,KAAKvN,OAA7B,EAAsC7B,OAAO,CAACwb,iBAA9C,EAAiE,YAAY;AACzE;AACA;AACA;AACA,UAAI,CAACtZ,KAAK,CAACJ,KAAN,CAAY8C,kBAAZ,CAA+B6W,2BAA/B,EAAL,EAAmE;AAC/Drb,QAAAA,WAAW,CAAC2J,IAAD,EAAO,cAAP,CAAX;AACH;AACJ,KAPD;AAQA,SAAKqF,kBAAL,CAAwB,KAAKvN,OAA7B,EAAsC7B,OAAO,CAAC0b,iBAA9C,EAAiE,YAAY;AACzEnb,MAAAA,cAAc,CAACwJ,IAAD,EAAO,cAAP,CAAd;AACH,KAFD;AAGH,GA5BD,CAv2B2C,CAo4B3C;AACA;AACA;AACA;;;AACArI,EAAAA,OAAO,CAAC1C,SAAR,CAAkB2c,mBAAlB,GAAwC,UAAUC,MAAV,EAAkB;AACtD,QAAIC,WAAW,GAAG,KAAK/Z,KAAL,CAAWga,YAAX,CAAwBC,eAAxB,EAAlB;AACA,QAAIC,KAAK,GAAGH,WAAW,CAACI,gBAAZ,GAA+BC,kBAA/B,EAAZ;AACA,QAAIC,QAAQ,GAAG,KAAKC,qBAAL,CAA2BJ,KAAK,CAACK,GAAjC,EAAsC,IAAtC,IAA8C,GAA7D;AACA,QAAIC,QAAQ,GAAG,KAAKF,qBAAL,CAA2BJ,KAAK,CAACO,MAAjC,EAAyC,IAAzC,IAAiD,GAAhE;AACA,WAAOC,IAAI,CAACC,GAAL,CAASD,IAAI,CAACE,GAAL,CAASP,QAAT,EAAmBP,MAAnB,CAAT,EAAqCU,QAArC,CAAP;AACH,GAND;;AAOA5a,EAAAA,OAAO,CAAC1C,SAAR,CAAkB2d,qBAAlB,GAA0C,YAAY;AAClD,WAAO,KAAK7a,KAAL,CAAWqV,kBAAlB;AACH,GAFD;;AAGAzV,EAAAA,OAAO,CAAC1C,SAAR,CAAkB8G,kBAAlB,GAAuC,YAAY;AAC/C;AACA;AACA;AACA,QAAIpF,MAAM,CAAC,KAAKmB,OAAL,CAAa+a,SAAd,CAAV,EAAoC;AAChC,UAAIC,UAAU,GAAG,KAAKhb,OAAL,CAAa+a,SAAb,GAAyB,IAA1C;AACA,WAAKxa,UAAL,CAAgBsD,OAAhB,CAAwB,UAAUrB,GAAV,EAAe;AAAE,eAAOA,GAAG,CAACH,OAAJ,CAAY4Y,SAAZ,CAAsBD,UAAtB,CAAP;AAA2C,OAApF;AACH;AACJ,GARD;;AASAnb,EAAAA,OAAO,CAAC1C,SAAR,CAAkBsL,gBAAlB,GAAqC,UAAUyS,SAAV,EAAqBC,QAArB,EAA+B;AAChE,QAAID,SAAS,KAAK,oBAAd,IAAsCA,SAAS,KAAK,YAAxD,EAAsE;AAClEA,MAAAA,SAAS,GAAG9c,MAAM,CAACgd,yBAAnB;AACAlU,MAAAA,OAAO,CAACC,IAAR,CAAa,uEAAuE/I,MAAM,CAACgd,yBAA3F;AACH;;AACDtb,IAAAA,MAAM,CAAC3C,SAAP,CAAiBsL,gBAAjB,CAAkCnI,IAAlC,CAAuC,IAAvC,EAA6C4a,SAA7C,EAAwDC,QAAxD;AACH,GAND;;AAOAtb,EAAAA,OAAO,CAAC1C,SAAR,CAAkBke,mBAAlB,GAAwC,UAAUH,SAAV,EAAqBC,QAArB,EAA+B;AACnE,QAAID,SAAS,KAAK,oBAAd,IAAsCA,SAAS,KAAK,YAAxD,EAAsE;AAClEA,MAAAA,SAAS,GAAG9c,MAAM,CAACgd,yBAAnB;AACAlU,MAAAA,OAAO,CAACC,IAAR,CAAa,sFAAsF/I,MAAM,CAACgd,yBAA1G;AACH;;AACDtb,IAAAA,MAAM,CAAC3C,SAAP,CAAiBke,mBAAjB,CAAqC/a,IAArC,CAA0C,IAA1C,EAAgD4a,SAAhD,EAA2DC,QAA3D;AACH,GAND,CAl6B2C,CAy6B3C;;;AACAtb,EAAAA,OAAO,CAAC1C,SAAR,CAAkBme,gBAAlB,GAAqC,YAAY;AAC7C,SAAK9a,MAAL,GAAc,KAAd,CAD6C,CAE7C;AACA;;AACA,SAAK+a,oBAAL;AACA,QAAI3L,KAAK,GAAG,KAAKqD,cAAL,CAAoB7U,MAAM,CAACgd,yBAA3B,CAAZ;AACA,SAAK3H,aAAL,CAAmB7D,KAAnB;AACA,SAAK3P,KAAL,CAAWyO,YAAX,CAAwB+E,aAAxB,CAAsC7D,KAAtC;;AACA9P,IAAAA,MAAM,CAAC3C,SAAP,CAAiByN,OAAjB,CAAyBtK,IAAzB,CAA8B,IAA9B;AACH,GATD;;AAUAT,EAAAA,OAAO,CAAC1C,SAAR,CAAkBoe,oBAAlB,GAAyC,YAAY;AACjD,QAAIC,gCAAgC,GAAG,KAAKxb,OAAL,CAAa+Z,MAAb,IAAuB,IAA9D;;AACA,QAAIyB,gCAAJ,EAAsC;AAClC;AACA;AACA;AACA;AACA,UAAIzB,MAAM,GAAG,KAAKD,mBAAL,CAAyB,KAAK9Z,OAAL,CAAa+Z,MAAtC,CAAb;AACA,WAAK0B,SAAL,CAAe1B,MAAf;AACH,KAPD,MAQK;AACD,WAAKxZ,UAAL,CAAgBsD,OAAhB,CAAwB,UAAUrB,GAAV,EAAe;AAAE,eAAOA,GAAG,CAACH,OAAJ,CAAY7D,mBAAZ,CAAgC,iBAAhC,EAAmD,IAAnD,CAAP;AAAkE,OAA3G;AACH;AACJ,GAbD;;AAcAqB,EAAAA,OAAO,CAAC1C,SAAR,CAAkBue,iBAAlB,GAAsC,YAAY;AAC9C,SAAKnb,UAAL,CAAgB7C,MAAhB,GAAyB,CAAzB;;AACA,QAAIie,gBAAgB,GAAG,UAAUC,KAAV,EAAiB;AACpCA,MAAAA,KAAK,CAAClb,IAAN,CAAWmD,OAAX,CAAmB,UAAUuN,CAAV,EAAa;AAAE,eAAOA,CAAC,CAACxG,OAAF,EAAP;AAAqB,OAAvD;AACA,aAAO;AAAElK,QAAAA,IAAI,EAAE,EAAR;AAAYC,QAAAA,GAAG,EAAE;AAAjB,OAAP;AACH,KAHD;;AAIA,SAAKF,eAAL,GAAuBkb,gBAAgB,CAAC,KAAKlb,eAAN,CAAvC;AACA,SAAKG,aAAL,GAAqB+a,gBAAgB,CAAC,KAAK/a,aAAN,CAArC;AACA,SAAKC,cAAL,GAAsB8a,gBAAgB,CAAC,KAAK9a,cAAN,CAAtC;AACH,GATD;;AAUAhB,EAAAA,OAAO,CAAC1C,SAAR,CAAkBgH,iBAAlB,GAAsC,YAAY;AAC9C,QAAI9D,KAAK,GAAG,IAAZ;;AACA,SAAKE,UAAL,CAAgBsD,OAAhB,CAAwB,UAAUrB,GAAV,EAAe;AACnCA,MAAAA,GAAG,CAACH,OAAJ,CAAY7D,mBAAZ,CAAgC,cAAhC,EAAgD6B,KAAK,CAACiB,UAAtD;AACAkB,MAAAA,GAAG,CAACH,OAAJ,CAAY7D,mBAAZ,CAAgC,iBAAhC,EAAmD,CAAC6B,KAAK,CAACiB,UAA1D;AACH,KAHD;AAIH,GAND;;AAOAzB,EAAAA,OAAO,CAAC1C,SAAR,CAAkBgS,kBAAlB,GAAuC,YAAY;AAC/C,QAAI7N,UAAU,GAAG,KAAKrB,KAAL,CAAWsB,YAAX,CAAwBC,YAAxB,CAAqC,KAAKxB,OAAL,CAAayB,QAAlD,EAA4D,KAAKzB,OAAL,CAAa0B,SAAzE,CAAjB;;AACA,QAAIJ,UAAU,KAAK,KAAKA,UAAxB,EAAoC;AAChC,WAAKA,UAAL,GAAkBA,UAAlB;AACA,WAAK6C,iBAAL;AACH,KAL8C,CAM/C;;;AACA,QAAI,CAAC7C,UAAD,IAAe,KAAKiL,UAAxB,EAAoC;AAChC,WAAKG,WAAL,CAAiB,KAAjB;AACH;AACJ,GAVD;;AAWA7M,EAAAA,OAAO,CAAC1C,SAAR,CAAkBkS,mBAAlB,GAAwC,YAAY;AAChD,QAAIwM,WAAW,GAAG,KAAK5b,KAAL,CAAWgB,eAAX,CAA2BC,cAA3B,EAAlB,CADgD,CAEhD;AACA;;AACA,QAAI,KAAKF,cAAL,KAAwB6a,WAA5B,EAAyC;AACrC,WAAK7a,cAAL,GAAsB6a,WAAtB;AACA,WAAKnX,YAAL;AACH;AACJ,GARD;;AASA7E,EAAAA,OAAO,CAAC1C,SAAR,CAAkBuH,YAAlB,GAAiC,YAAY;AACzC,SAAK+W,SAAL,CAAe,KAAKzb,OAAL,CAAa+Z,MAA5B;AACH,GAFD;;AAGAla,EAAAA,OAAO,CAAC1C,SAAR,CAAkByR,8BAAlB,GAAmD,YAAY;AAC3D;AACA,SAAKlK,YAAL;AACH,GAHD,CA1+B2C,CA8+B3C;AACA;AACA;;;AACA7E,EAAAA,OAAO,CAAC1C,SAAR,CAAkBod,qBAAlB,GAA0C,UAAUuB,KAAV,EAAiBC,OAAjB,EAA0B;AAChE,QAAIA,OAAO,KAAK,KAAK,CAArB,EAAwB;AAAEA,MAAAA,OAAO,GAAG,KAAV;AAAkB;;AAC5C,QAAI,KAAK/b,OAAL,CAAagc,WAAb,EAAJ,EAAgC;AAC5B,aAAOF,KAAP;AACH;;AACD,QAAIG,WAAW,GAAG,KAAKhc,KAAL,CAAWgB,eAAX,CAA2Bib,cAA3B,EAAlB;AACA,QAAIC,UAAU,GAAGJ,OAAO,GAAG,CAAH,GAAO,CAAC,CAAhC;AACA,WAAOD,KAAK,GAAIG,WAAW,GAAGE,UAA9B;AACH,GARD;;AASAtc,EAAAA,OAAO,CAAC1C,SAAR,CAAkBse,SAAlB,GAA8B,UAAUW,MAAV,EAAkB;AAC5C;AACA,QAAI,KAAKhc,WAAT,EAAsB;AAClB;AACH,KAJ2C,CAK5C;AACA;;;AACA,QAAIvB,MAAM,CAACud,MAAD,CAAV,EAAoB;AAChB,UAAIC,qBAAqB,GAAG,KAAK9B,qBAAL,CAA2B6B,MAA3B,CAA5B;AACA,UAAIE,kBAAkB,GAAG,KAAKtc,OAAL,CAAagc,WAAb,KAA6BK,qBAA7B,GAAqD,KAAKpc,KAAL,CAAWsc,yBAAX,CAAqCC,oBAArC,CAA0DH,qBAA1D,CAA9E;AACA,UAAIP,KAAK,GAAGQ,kBAAkB,GAAG,IAAjC;AACA,WAAKG,cAAL,CAAoBX,KAApB;AACH;AACJ,GAbD;;AAcAjc,EAAAA,OAAO,CAAC1C,SAAR,CAAkBuf,gBAAlB,GAAqC,YAAY;AAC7C,WAAO,KAAKC,UAAZ;AACH,GAFD;;AAGA9c,EAAAA,OAAO,CAAC1C,SAAR,CAAkByf,mBAAlB,GAAwC,YAAY;AAChD,WAAO,KAAKC,gBAAZ;AACH,GAFD;;AAGAhd,EAAAA,OAAO,CAAC1C,SAAR,CAAkB8E,gBAAlB,GAAqC,YAAY;AAC7C;AACA,QAAI,KAAK7B,WAAT,EAAsB;AAClB,aAAO,EAAP;AACH,KAJ4C,CAK7C;;;AACA,QAAIgc,MAAM,GAAG,KAAK3X,UAAL,GAAkB,KAAKqV,mBAAL,CAAyB,KAAK9Z,OAAL,CAAasM,SAAtC,CAAlB,GAAqE,KAAKtM,OAAL,CAAa+Z,MAA/F;AACA,QAAIsC,qBAAqB,GAAG,KAAK9B,qBAAL,CAA2B6B,MAA3B,CAA5B,CAP6C,CAQ7C;;AACA,QAAIE,kBAAkB,GAAG,KAAKtc,OAAL,CAAagc,WAAb,KAA6BK,qBAA7B,GAAqD,KAAKpc,KAAL,CAAWsc,yBAAX,CAAqCC,oBAArC,CAA0DH,qBAA1D,CAA9E;AACA,QAAIlS,GAAG,GAAGmS,kBAAkB,GAAG,IAA/B;AACA,QAAIQ,oBAAoB,GAAG,KAAK7c,KAAL,CAAW8C,kBAAX,CAA8Bga,sBAA9B,EAA3B;;AACA,QAAID,oBAAJ,EAA0B;AACtB,WAAKH,UAAL,GAAkBxS,GAAlB;AACH,KAFD,MAGK;AACD,WAAK0S,gBAAL,GAAwB,gBAAgB1S,GAAhB,GAAsB,GAA9C;AACH;AACJ,GAlBD;;AAmBAtK,EAAAA,OAAO,CAAC1C,SAAR,CAAkBsf,cAAlB,GAAmC,UAAUX,KAAV,EAAiB;AAChD,QAAIgB,oBAAoB,GAAG,KAAK7c,KAAL,CAAW8C,kBAAX,CAA8Bga,sBAA9B,EAA3B;AACA,SAAKxc,UAAL,CAAgBsD,OAAhB,CAAwB,UAAUrB,GAAV,EAAe;AAAE,aAAOsa,oBAAoB,GAChEta,GAAG,CAACH,OAAJ,CAAY2a,MAAZ,CAAmBlB,KAAnB,CADgE,GAEhEtZ,GAAG,CAACH,OAAJ,CAAY4a,YAAZ,CAAyB,gBAAgBnB,KAAhB,GAAwB,GAAjD,CAFqC;AAEmB,KAF5D;AAGH,GALD;;AAMAjc,EAAAA,OAAO,CAAC1C,SAAR,CAAkB+f,UAAlB,GAA+B,YAAY;AACvC,WAAO,KAAKld,OAAZ;AACH,GAFD;;AAGAH,EAAAA,OAAO,CAAC1C,SAAR,CAAkB2K,WAAlB,GAAgC,UAAUF,MAAV,EAAkB;AAC9C;AACA,QAAIuC,GAAG,GAAG,IAAV;AACA,SAAKwF,eAAL,GAAuB9L,OAAvB,CAA+B,UAAUgE,QAAV,EAAoB;AAC/C,UAAIA,QAAQ,CAAC4C,SAAT,MAAwB7C,MAA5B,EAAoC;AAChCuC,QAAAA,GAAG,GAAGtC,QAAN;AACH;AACJ,KAJD;;AAKA,QAAIsC,GAAG,IAAI,IAAX,EAAiB;AACb,aAAOA,GAAP;AACH,KAV6C,CAW9C;AACA;AACA;AACA;AACA;;;AACA,SAAKwF,eAAL,GAAuB9L,OAAvB,CAA+B,UAAUgE,QAAV,EAAoB;AAC/C,UAAIA,QAAQ,CAACsV,kBAAT,GAA8B/Q,OAA9B,CAAsCxE,MAAtC,KAAiD,CAArD,EAAwD;AACpDuC,QAAAA,GAAG,GAAGtC,QAAN;AACH;AACJ,KAJD;AAKA,WAAOsC,GAAP;AACH,GAtBD;;AAuBAtK,EAAAA,OAAO,CAAC1C,SAAR,CAAkBwQ,iBAAlB,GAAsC,YAAY;AAC9C;AACA;AACA;AACA,QAAI,KAAK3N,OAAL,CAAayB,QAAb,IAAyB,IAA7B,EAAmC;AAC/B,WAAK0N,kBAAL;AACA,WAAKjL,gBAAL;AACH;AACJ,GARD;;AASArE,EAAAA,OAAO,CAAC1C,SAAR,CAAkB+G,gBAAlB,GAAqC,YAAY;AAC7C,QAAI7D,KAAK,GAAG,IAAZ;;AACA,QAAI+c,WAAW,GAAG,KAAKpd,OAAL,CAAaqd,iBAAb,EAAlB;AACA,QAAIC,cAAc,GAAG,KAAKrd,KAAL,CAAWsd,uBAAX,CAAmCC,iBAAnC,EAArB;AACA,QAAI9E,SAAS,GAAG,KAAK1Y,OAAL,CAAayB,QAAb,GAAwB,CAAxB,KAA8B,CAA9C;AACA,SAAKlB,UAAL,CAAgBsD,OAAhB,CAAwB,UAAUuN,CAAV,EAAa;AACjCA,MAAAA,CAAC,CAAC/O,OAAF,CAAUob,WAAV,CAAsBL,WAAtB;AACAhM,MAAAA,CAAC,CAAC/O,OAAF,CAAUqb,eAAV,CAA0BJ,cAAc,GAAGjd,KAAK,CAACL,OAAN,CAAcyB,QAA/B,GAA0C,CAApE;AACA2P,MAAAA,CAAC,CAAC/O,OAAF,CAAU7D,mBAAV,CAA8B,aAA9B,EAA6Cka,SAA7C;AACAtH,MAAAA,CAAC,CAAC/O,OAAF,CAAU7D,mBAAV,CAA8B,YAA9B,EAA4C,CAACka,SAA7C;AACH,KALD;AAMH,GAXD,CA1kC2C,CAslC3C;;;AACA7Y,EAAAA,OAAO,CAAC1C,SAAR,CAAkBwgB,uBAAlB,GAA4C,YAAY;AACpD,WAAO,KAAKhb,OAAL,GAAe,KAAKA,OAAL,CAAaL,OAA5B,GAAsCsB,SAA7C;AACH,GAFD,CAvlC2C,CA0lC3C;;;AACA/D,EAAAA,OAAO,CAAC1C,SAAR,CAAkBygB,wBAAlB,GAA6C,YAAY;AACrD,WAAO,KAAK/a,QAAL,GAAgB,KAAKA,QAAL,CAAcP,OAA9B,GAAwCsB,SAA/C;AACH,GAFD,CA3lC2C,CA8lC3C;;;AACA/D,EAAAA,OAAO,CAAC1C,SAAR,CAAkB0gB,iBAAlB,GAAsC,YAAY;AAC9C,WAAO,KAAK3a,SAAL,GAAiB,KAAKA,SAAL,CAAeZ,OAAhC,GAA0CsB,SAAjD;AACH,GAFD,CA/lC2C,CAkmC3C;;;AACA/D,EAAAA,OAAO,CAAC1C,SAAR,CAAkB2gB,sBAAlB,GAA2C,YAAY;AACnD,WAAO,KAAK7a,YAAL,GAAoB,KAAKA,YAAL,CAAkBX,OAAtC,GAAgDsB,SAAvD;AACH,GAFD;;AAGA/D,EAAAA,OAAO,CAACgG,yBAAR,GAAoC,aAApC;AACA,SAAOhG,OAAP;AACH,CAxmC4B,CAwmC3B5B,QAxmC2B,CAA7B;;AAymCA,SAAS4B,OAAT","sourcesContent":["/**\n * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v26.0.0\n * @link http://www.ag-grid.com/\n * @license MIT\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport { Constants } from \"../../constants/constants\";\nimport { BeanStub } from \"../../context/beanStub\";\nimport { RowHighlightPosition, RowNode } from \"../../entities/rowNode\";\nimport { Events } from \"../../events\";\nimport { ModuleNames } from \"../../modules/moduleNames\";\nimport { ModuleRegistry } from \"../../modules/moduleRegistry\";\nimport { addCssClass, addOrRemoveCssClass, isElementChildOfClass, removeCssClass } from \"../../utils/dom\";\nimport { isStopPropagationForAgGrid } from \"../../utils/event\";\nimport { executeNextVMTurn } from \"../../utils/function\";\nimport { exists, find } from \"../../utils/generic\";\nimport { convertToMap } from \"../../utils/map\";\nimport { assign } from \"../../utils/object\";\nimport { escapeString } from \"../../utils/string\";\nimport { CellCtrl } from \"../cell/cellCtrl\";\nimport { AngularRowUtils } from \"./angularRowUtils\";\nimport { RowDragComp } from \"./rowDragComp\";\nexport var RowType;\n(function (RowType) {\n    RowType[\"Normal\"] = \"Normal\";\n    RowType[\"FullWidth\"] = \"FullWidth\";\n    RowType[\"FullWidthLoading\"] = \"FullWidthLoading\";\n    RowType[\"FullWidthGroup\"] = \"FullWidthGroup\";\n    RowType[\"FullWidthDetail\"] = \"FullWidthDetail\";\n})(RowType || (RowType = {}));\nexport var FullWidthRenderers = convertToMap([\n    [RowType.FullWidthLoading, 'agLoadingCellRenderer'],\n    [RowType.FullWidthGroup, 'agGroupRowRenderer'],\n    [RowType.FullWidthDetail, 'agDetailCellRenderer']\n]);\nexport var FullWidthKeys = convertToMap([\n    [RowType.FullWidth, 'fullWidthCellRenderer'],\n    [RowType.FullWidthLoading, 'loadingCellRenderer'],\n    [RowType.FullWidthGroup, 'groupRowRenderer'],\n    [RowType.FullWidthDetail, 'detailCellRenderer']\n]);\nvar instanceIdSequence = 0;\nvar RowCtrl = /** @class */ (function (_super) {\n    __extends(RowCtrl, _super);\n    function RowCtrl(parentScope, rowNode, beans, animateIn, useAnimationFrameForCreate, printLayout) {\n        var _this = _super.call(this) || this;\n        _this.allRowGuis = [];\n        _this.active = true;\n        _this.centerCellCtrls = { list: [], map: {} };\n        _this.leftCellCtrls = { list: [], map: {} };\n        _this.rightCellCtrls = { list: [], map: {} };\n        _this.lastMouseDownOnDragger = false;\n        _this.updateColumnListsPending = false;\n        _this.parentScope = parentScope;\n        _this.beans = beans;\n        _this.rowNode = rowNode;\n        _this.paginationPage = _this.beans.paginationProxy.getCurrentPage();\n        _this.useAnimationFrameForCreate = useAnimationFrameForCreate;\n        _this.printLayout = printLayout;\n        _this.instanceId = rowNode.id + '-' + instanceIdSequence++;\n        _this.setAnimateFlags(animateIn);\n        _this.rowFocused = _this.beans.focusService.isRowFocused(_this.rowNode.rowIndex, _this.rowNode.rowPinned);\n        _this.setupAngular1Scope();\n        _this.rowLevel = _this.beans.rowCssClassCalculator.calculateRowLevel(_this.rowNode);\n        _this.setRowType();\n        _this.addListeners();\n        _this.setInitialRowTop();\n        return _this;\n    }\n    RowCtrl.prototype.getBeans = function () {\n        return this.beans;\n    };\n    RowCtrl.prototype.getInstanceId = function () {\n        return this.instanceId;\n    };\n    RowCtrl.prototype.setComp = function (rowComp, element, pinned) {\n        var gui = { rowComp: rowComp, element: element, pinned: pinned };\n        this.allRowGuis.push(gui);\n        if (pinned === Constants.PINNED_LEFT) {\n            this.leftGui = gui;\n        }\n        else if (pinned === Constants.PINNED_RIGHT) {\n            this.rightGui = gui;\n        }\n        else if (this.isFullWidth() && !this.beans.gridOptionsWrapper.isEmbedFullWidthRows()) {\n            this.fullWidthGui = gui;\n        }\n        else {\n            this.centerGui = gui;\n        }\n        var allNormalPresent = this.leftGui != null && this.rightGui != null && this.centerGui != null;\n        var fullWidthPresent = this.fullWidthGui != null;\n        if (allNormalPresent || fullWidthPresent) {\n            this.initialiseRowComps();\n        }\n    };\n    RowCtrl.prototype.isCacheable = function () {\n        return this.rowType === RowType.FullWidthDetail\n            && this.beans.gridOptionsWrapper.isKeepDetailRows();\n    };\n    RowCtrl.prototype.setCached = function (cached) {\n        var displayValue = cached ? 'none' : undefined;\n        this.allRowGuis.forEach(function (rg) { return rg.rowComp.setDisplay(displayValue); });\n    };\n    RowCtrl.prototype.initialiseRowComps = function () {\n        var _this = this;\n        var gow = this.beans.gridOptionsWrapper;\n        this.onRowHeightChanged();\n        this.updateRowIndexes();\n        this.setFocusedClasses();\n        this.setStylesFromGridOptions();\n        if (gow.isRowSelection() && this.rowNode.selectable) {\n            this.onRowSelected();\n        }\n        this.updateColumnLists(!this.useAnimationFrameForCreate);\n        if (this.slideRowIn) {\n            executeNextVMTurn(this.onTopChanged.bind(this));\n        }\n        if (this.fadeRowIn) {\n            executeNextVMTurn(function () {\n                _this.allRowGuis.forEach(function (gui) { return gui.rowComp.addOrRemoveCssClass('ag-opacity-zero', false); });\n            });\n        }\n        var businessKey = this.getRowBusinessKey();\n        var rowIdSanitised = escapeString(this.rowNode.id);\n        var businessKeySanitised = escapeString(businessKey);\n        this.allRowGuis.forEach(function (gui) {\n            var comp = gui.rowComp;\n            comp.setRole('row');\n            var initialRowClasses = _this.getInitialRowClasses(gui.pinned);\n            initialRowClasses.forEach(function (name) { return comp.addOrRemoveCssClass(name, true); });\n            if (_this.rowNode.group) {\n                comp.setAriaExpanded(_this.rowNode.expanded == true);\n            }\n            if (rowIdSanitised != null) {\n                comp.setRowId(rowIdSanitised);\n            }\n            if (businessKeySanitised != null) {\n                comp.setRowBusinessKey(businessKeySanitised);\n            }\n            if (_this.isFullWidth()) {\n                comp.setTabIndex(-1);\n            }\n            // DOM DATA\n            gow.setDomData(gui.element, RowCtrl.DOM_DATA_KEY_RENDERED_ROW, _this);\n            _this.addDestroyFunc(function () { return gow.setDomData(gui.element, RowCtrl.DOM_DATA_KEY_RENDERED_ROW, null); });\n            // adding hover functionality adds listener to this row, so we\n            // do it lazily in an animation frame\n            if (_this.useAnimationFrameForCreate) {\n                _this.beans.taskQueue.createTask(_this.addHoverFunctionality.bind(_this, gui.element), _this.rowNode.rowIndex, 'createTasksP2');\n            }\n            else {\n                _this.addHoverFunctionality(gui.element);\n            }\n            if (_this.isFullWidth()) {\n                _this.setupFullWidth(gui);\n            }\n        });\n        this.executeProcessRowPostCreateFunc();\n    };\n    RowCtrl.prototype.getFullWidthCellRendererType = function () {\n        return FullWidthKeys.get(this.rowType);\n    };\n    RowCtrl.prototype.getFullWidthCellRendererName = function () {\n        return FullWidthRenderers.get(this.rowType);\n    };\n    RowCtrl.prototype.setupFullWidth = function (gui) {\n        var params = this.createFullWidthParams(gui.element, gui.pinned);\n        var cellRendererType = this.getFullWidthCellRendererType();\n        var cellRendererName = this.getFullWidthCellRendererName();\n        var compDetails = this.beans.userComponentFactory.getFullWidthCellRendererDetails(params, cellRendererType, cellRendererName);\n        if (compDetails) {\n            gui.rowComp.showFullWidth(compDetails);\n        }\n        else {\n            var masterDetailModuleLoaded = ModuleRegistry.isRegistered(ModuleNames.MasterDetailModule);\n            if (cellRendererName === 'agDetailCellRenderer' && !masterDetailModuleLoaded) {\n                console.warn(\"AG Grid: cell renderer agDetailCellRenderer (for master detail) not found. Did you forget to include the master detail module?\");\n            }\n            else {\n                console.error(\"AG Grid: fullWidthCellRenderer \" + cellRendererName + \" not found\");\n            }\n        }\n    };\n    RowCtrl.prototype.getScope = function () {\n        return this.scope;\n    };\n    RowCtrl.prototype.isPrintLayout = function () {\n        return this.printLayout;\n    };\n    RowCtrl.prototype.setupAngular1Scope = function () {\n        var scopeResult = AngularRowUtils.createChildScopeOrNull(this.rowNode, this.parentScope, this.beans.gridOptionsWrapper);\n        if (scopeResult) {\n            this.scope = scopeResult.scope;\n            this.addDestroyFunc(scopeResult.scopeDestroyFunc);\n        }\n    };\n    // use by autoWidthCalculator, as it clones the elements\n    RowCtrl.prototype.getCellElement = function (column) {\n        var cellCtrl = this.getCellCtrl(column);\n        return cellCtrl ? cellCtrl.getGui() : null;\n    };\n    RowCtrl.prototype.executeProcessRowPostCreateFunc = function () {\n        var func = this.beans.gridOptionsWrapper.getProcessRowPostCreateFunc();\n        if (!func) {\n            return;\n        }\n        var params = {\n            eRow: this.centerGui ? this.centerGui.element : undefined,\n            ePinnedLeftRow: this.leftGui ? this.leftGui.element : undefined,\n            ePinnedRightRow: this.rightGui ? this.rightGui.element : undefined,\n            node: this.rowNode,\n            api: this.beans.gridOptionsWrapper.getApi(),\n            rowIndex: this.rowNode.rowIndex,\n            addRenderedRowListener: this.addEventListener.bind(this),\n            columnApi: this.beans.gridOptionsWrapper.getColumnApi(),\n            context: this.beans.gridOptionsWrapper.getContext()\n        };\n        func(params);\n    };\n    RowCtrl.prototype.setRowType = function () {\n        var isStub = this.rowNode.stub;\n        var isFullWidthCell = this.rowNode.isFullWidthCell();\n        var isDetailCell = this.beans.doingMasterDetail && this.rowNode.detail;\n        var pivotMode = this.beans.columnModel.isPivotMode();\n        // we only use full width for groups, not footers. it wouldn't make sense to include footers if not looking\n        // for totals. if users complain about this, then we should introduce a new property 'footerUseEntireRow'\n        // so each can be set independently (as a customer complained about footers getting full width, hence\n        // introducing this logic)\n        var isGroupRow = !!this.rowNode.group && !this.rowNode.footer;\n        var isFullWidthGroup = isGroupRow && this.beans.gridOptionsWrapper.isGroupUseEntireRow(pivotMode);\n        if (isStub) {\n            this.rowType = RowType.FullWidthLoading;\n        }\n        else if (isDetailCell) {\n            this.rowType = RowType.FullWidthDetail;\n        }\n        else if (isFullWidthCell) {\n            this.rowType = RowType.FullWidth;\n        }\n        else if (isFullWidthGroup) {\n            this.rowType = RowType.FullWidthGroup;\n        }\n        else {\n            this.rowType = RowType.Normal;\n        }\n    };\n    RowCtrl.prototype.updateColumnLists = function (suppressAnimationFrame) {\n        var _this = this;\n        if (suppressAnimationFrame === void 0) { suppressAnimationFrame = false; }\n        if (this.isFullWidth()) {\n            return;\n        }\n        var noAnimation = suppressAnimationFrame\n            || this.beans.gridOptionsWrapper.isSuppressAnimationFrame()\n            || this.printLayout;\n        if (noAnimation) {\n            this.updateColumnListsImpl();\n            return;\n        }\n        if (this.updateColumnListsPending) {\n            return;\n        }\n        this.beans.taskQueue.createTask(function () {\n            if (!_this.active) {\n                return;\n            }\n            _this.updateColumnListsImpl();\n        }, this.rowNode.rowIndex, 'createTasksP1');\n        this.updateColumnListsPending = true;\n    };\n    RowCtrl.prototype.createCellCtrls = function (prev, cols, pinned) {\n        var _this = this;\n        if (pinned === void 0) { pinned = null; }\n        var res = {\n            list: [],\n            map: {}\n        };\n        var addCell = function (colInstanceId, cellCtrl) {\n            res.list.push(cellCtrl);\n            res.map[colInstanceId] = cellCtrl;\n        };\n        cols.forEach(function (col) {\n            // we use instanceId's rather than colId as it's possible there is a Column with same Id,\n            // but it's referring to a different column instance. Happens a lot with pivot, as pivot col id's are\n            // reused eg pivot_0, pivot_1 etc\n            var colInstanceId = col.getInstanceId();\n            var cellCtrl = prev.map[colInstanceId];\n            if (!cellCtrl) {\n                cellCtrl = new CellCtrl(col, _this.rowNode, _this.beans, _this);\n            }\n            addCell(colInstanceId, cellCtrl);\n        });\n        prev.list.forEach(function (prevCellCtrl) {\n            var cellInResult = res.map[prevCellCtrl.getColumn().getInstanceId()] != null;\n            if (cellInResult) {\n                return;\n            }\n            var keepCell = !_this.isCellEligibleToBeRemoved(prevCellCtrl, pinned);\n            if (keepCell) {\n                addCell(prevCellCtrl.getColumn().getInstanceId(), prevCellCtrl);\n                return;\n            }\n            prevCellCtrl.destroy();\n        });\n        return res;\n    };\n    RowCtrl.prototype.updateColumnListsImpl = function () {\n        var _this = this;\n        this.updateColumnListsPending = false;\n        var columnModel = this.beans.columnModel;\n        if (this.printLayout) {\n            this.centerCellCtrls = this.createCellCtrls(this.centerCellCtrls, columnModel.getAllDisplayedColumns());\n            this.leftCellCtrls = { list: [], map: {} };\n            this.rightCellCtrls = { list: [], map: {} };\n        }\n        else {\n            var centerCols = columnModel.getViewportCenterColumnsForRow(this.rowNode);\n            this.centerCellCtrls = this.createCellCtrls(this.centerCellCtrls, centerCols);\n            var leftCols = columnModel.getDisplayedLeftColumnsForRow(this.rowNode);\n            this.leftCellCtrls = this.createCellCtrls(this.leftCellCtrls, leftCols, Constants.PINNED_LEFT);\n            var rightCols = columnModel.getDisplayedRightColumnsForRow(this.rowNode);\n            this.rightCellCtrls = this.createCellCtrls(this.rightCellCtrls, rightCols, Constants.PINNED_RIGHT);\n        }\n        this.allRowGuis.forEach(function (item) {\n            var cellControls = item.pinned === Constants.PINNED_LEFT ? _this.leftCellCtrls :\n                item.pinned === Constants.PINNED_RIGHT ? _this.rightCellCtrls : _this.centerCellCtrls;\n            item.rowComp.setCellCtrls(cellControls.list);\n        });\n    };\n    RowCtrl.prototype.isCellEligibleToBeRemoved = function (cellCtrl, nextContainerPinned) {\n        var REMOVE_CELL = true;\n        var KEEP_CELL = false;\n        // always remove the cell if it's not rendered or if it's in the wrong pinned location\n        var column = cellCtrl.getColumn();\n        if (column.getPinned() != nextContainerPinned) {\n            return REMOVE_CELL;\n        }\n        // we want to try and keep editing and focused cells\n        var editing = cellCtrl.isEditing();\n        var focused = this.beans.focusService.isCellFocused(cellCtrl.getCellPosition());\n        var mightWantToKeepCell = editing || focused;\n        if (mightWantToKeepCell) {\n            var column_1 = cellCtrl.getColumn();\n            var displayedColumns = this.beans.columnModel.getAllDisplayedColumns();\n            var cellStillDisplayed = displayedColumns.indexOf(column_1) >= 0;\n            return cellStillDisplayed ? KEEP_CELL : REMOVE_CELL;\n        }\n        return REMOVE_CELL;\n    };\n    RowCtrl.prototype.setAnimateFlags = function (animateIn) {\n        if (animateIn) {\n            var oldRowTopExists = exists(this.rowNode.oldRowTop);\n            // if the row had a previous position, we slide it in (animate row top)\n            this.slideRowIn = oldRowTopExists;\n            // if the row had no previous position, we fade it in (animate\n            this.fadeRowIn = !oldRowTopExists;\n        }\n        else {\n            this.slideRowIn = false;\n            this.fadeRowIn = false;\n        }\n    };\n    RowCtrl.prototype.isEditing = function () {\n        return this.editingRow;\n    };\n    RowCtrl.prototype.stopRowEditing = function (cancel) {\n        this.stopEditing(cancel);\n    };\n    RowCtrl.prototype.isFullWidth = function () {\n        return this.rowType !== RowType.Normal;\n    };\n    RowCtrl.prototype.getRowType = function () {\n        return this.rowType;\n    };\n    RowCtrl.prototype.refreshFullWidth = function () {\n        var _this = this;\n        // returns 'true' if refresh succeeded\n        var tryRefresh = function (gui, pinned) {\n            if (!gui) {\n                return true;\n            } // no refresh needed\n            var cellRenderer = gui.rowComp.getFullWidthCellRenderer();\n            // no cell renderer, either means comp not yet ready, or comp ready but now reference\n            // to it (happens in react when comp is stateless). if comp not ready, we don't need to\n            // refresh, however we don't know which one, so we refresh to cover the case where it's\n            // react comp without reference so need to force a refresh\n            if (!cellRenderer) {\n                return false;\n            }\n            // no refresh method present, so can't refresh, hard refresh needed\n            if (!cellRenderer.refresh) {\n                return false;\n            }\n            var params = _this.createFullWidthParams(gui.element, pinned);\n            var refreshSucceeded = cellRenderer.refresh(params);\n            return refreshSucceeded;\n        };\n        var fullWidthSuccess = tryRefresh(this.fullWidthGui, null);\n        var centerSuccess = tryRefresh(this.centerGui, null);\n        var leftSuccess = tryRefresh(this.leftGui, Constants.PINNED_LEFT);\n        var rightSuccess = tryRefresh(this.rightGui, Constants.PINNED_RIGHT);\n        var allFullWidthRowsRefreshed = fullWidthSuccess && centerSuccess && leftSuccess && rightSuccess;\n        return allFullWidthRowsRefreshed;\n    };\n    RowCtrl.prototype.addListeners = function () {\n        this.addManagedListener(this.rowNode, RowNode.EVENT_HEIGHT_CHANGED, this.onRowHeightChanged.bind(this));\n        this.addManagedListener(this.rowNode, RowNode.EVENT_ROW_SELECTED, this.onRowSelected.bind(this));\n        this.addManagedListener(this.rowNode, RowNode.EVENT_ROW_INDEX_CHANGED, this.onRowIndexChanged.bind(this));\n        this.addManagedListener(this.rowNode, RowNode.EVENT_TOP_CHANGED, this.onTopChanged.bind(this));\n        this.addManagedListener(this.rowNode, RowNode.EVENT_EXPANDED_CHANGED, this.updateExpandedCss.bind(this));\n        this.addManagedListener(this.rowNode, RowNode.EVENT_HAS_CHILDREN_CHANGED, this.updateExpandedCss.bind(this));\n        this.addManagedListener(this.rowNode, RowNode.EVENT_DATA_CHANGED, this.onRowNodeDataChanged.bind(this));\n        this.addManagedListener(this.rowNode, RowNode.EVENT_CELL_CHANGED, this.onRowNodeCellChanged.bind(this));\n        this.addManagedListener(this.rowNode, RowNode.EVENT_HIGHLIGHT_CHANGED, this.onRowNodeHighlightChanged.bind(this));\n        this.addManagedListener(this.rowNode, RowNode.EVENT_DRAGGING_CHANGED, this.onRowNodeDraggingChanged.bind(this));\n        this.addManagedListener(this.rowNode, RowNode.EVENT_UI_LEVEL_CHANGED, this.onUiLevelChanged.bind(this));\n        var eventService = this.beans.eventService;\n        this.addManagedListener(eventService, Events.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED, this.onPaginationPixelOffsetChanged.bind(this));\n        this.addManagedListener(eventService, Events.EVENT_HEIGHT_SCALE_CHANGED, this.onTopChanged.bind(this));\n        this.addManagedListener(eventService, Events.EVENT_DISPLAYED_COLUMNS_CHANGED, this.onDisplayedColumnsChanged.bind(this));\n        this.addManagedListener(eventService, Events.EVENT_VIRTUAL_COLUMNS_CHANGED, this.onVirtualColumnsChanged.bind(this));\n        this.addManagedListener(eventService, Events.EVENT_CELL_FOCUSED, this.onCellFocusChanged.bind(this));\n        this.addManagedListener(eventService, Events.EVENT_PAGINATION_CHANGED, this.onPaginationChanged.bind(this));\n        this.addManagedListener(eventService, Events.EVENT_MODEL_UPDATED, this.onModelUpdated.bind(this));\n        this.addManagedListener(eventService, Events.EVENT_COLUMN_MOVED, this.onColumnMoved.bind(this));\n        this.addListenersForCellComps();\n    };\n    RowCtrl.prototype.onColumnMoved = function () {\n        this.updateColumnLists();\n    };\n    RowCtrl.prototype.addListenersForCellComps = function () {\n        var _this = this;\n        this.addManagedListener(this.rowNode, RowNode.EVENT_ROW_INDEX_CHANGED, function () {\n            _this.getAllCellCtrls().forEach(function (cellCtrl) { return cellCtrl.onRowIndexChanged(); });\n        });\n        this.addManagedListener(this.rowNode, RowNode.EVENT_CELL_CHANGED, function (event) {\n            _this.getAllCellCtrls().forEach(function (cellCtrl) { return cellCtrl.onCellChanged(event); });\n        });\n    };\n    RowCtrl.prototype.onRowNodeDataChanged = function (event) {\n        // if this is an update, we want to refresh, as this will allow the user to put in a transition\n        // into the cellRenderer refresh method. otherwise this might be completely new data, in which case\n        // we will want to completely replace the cells\n        this.getAllCellCtrls().forEach(function (cellCtrl) {\n            return cellCtrl.refreshCell({\n                suppressFlash: !event.update,\n                newData: !event.update\n            });\n        });\n        // check for selected also, as this could be after lazy loading of the row data, in which case\n        // the id might of just gotten set inside the row and the row selected state may of changed\n        // as a result. this is what happens when selected rows are loaded in virtual pagination.\n        // - niall note - since moving to the stub component, this may no longer be true, as replacing\n        // the stub component now replaces the entire row\n        this.onRowSelected();\n        // as data has changed, then the style and class needs to be recomputed\n        this.postProcessCss();\n    };\n    RowCtrl.prototype.onRowNodeCellChanged = function () {\n        // as data has changed, then the style and class needs to be recomputed\n        this.postProcessCss();\n    };\n    RowCtrl.prototype.postProcessCss = function () {\n        this.setStylesFromGridOptions();\n        this.postProcessClassesFromGridOptions();\n        this.postProcessRowClassRules();\n        this.postProcessRowDragging();\n    };\n    RowCtrl.prototype.onRowNodeHighlightChanged = function () {\n        var highlighted = this.rowNode.highlighted;\n        this.allRowGuis.forEach(function (gui) {\n            var aboveOn = highlighted === RowHighlightPosition.Above;\n            var belowOn = highlighted === RowHighlightPosition.Below;\n            gui.rowComp.addOrRemoveCssClass('ag-row-highlight-above', aboveOn);\n            gui.rowComp.addOrRemoveCssClass('ag-row-highlight-below', belowOn);\n        });\n    };\n    RowCtrl.prototype.onRowNodeDraggingChanged = function () {\n        this.postProcessRowDragging();\n    };\n    RowCtrl.prototype.postProcessRowDragging = function () {\n        var dragging = this.rowNode.dragging;\n        this.allRowGuis.forEach(function (gui) { return gui.rowComp.addOrRemoveCssClass('ag-row-dragging', dragging); });\n    };\n    RowCtrl.prototype.updateExpandedCss = function () {\n        var expandable = this.rowNode.isExpandable();\n        var expanded = this.rowNode.expanded == true;\n        this.allRowGuis.forEach(function (gui) {\n            gui.rowComp.addOrRemoveCssClass('ag-row-group', expandable);\n            gui.rowComp.addOrRemoveCssClass('ag-row-group-expanded', expandable && expanded);\n            gui.rowComp.addOrRemoveCssClass('ag-row-group-contracted', expandable && !expanded);\n            gui.rowComp.setAriaExpanded(expandable && expanded);\n        });\n    };\n    RowCtrl.prototype.onDisplayedColumnsChanged = function () {\n        // we skip animations for onDisplayedColumnChanged, as otherwise the client could remove columns and\n        // then set data, and any old valueGetter's (ie from cols that were removed) would still get called.\n        this.updateColumnLists(true);\n        if (this.beans.columnModel.wasAutoRowHeightEverActive()) {\n            this.rowNode.checkAutoHeights();\n        }\n    };\n    RowCtrl.prototype.onVirtualColumnsChanged = function () {\n        this.updateColumnLists();\n    };\n    RowCtrl.prototype.getRowPosition = function () {\n        return {\n            rowPinned: this.rowNode.rowPinned,\n            rowIndex: this.rowNode.rowIndex\n        };\n    };\n    RowCtrl.prototype.onKeyboardNavigate = function (keyboardEvent) {\n        var currentFullWidthComp = find(this.allRowGuis, function (c) { return c.element.contains(keyboardEvent.target); });\n        var currentFullWidthContainer = currentFullWidthComp ? currentFullWidthComp.element : null;\n        var isFullWidthContainerFocused = currentFullWidthContainer === keyboardEvent.target;\n        if (!isFullWidthContainerFocused) {\n            return;\n        }\n        var node = this.rowNode;\n        var lastFocusedCell = this.beans.focusService.getFocusedCell();\n        var cellPosition = {\n            rowIndex: node.rowIndex,\n            rowPinned: node.rowPinned,\n            column: (lastFocusedCell && lastFocusedCell.column)\n        };\n        this.beans.navigationService.navigateToNextCell(keyboardEvent, keyboardEvent.keyCode, cellPosition, true);\n        keyboardEvent.preventDefault();\n    };\n    RowCtrl.prototype.onTabKeyDown = function (keyboardEvent) {\n        if (keyboardEvent.defaultPrevented || isStopPropagationForAgGrid(keyboardEvent)) {\n            return;\n        }\n        var currentFullWidthComp = find(this.allRowGuis, function (c) { return c.element.contains(keyboardEvent.target); });\n        var currentFullWidthContainer = currentFullWidthComp ? currentFullWidthComp.element : null;\n        var isFullWidthContainerFocused = currentFullWidthContainer === keyboardEvent.target;\n        var nextEl = null;\n        if (!isFullWidthContainerFocused) {\n            nextEl = this.beans.focusService.findNextFocusableElement(currentFullWidthContainer, false, keyboardEvent.shiftKey);\n        }\n        if ((this.isFullWidth() && isFullWidthContainerFocused) || !nextEl) {\n            this.beans.navigationService.onTabKeyDown(this, keyboardEvent);\n        }\n    };\n    RowCtrl.prototype.onFullWidthRowFocused = function (event) {\n        var node = this.rowNode;\n        var isFocused = this.isFullWidth() && event.rowIndex === node.rowIndex && event.rowPinned == node.rowPinned;\n        var element = this.fullWidthGui ? this.fullWidthGui.element : this.centerGui.element;\n        addOrRemoveCssClass(element, 'ag-full-width-focus', isFocused);\n        if (isFocused) {\n            // we don't scroll normal rows into view when we focus them, so we don't want\n            // to scroll Full Width rows either.\n            element.focus({ preventScroll: true });\n        }\n    };\n    RowCtrl.prototype.refreshCell = function (cellCtrl) {\n        this.centerCellCtrls = this.removeCellCtrl(this.centerCellCtrls, cellCtrl);\n        this.leftCellCtrls = this.removeCellCtrl(this.leftCellCtrls, cellCtrl);\n        this.rightCellCtrls = this.removeCellCtrl(this.rightCellCtrls, cellCtrl);\n        this.updateColumnLists();\n    };\n    RowCtrl.prototype.removeCellCtrl = function (prev, cellCtrlToRemove) {\n        var res = {\n            list: [],\n            map: {}\n        };\n        prev.list.forEach(function (cellCtrl) {\n            if (cellCtrl === cellCtrlToRemove) {\n                return;\n            }\n            res.list.push(cellCtrl);\n            res.map[cellCtrl.getInstanceId()] = cellCtrl;\n        });\n        return res;\n    };\n    RowCtrl.prototype.onMouseEvent = function (eventName, mouseEvent) {\n        switch (eventName) {\n            case 'dblclick':\n                this.onRowDblClick(mouseEvent);\n                break;\n            case 'click':\n                this.onRowClick(mouseEvent);\n                break;\n            case 'touchstart':\n            case 'mousedown':\n                this.onRowMouseDown(mouseEvent);\n                break;\n        }\n    };\n    RowCtrl.prototype.createRowEvent = function (type, domEvent) {\n        return {\n            type: type,\n            node: this.rowNode,\n            data: this.rowNode.data,\n            rowIndex: this.rowNode.rowIndex,\n            rowPinned: this.rowNode.rowPinned,\n            context: this.beans.gridOptionsWrapper.getContext(),\n            api: this.beans.gridOptionsWrapper.getApi(),\n            columnApi: this.beans.gridOptionsWrapper.getColumnApi(),\n            event: domEvent\n        };\n    };\n    RowCtrl.prototype.createRowEventWithSource = function (type, domEvent) {\n        var event = this.createRowEvent(type, domEvent);\n        // when first developing this, we included the rowComp in the event.\n        // this seems very weird. so when introducing the event types, i left the 'source'\n        // out of the type, and just include the source in the two places where this event\n        // was fired (rowClicked and rowDoubleClicked). it doesn't make sense for any\n        // users to be using this, as the rowComp isn't an object we expose, so would be\n        // very surprising if a user was using it.\n        event.source = this;\n        return event;\n    };\n    RowCtrl.prototype.onRowDblClick = function (mouseEvent) {\n        if (isStopPropagationForAgGrid(mouseEvent)) {\n            return;\n        }\n        var agEvent = this.createRowEventWithSource(Events.EVENT_ROW_DOUBLE_CLICKED, mouseEvent);\n        this.beans.eventService.dispatchEvent(agEvent);\n    };\n    RowCtrl.prototype.onRowMouseDown = function (mouseEvent) {\n        this.lastMouseDownOnDragger = isElementChildOfClass(mouseEvent.target, 'ag-row-drag', 3);\n        if (!this.isFullWidth()) {\n            return;\n        }\n        var node = this.rowNode;\n        var columnModel = this.beans.columnModel;\n        this.beans.focusService.setFocusedCell(node.rowIndex, columnModel.getAllDisplayedColumns()[0], node.rowPinned, true);\n    };\n    RowCtrl.prototype.onRowClick = function (mouseEvent) {\n        var stop = isStopPropagationForAgGrid(mouseEvent) || this.lastMouseDownOnDragger;\n        if (stop) {\n            return;\n        }\n        var agEvent = this.createRowEventWithSource(Events.EVENT_ROW_CLICKED, mouseEvent);\n        this.beans.eventService.dispatchEvent(agEvent);\n        // ctrlKey for windows, metaKey for Apple\n        var multiSelectKeyPressed = mouseEvent.ctrlKey || mouseEvent.metaKey;\n        var shiftKeyPressed = mouseEvent.shiftKey;\n        // we do not allow selecting the group by clicking, when groupSelectChildren, as the logic to\n        // handle this is broken. to observe, change the logic below and allow groups to be selected.\n        // you will see the group gets selected, then all children get selected, then the grid unselects\n        // the children (as the default behaviour when clicking is to unselect other rows) which results\n        // in the group getting unselected (as all children are unselected). the correct thing would be\n        // to change this, so that children of the selected group are not then subsequenly un-selected.\n        var groupSelectsChildren = this.beans.gridOptionsWrapper.isGroupSelectsChildren();\n        if (\n        // we do not allow selecting groups by clicking (as the click here expands the group), or if it's a detail row,\n        // so return if it's a group row\n        (groupSelectsChildren && this.rowNode.group) ||\n            // this is needed so we don't unselect other rows when we click this row, eg if this row is not selectable,\n            // and we click it, the selection should not change (ie any currently selected row should stay selected)\n            !this.rowNode.selectable ||\n            // we also don't allow selection of pinned rows\n            this.rowNode.rowPinned ||\n            // if no selection method enabled, do nothing\n            !this.beans.gridOptionsWrapper.isRowSelection() ||\n            // if click selection suppressed, do nothing\n            this.beans.gridOptionsWrapper.isSuppressRowClickSelection()) {\n            return;\n        }\n        var multiSelectOnClick = this.beans.gridOptionsWrapper.isRowMultiSelectWithClick();\n        var rowDeselectionWithCtrl = !this.beans.gridOptionsWrapper.isSuppressRowDeselection();\n        if (this.rowNode.isSelected()) {\n            if (multiSelectOnClick) {\n                this.rowNode.setSelectedParams({ newValue: false });\n            }\n            else if (multiSelectKeyPressed) {\n                if (rowDeselectionWithCtrl) {\n                    this.rowNode.setSelectedParams({ newValue: false });\n                }\n            }\n            else {\n                // selected with no multi key, must make sure anything else is unselected\n                this.rowNode.setSelectedParams({ newValue: !shiftKeyPressed, clearSelection: !shiftKeyPressed, rangeSelect: shiftKeyPressed });\n            }\n        }\n        else {\n            var clearSelection = multiSelectOnClick ? false : !multiSelectKeyPressed;\n            this.rowNode.setSelectedParams({ newValue: true, clearSelection: clearSelection, rangeSelect: shiftKeyPressed });\n        }\n    };\n    RowCtrl.prototype.setupDetailRowAutoHeight = function (eDetailGui) {\n        var _this = this;\n        if (!this.beans.gridOptionsWrapper.isDetailRowAutoHeight()) {\n            return;\n        }\n        var checkRowSizeFunc = function () {\n            var clientHeight = eDetailGui.clientHeight;\n            // if the UI is not ready, the height can be 0, which we ignore, as otherwise a flicker will occur\n            // as UI goes from the default height, to 0, then to the real height as UI becomes ready. this means\n            // it's not possible for have 0 as auto-height, however this is an improbable use case, as even an\n            // empty detail grid would still have some styling around it giving at least a few pixels.\n            if (clientHeight != null && clientHeight > 0) {\n                // we do the update in a timeout, to make sure we are not calling from inside the grid\n                // doing another update\n                var updateRowHeightFunc = function () {\n                    _this.rowNode.setRowHeight(clientHeight);\n                    if (_this.beans.clientSideRowModel) {\n                        _this.beans.clientSideRowModel.onRowHeightChanged();\n                    }\n                    else if (_this.beans.serverSideRowModel) {\n                        _this.beans.serverSideRowModel.onRowHeightChanged();\n                    }\n                };\n                _this.beans.frameworkOverrides.setTimeout(updateRowHeightFunc, 0);\n            }\n        };\n        var resizeObserverDestroyFunc = this.beans.resizeObserverService.observeResize(eDetailGui, checkRowSizeFunc);\n        this.addDestroyFunc(resizeObserverDestroyFunc);\n        checkRowSizeFunc();\n    };\n    RowCtrl.prototype.createFullWidthParams = function (eRow, pinned) {\n        var _this = this;\n        var params = {\n            fullWidth: true,\n            data: this.rowNode.data,\n            node: this.rowNode,\n            value: this.rowNode.key,\n            valueFormatted: this.rowNode.key,\n            $scope: this.scope ? this.scope : this.parentScope,\n            $compile: this.beans.$compile,\n            rowIndex: this.rowNode.rowIndex,\n            api: this.beans.gridOptionsWrapper.getApi(),\n            columnApi: this.beans.gridOptionsWrapper.getColumnApi(),\n            context: this.beans.gridOptionsWrapper.getContext(),\n            // these need to be taken out, as part of 'afterAttached' now\n            eGridCell: eRow,\n            eParentOfValue: eRow,\n            pinned: pinned,\n            addRenderedRowListener: this.addEventListener.bind(this),\n            registerRowDragger: function (rowDraggerElement, dragStartPixels, value) { return _this.addFullWidthRowDragging(rowDraggerElement, dragStartPixels, value); }\n        };\n        return params;\n    };\n    RowCtrl.prototype.addFullWidthRowDragging = function (rowDraggerElement, dragStartPixels, value) {\n        if (value === void 0) { value = ''; }\n        if (!this.isFullWidth()) {\n            return;\n        }\n        var rowDragComp = new RowDragComp(function () { return value; }, this.rowNode, undefined, rowDraggerElement, dragStartPixels);\n        this.createManagedBean(rowDragComp, this.beans.context);\n    };\n    RowCtrl.prototype.onUiLevelChanged = function () {\n        var newLevel = this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);\n        if (this.rowLevel != newLevel) {\n            var classToAdd_1 = 'ag-row-level-' + newLevel;\n            var classToRemove_1 = 'ag-row-level-' + this.rowLevel;\n            this.allRowGuis.forEach(function (gui) {\n                gui.rowComp.addOrRemoveCssClass(classToAdd_1, true);\n                gui.rowComp.addOrRemoveCssClass(classToRemove_1, false);\n            });\n        }\n        this.rowLevel = newLevel;\n    };\n    RowCtrl.prototype.isFirstRowOnPage = function () {\n        return this.rowNode.rowIndex === this.beans.paginationProxy.getPageFirstRow();\n    };\n    RowCtrl.prototype.isLastRowOnPage = function () {\n        return this.rowNode.rowIndex === this.beans.paginationProxy.getPageLastRow();\n    };\n    RowCtrl.prototype.onModelUpdated = function () {\n        var newFirst = this.isFirstRowOnPage();\n        var newLast = this.isLastRowOnPage();\n        if (this.firstRowOnPage !== newFirst) {\n            this.firstRowOnPage = newFirst;\n            this.allRowGuis.forEach(function (gui) { return gui.rowComp.addOrRemoveCssClass('ag-row-first', newFirst); });\n        }\n        if (this.lastRowOnPage !== newLast) {\n            this.lastRowOnPage = newLast;\n            this.allRowGuis.forEach(function (gui) { return gui.rowComp.addOrRemoveCssClass('ag-row-last', newLast); });\n        }\n    };\n    RowCtrl.prototype.stopEditing = function (cancel) {\n        if (cancel === void 0) { cancel = false; }\n        this.getAllCellCtrls().forEach(function (cellCtrl) { return cellCtrl.stopEditing(cancel); });\n        if (!this.editingRow) {\n            return;\n        }\n        if (!cancel) {\n            var event_1 = this.createRowEvent(Events.EVENT_ROW_VALUE_CHANGED);\n            this.beans.eventService.dispatchEvent(event_1);\n        }\n        this.setEditingRow(false);\n    };\n    RowCtrl.prototype.setInlineEditingCss = function (editing) {\n        this.allRowGuis.forEach(function (gui) {\n            gui.rowComp.addOrRemoveCssClass(\"ag-row-inline-editing\", editing);\n            gui.rowComp.addOrRemoveCssClass(\"ag-row-not-inline-editing\", !editing);\n        });\n    };\n    RowCtrl.prototype.setEditingRow = function (value) {\n        this.editingRow = value;\n        this.allRowGuis.forEach(function (gui) { return gui.rowComp.addOrRemoveCssClass('ag-row-editing', value); });\n        var event = value ?\n            this.createRowEvent(Events.EVENT_ROW_EDITING_STARTED)\n            : this.createRowEvent(Events.EVENT_ROW_EDITING_STOPPED);\n        this.beans.eventService.dispatchEvent(event);\n    };\n    RowCtrl.prototype.startRowEditing = function (keyPress, charPress, sourceRenderedCell) {\n        if (keyPress === void 0) { keyPress = null; }\n        if (charPress === void 0) { charPress = null; }\n        if (sourceRenderedCell === void 0) { sourceRenderedCell = null; }\n        // don't do it if already editing\n        if (this.editingRow) {\n            return;\n        }\n        this.getAllCellCtrls().forEach(function (cellCtrl) {\n            var cellStartedEdit = cellCtrl === sourceRenderedCell;\n            if (cellStartedEdit) {\n                cellCtrl.startEditing(keyPress, charPress, cellStartedEdit);\n            }\n            else {\n                cellCtrl.startEditing(null, null, cellStartedEdit);\n            }\n        });\n        this.setEditingRow(true);\n    };\n    RowCtrl.prototype.getAllCellCtrls = function () {\n        var res = __spreadArrays(this.centerCellCtrls.list, this.leftCellCtrls.list, this.rightCellCtrls.list);\n        return res;\n    };\n    RowCtrl.prototype.postProcessClassesFromGridOptions = function () {\n        var _this = this;\n        var cssClasses = this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode, this.scope);\n        if (!cssClasses || !cssClasses.length) {\n            return;\n        }\n        cssClasses.forEach(function (classStr) {\n            _this.allRowGuis.forEach(function (c) { return c.rowComp.addOrRemoveCssClass(classStr, true); });\n        });\n    };\n    RowCtrl.prototype.postProcessRowClassRules = function () {\n        var _this = this;\n        this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode, this.scope, function (className) {\n            _this.allRowGuis.forEach(function (gui) { return gui.rowComp.addOrRemoveCssClass(className, true); });\n        }, function (className) {\n            _this.allRowGuis.forEach(function (gui) { return gui.rowComp.addOrRemoveCssClass(className, false); });\n        });\n    };\n    RowCtrl.prototype.setStylesFromGridOptions = function () {\n        var rowStyles = this.processStylesFromGridOptions();\n        this.allRowGuis.forEach(function (gui) { return gui.rowComp.setUserStyles(rowStyles); });\n    };\n    RowCtrl.prototype.getRowBusinessKey = function () {\n        var businessKeyForNodeFunc = this.beans.gridOptionsWrapper.getBusinessKeyForNodeFunc();\n        if (typeof businessKeyForNodeFunc !== 'function') {\n            return;\n        }\n        return businessKeyForNodeFunc(this.rowNode);\n    };\n    RowCtrl.prototype.getInitialRowClasses = function (pinned) {\n        var params = {\n            rowNode: this.rowNode,\n            rowFocused: this.rowFocused,\n            fadeRowIn: this.fadeRowIn,\n            rowIsEven: this.rowNode.rowIndex % 2 === 0,\n            rowLevel: this.rowLevel,\n            fullWidthRow: this.isFullWidth(),\n            firstRowOnPage: this.isFirstRowOnPage(),\n            lastRowOnPage: this.isLastRowOnPage(),\n            printLayout: this.printLayout,\n            expandable: this.rowNode.isExpandable(),\n            scope: this.scope,\n            pinned: pinned\n        };\n        return this.beans.rowCssClassCalculator.getInitialRowClasses(params);\n    };\n    RowCtrl.prototype.processStylesFromGridOptions = function () {\n        // part 1 - rowStyle\n        var rowStyle = this.beans.gridOptionsWrapper.getRowStyle();\n        if (rowStyle && typeof rowStyle === 'function') {\n            console.warn('AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead');\n            return;\n        }\n        // part 1 - rowStyleFunc\n        var rowStyleFunc = this.beans.gridOptionsWrapper.getRowStyleFunc();\n        var rowStyleFuncResult;\n        if (rowStyleFunc) {\n            var params = {\n                data: this.rowNode.data,\n                node: this.rowNode,\n                rowIndex: this.rowNode.rowIndex,\n                $scope: this.scope,\n                api: this.beans.gridOptionsWrapper.getApi(),\n                columnApi: this.beans.gridOptionsWrapper.getColumnApi(),\n                context: this.beans.gridOptionsWrapper.getContext()\n            };\n            rowStyleFuncResult = rowStyleFunc(params);\n        }\n        return assign({}, rowStyle, rowStyleFuncResult);\n    };\n    RowCtrl.prototype.onRowSelected = function () {\n        var _this = this;\n        var selected = this.rowNode.isSelected();\n        this.allRowGuis.forEach(function (gui) {\n            gui.rowComp.setAriaSelected(selected ? true : undefined);\n            gui.rowComp.addOrRemoveCssClass('ag-row-selected', selected);\n            gui.rowComp.setAriaLabel(_this.createAriaLabel());\n        });\n    };\n    RowCtrl.prototype.createAriaLabel = function () {\n        var selected = this.rowNode.isSelected();\n        if (selected && this.beans.gridOptionsWrapper.isSuppressRowDeselection()) {\n            return undefined;\n        }\n        var translate = this.beans.gridOptionsWrapper.getLocaleTextFunc();\n        var label = translate(selected ? 'ariaRowDeselect' : 'ariaRowSelect', \"Press SPACE to \" + (selected ? 'deselect' : 'select') + \" this row.\");\n        return label;\n    };\n    RowCtrl.prototype.isUseAnimationFrameForCreate = function () {\n        return this.useAnimationFrameForCreate;\n    };\n    RowCtrl.prototype.addHoverFunctionality = function (eRow) {\n        var _this = this;\n        // because we use animation frames to do this, it's possible the row no longer exists\n        // by the time we get to add it\n        if (!this.active) {\n            return;\n        }\n        // because mouseenter and mouseleave do not propagate, we cannot listen on the gridPanel\n        // like we do for all the other mouse events.\n        // because of the pinning, we cannot simply add / remove the class based on the eRow. we\n        // have to check all eRow's (body & pinned). so the trick is if any of the rows gets a\n        // mouse hover, it sets such in the rowNode, and then all three reflect the change as\n        // all are listening for event on the row node.\n        // step 1 - add listener, to set flag on row node\n        this.addManagedListener(eRow, 'mouseenter', function () { return _this.rowNode.onMouseEnter(); });\n        this.addManagedListener(eRow, 'mouseleave', function () { return _this.rowNode.onMouseLeave(); });\n        // step 2 - listen for changes on row node (which any eRow can trigger)\n        this.addManagedListener(this.rowNode, RowNode.EVENT_MOUSE_ENTER, function () {\n            // if hover turned off, we don't add the class. we do this here so that if the application\n            // toggles this property mid way, we remove the hover form the last row, but we stop\n            // adding hovers from that point onwards.\n            if (!_this.beans.gridOptionsWrapper.isSuppressRowHoverHighlight()) {\n                addCssClass(eRow, 'ag-row-hover');\n            }\n        });\n        this.addManagedListener(this.rowNode, RowNode.EVENT_MOUSE_LEAVE, function () {\n            removeCssClass(eRow, 'ag-row-hover');\n        });\n    };\n    // for animation, we don't want to animate entry or exit to a very far away pixel,\n    // otherwise the row would move so fast, it would appear to disappear. so this method\n    // moves the row closer to the viewport if it is far away, so the row slide in / out\n    // at a speed the user can see.\n    RowCtrl.prototype.roundRowTopToBounds = function (rowTop) {\n        var gridBodyCon = this.beans.ctrlsService.getGridBodyCtrl();\n        var range = gridBodyCon.getScrollFeature().getVScrollPosition();\n        var minPixel = this.applyPaginationOffset(range.top, true) - 100;\n        var maxPixel = this.applyPaginationOffset(range.bottom, true) + 100;\n        return Math.min(Math.max(minPixel, rowTop), maxPixel);\n    };\n    RowCtrl.prototype.getFrameworkOverrides = function () {\n        return this.beans.frameworkOverrides;\n    };\n    RowCtrl.prototype.onRowHeightChanged = function () {\n        // check for exists first - if the user is resetting the row height, then\n        // it will be null (or undefined) momentarily until the next time the flatten\n        // stage is called where the row will then update again with a new height\n        if (exists(this.rowNode.rowHeight)) {\n            var heightPx_1 = this.rowNode.rowHeight + \"px\";\n            this.allRowGuis.forEach(function (gui) { return gui.rowComp.setHeight(heightPx_1); });\n        }\n    };\n    RowCtrl.prototype.addEventListener = function (eventType, listener) {\n        if (eventType === 'renderedRowRemoved' || eventType === 'rowRemoved') {\n            eventType = Events.EVENT_VIRTUAL_ROW_REMOVED;\n            console.warn('AG Grid: Since version 11, event renderedRowRemoved is now called ' + Events.EVENT_VIRTUAL_ROW_REMOVED);\n        }\n        _super.prototype.addEventListener.call(this, eventType, listener);\n    };\n    RowCtrl.prototype.removeEventListener = function (eventType, listener) {\n        if (eventType === 'renderedRowRemoved' || eventType === 'rowRemoved') {\n            eventType = Events.EVENT_VIRTUAL_ROW_REMOVED;\n            console.warn('AG Grid: Since version 11, event renderedRowRemoved and rowRemoved is now called ' + Events.EVENT_VIRTUAL_ROW_REMOVED);\n        }\n        _super.prototype.removeEventListener.call(this, eventType, listener);\n    };\n    // note - this is NOT called by context, as we don't wire / unwire the CellComp for performance reasons.\n    RowCtrl.prototype.destroyFirstPass = function () {\n        this.active = false;\n        // why do we have this method? shouldn't everything below be added as a destroy func beside\n        // the corresponding create logic?\n        this.setupRemoveAnimation();\n        var event = this.createRowEvent(Events.EVENT_VIRTUAL_ROW_REMOVED);\n        this.dispatchEvent(event);\n        this.beans.eventService.dispatchEvent(event);\n        _super.prototype.destroy.call(this);\n    };\n    RowCtrl.prototype.setupRemoveAnimation = function () {\n        var rowStillVisibleJustNotInViewport = this.rowNode.rowTop != null;\n        if (rowStillVisibleJustNotInViewport) {\n            // if the row is not rendered, but in viewport, it means it has moved,\n            // so we animate the row out. if the new location is very far away,\n            // the animation will be so fast the row will look like it's just disappeared,\n            // so instead we animate to a position just outside the viewport.\n            var rowTop = this.roundRowTopToBounds(this.rowNode.rowTop);\n            this.setRowTop(rowTop);\n        }\n        else {\n            this.allRowGuis.forEach(function (gui) { return gui.rowComp.addOrRemoveCssClass('ag-opacity-zero', true); });\n        }\n    };\n    RowCtrl.prototype.destroySecondPass = function () {\n        this.allRowGuis.length = 0;\n        var destroyCellCtrls = function (ctrls) {\n            ctrls.list.forEach(function (c) { return c.destroy(); });\n            return { list: [], map: {} };\n        };\n        this.centerCellCtrls = destroyCellCtrls(this.centerCellCtrls);\n        this.leftCellCtrls = destroyCellCtrls(this.leftCellCtrls);\n        this.rightCellCtrls = destroyCellCtrls(this.rightCellCtrls);\n    };\n    RowCtrl.prototype.setFocusedClasses = function () {\n        var _this = this;\n        this.allRowGuis.forEach(function (gui) {\n            gui.rowComp.addOrRemoveCssClass('ag-row-focus', _this.rowFocused);\n            gui.rowComp.addOrRemoveCssClass('ag-row-no-focus', !_this.rowFocused);\n        });\n    };\n    RowCtrl.prototype.onCellFocusChanged = function () {\n        var rowFocused = this.beans.focusService.isRowFocused(this.rowNode.rowIndex, this.rowNode.rowPinned);\n        if (rowFocused !== this.rowFocused) {\n            this.rowFocused = rowFocused;\n            this.setFocusedClasses();\n        }\n        // if we are editing, then moving the focus out of a row will stop editing\n        if (!rowFocused && this.editingRow) {\n            this.stopEditing(false);\n        }\n    };\n    RowCtrl.prototype.onPaginationChanged = function () {\n        var currentPage = this.beans.paginationProxy.getCurrentPage();\n        // it is possible this row is in the new page, but the page number has changed, which means\n        // it needs to reposition itself relative to the new page\n        if (this.paginationPage !== currentPage) {\n            this.paginationPage = currentPage;\n            this.onTopChanged();\n        }\n    };\n    RowCtrl.prototype.onTopChanged = function () {\n        this.setRowTop(this.rowNode.rowTop);\n    };\n    RowCtrl.prototype.onPaginationPixelOffsetChanged = function () {\n        // the pixel offset is used when calculating rowTop to set on the row DIV\n        this.onTopChanged();\n    };\n    // applies pagination offset, eg if on second page, and page height is 500px, then removes\n    // 500px from the top position, so a row with rowTop 600px is displayed at location 100px.\n    // reverse will take the offset away rather than add.\n    RowCtrl.prototype.applyPaginationOffset = function (topPx, reverse) {\n        if (reverse === void 0) { reverse = false; }\n        if (this.rowNode.isRowPinned()) {\n            return topPx;\n        }\n        var pixelOffset = this.beans.paginationProxy.getPixelOffset();\n        var multiplier = reverse ? 1 : -1;\n        return topPx + (pixelOffset * multiplier);\n    };\n    RowCtrl.prototype.setRowTop = function (pixels) {\n        // print layout uses normal flow layout for row positioning\n        if (this.printLayout) {\n            return;\n        }\n        // need to make sure rowTop is not null, as this can happen if the node was once\n        // visible (ie parent group was expanded) but is now not visible\n        if (exists(pixels)) {\n            var afterPaginationPixels = this.applyPaginationOffset(pixels);\n            var afterScalingPixels = this.rowNode.isRowPinned() ? afterPaginationPixels : this.beans.rowContainerHeightService.getRealPixelPosition(afterPaginationPixels);\n            var topPx = afterScalingPixels + \"px\";\n            this.setRowTopStyle(topPx);\n        }\n    };\n    RowCtrl.prototype.getInitialRowTop = function () {\n        return this.initialTop;\n    };\n    RowCtrl.prototype.getInitialTransform = function () {\n        return this.initialTransform;\n    };\n    RowCtrl.prototype.setInitialRowTop = function () {\n        // print layout uses normal flow layout for row positioning\n        if (this.printLayout) {\n            return '';\n        }\n        // if sliding in, we take the old row top. otherwise we just set the current row top.\n        var pixels = this.slideRowIn ? this.roundRowTopToBounds(this.rowNode.oldRowTop) : this.rowNode.rowTop;\n        var afterPaginationPixels = this.applyPaginationOffset(pixels);\n        // we don't apply scaling if row is pinned\n        var afterScalingPixels = this.rowNode.isRowPinned() ? afterPaginationPixels : this.beans.rowContainerHeightService.getRealPixelPosition(afterPaginationPixels);\n        var res = afterScalingPixels + 'px';\n        var suppressRowTransform = this.beans.gridOptionsWrapper.isSuppressRowTransform();\n        if (suppressRowTransform) {\n            this.initialTop = res;\n        }\n        else {\n            this.initialTransform = \"translateY(\" + res + \")\";\n        }\n    };\n    RowCtrl.prototype.setRowTopStyle = function (topPx) {\n        var suppressRowTransform = this.beans.gridOptionsWrapper.isSuppressRowTransform();\n        this.allRowGuis.forEach(function (gui) { return suppressRowTransform ?\n            gui.rowComp.setTop(topPx) :\n            gui.rowComp.setTransform(\"translateY(\" + topPx + \")\"); });\n    };\n    RowCtrl.prototype.getRowNode = function () {\n        return this.rowNode;\n    };\n    RowCtrl.prototype.getCellCtrl = function (column) {\n        // first up, check for cell directly linked to this column\n        var res = null;\n        this.getAllCellCtrls().forEach(function (cellCtrl) {\n            if (cellCtrl.getColumn() == column) {\n                res = cellCtrl;\n            }\n        });\n        if (res != null) {\n            return res;\n        }\n        // second up, if not found, then check for spanned cols.\n        // we do this second (and not at the same time) as this is\n        // more expensive, as spanning cols is a\n        // infrequently used feature so we don't need to do this most\n        // of the time\n        this.getAllCellCtrls().forEach(function (cellCtrl) {\n            if (cellCtrl.getColSpanningList().indexOf(column) >= 0) {\n                res = cellCtrl;\n            }\n        });\n        return res;\n    };\n    RowCtrl.prototype.onRowIndexChanged = function () {\n        // we only bother updating if the rowIndex is present. if it is not present, it means this row\n        // is child of a group node, and the group node was closed, it's the only way to have no row index.\n        // when this happens, row is about to be de-rendered, so we don't care, rowComp is about to die!\n        if (this.rowNode.rowIndex != null) {\n            this.onCellFocusChanged();\n            this.updateRowIndexes();\n        }\n    };\n    RowCtrl.prototype.updateRowIndexes = function () {\n        var _this = this;\n        var rowIndexStr = this.rowNode.getRowIndexString();\n        var headerRowCount = this.beans.headerNavigationService.getHeaderRowCount();\n        var rowIsEven = this.rowNode.rowIndex % 2 === 0;\n        this.allRowGuis.forEach(function (c) {\n            c.rowComp.setRowIndex(rowIndexStr);\n            c.rowComp.setAriaRowIndex(headerRowCount + _this.rowNode.rowIndex + 1);\n            c.rowComp.addOrRemoveCssClass('ag-row-even', rowIsEven);\n            c.rowComp.addOrRemoveCssClass('ag-row-odd', !rowIsEven);\n        });\n    };\n    // returns the pinned left container, either the normal one, or the embedded full with one if exists\n    RowCtrl.prototype.getPinnedLeftRowElement = function () {\n        return this.leftGui ? this.leftGui.element : undefined;\n    };\n    // returns the pinned right container, either the normal one, or the embedded full with one if exists\n    RowCtrl.prototype.getPinnedRightRowElement = function () {\n        return this.rightGui ? this.rightGui.element : undefined;\n    };\n    // returns the body container, either the normal one, or the embedded full with one if exists\n    RowCtrl.prototype.getBodyRowElement = function () {\n        return this.centerGui ? this.centerGui.element : undefined;\n    };\n    // returns the full width container\n    RowCtrl.prototype.getFullWidthRowElement = function () {\n        return this.fullWidthGui ? this.fullWidthGui.element : undefined;\n    };\n    RowCtrl.DOM_DATA_KEY_RENDERED_ROW = 'renderedRow';\n    return RowCtrl;\n}(BeanStub));\nexport { RowCtrl };\n"]},"metadata":{},"sourceType":"module"}