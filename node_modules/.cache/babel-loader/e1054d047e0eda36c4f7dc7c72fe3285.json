{"ast":null,"code":"/**\n * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v26.0.0\n * @link http://www.ag-grid.com/\n * @license MIT\n */\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { Autowired, PreDestroy, PostConstruct } from \"../../context/context\";\nimport { Column } from \"../../entities/column\";\nimport { DragAndDropService, DragSourceType } from \"../../dragAndDrop/dragAndDropService\";\nimport { Constants } from \"../../constants/constants\";\nimport { CssClassApplier } from \"../cssClassApplier\";\nimport { Events } from \"../../events\";\nimport { HoverFeature } from \"../hoverFeature\";\nimport { SetLeftFeature } from \"../../rendering/features/setLeftFeature\";\nimport { SelectAllFeature } from \"./selectAllFeature\";\nimport { RefSelector } from \"../../widgets/componentAnnotations\";\nimport { TouchListener } from \"../../widgets/touchListener\";\nimport { AbstractHeaderWrapper } from \"./abstractHeaderWrapper\";\nimport { setAriaSort, getAriaSortState, removeAriaSort } from \"../../utils/aria\";\nimport { addCssClass, addOrRemoveCssClass, removeCssClass, setDisplayed } from \"../../utils/dom\";\nimport { KeyCode } from '../../constants/keyCode';\nimport { ManagedFocusFeature } from \"../../widgets/managedFocusFeature\";\n\nvar HeaderWrapperComp = function (_super) {\n  __extends(HeaderWrapperComp, _super);\n\n  function HeaderWrapperComp(column, pinned) {\n    var _this = _super.call(this, HeaderWrapperComp.TEMPLATE) || this;\n\n    _this.headerCompVersion = 0;\n    _this.refreshFunctions = [];\n    _this.column = column;\n    _this.pinned = pinned;\n    return _this;\n  }\n\n  HeaderWrapperComp.prototype.postConstruct = function () {\n    this.colDefVersion = this.columnModel.getColDefVersion();\n    this.updateState();\n    this.setupWidth();\n    this.setupMovingCss();\n    this.setupTooltip();\n    this.setupResize();\n    this.setupMenuClass();\n    this.setupSortableClass();\n    this.addColumnHoverListener();\n    this.addActiveHeaderMouseListeners();\n    this.createManagedBean(new ManagedFocusFeature(this.getFocusableElement(), {\n      shouldStopEventPropagation: this.shouldStopEventPropagation.bind(this),\n      onTabKeyDown: this.onTabKeyDown.bind(this),\n      handleKeyDown: this.handleKeyDown.bind(this),\n      onFocusIn: this.onFocusIn.bind(this),\n      onFocusOut: this.onFocusOut.bind(this)\n    }));\n    this.createManagedBean(new HoverFeature([this.column], this.getGui()));\n    this.addManagedListener(this.column, Column.EVENT_FILTER_ACTIVE_CHANGED, this.onFilterChanged.bind(this));\n    this.onFilterChanged();\n    this.createManagedBean(new SelectAllFeature(this.cbSelectAll, this.column));\n    this.cbSelectAll.setParentComponent(this);\n    this.createManagedBean(new SetLeftFeature(this.column, this.getGui(), this.beans));\n    this.addAttributes();\n    CssClassApplier.addHeaderClassesFromColDef(this.column.getColDef(), this.getGui(), this.gridOptionsWrapper, this.column, null);\n    this.addManagedListener(this.eventService, Events.EVENT_NEW_COLUMNS_LOADED, this.onNewColumnsLoaded.bind(this));\n    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_VALUE_CHANGED, this.onColumnValueChanged.bind(this));\n    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_ROW_GROUP_CHANGED, this.onColumnRowGroupChanged.bind(this));\n    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_PIVOT_CHANGED, this.onColumnPivotChanged.bind(this));\n    this.appendHeaderComp();\n  };\n\n  HeaderWrapperComp.prototype.onColumnRowGroupChanged = function () {\n    this.checkDisplayName();\n  };\n\n  HeaderWrapperComp.prototype.onColumnPivotChanged = function () {\n    this.checkDisplayName();\n  };\n\n  HeaderWrapperComp.prototype.onColumnValueChanged = function () {\n    this.checkDisplayName();\n  };\n\n  HeaderWrapperComp.prototype.checkDisplayName = function () {\n    // display name can change if aggFunc different, eg sum(Gold) is now max(Gold)\n    if (this.displayName !== this.calculateDisplayName()) {\n      this.refresh();\n    }\n  };\n\n  HeaderWrapperComp.prototype.updateState = function () {\n    var colDef = this.column.getColDef();\n    this.sortable = colDef.sortable;\n    this.displayName = this.calculateDisplayName();\n    this.draggable = this.workOutDraggable();\n  };\n\n  HeaderWrapperComp.prototype.calculateDisplayName = function () {\n    return this.columnModel.getDisplayNameForColumn(this.column, 'header', true);\n  };\n\n  HeaderWrapperComp.prototype.onNewColumnsLoaded = function () {\n    var colDefVersionNow = this.columnModel.getColDefVersion();\n\n    if (colDefVersionNow != this.colDefVersion) {\n      this.colDefVersion = colDefVersionNow;\n      this.refresh();\n    }\n  };\n\n  HeaderWrapperComp.prototype.refresh = function () {\n    this.updateState();\n    this.refreshHeaderComp();\n    this.refreshFunctions.forEach(function (f) {\n      return f();\n    });\n  };\n\n  HeaderWrapperComp.prototype.refreshHeaderComp = function () {\n    // if no header comp created yet, it's cos of async creation, so first version is yet\n    // to get here, in which case nothing to refresh\n    if (!this.headerComp) {\n      return;\n    }\n\n    var colDef = this.column.getColDef();\n    var newHeaderCompConfigured = this.colDefHeaderComponent != colDef.headerComponent || this.colDefHeaderComponentFramework != colDef.headerComponentFramework;\n    var headerCompRefreshed = newHeaderCompConfigured ? false : this.attemptHeaderCompRefresh();\n\n    if (headerCompRefreshed) {\n      var dragSourceIsMissing = this.draggable && !this.moveDragSource;\n      var dragSourceNeedsRemoving = !this.draggable && this.moveDragSource;\n\n      if (dragSourceIsMissing || dragSourceNeedsRemoving) {\n        this.attachDraggingToHeaderComp();\n      }\n    } else {\n      this.appendHeaderComp();\n    }\n  };\n\n  HeaderWrapperComp.prototype.destroyHeaderComp = function () {\n    if (this.headerComp) {\n      this.getGui().removeChild(this.headerCompGui);\n      this.headerComp = this.destroyBean(this.headerComp);\n      this.headerCompGui = undefined;\n    }\n\n    this.removeMoveDragSource();\n  };\n\n  HeaderWrapperComp.prototype.removeMoveDragSource = function () {\n    if (this.moveDragSource) {\n      this.dragAndDropService.removeDragSource(this.moveDragSource);\n      this.moveDragSource = undefined;\n    }\n  };\n\n  HeaderWrapperComp.prototype.attemptHeaderCompRefresh = function () {\n    // if no refresh method, then we want to replace the headerComp\n    if (!this.headerComp.refresh) {\n      return false;\n    } // if the cell renderer has a refresh method, we call this instead of doing a refresh\n\n\n    var params = this.createParams(); // take any custom params off of the user\n\n    var finalParams = this.userComponentFactory.mergeParamsWithApplicationProvidedParams(this.getComponentHolder(), 'headerComponent', params);\n    var res = this.headerComp.refresh(finalParams);\n    return res;\n  };\n\n  HeaderWrapperComp.prototype.addActiveHeaderMouseListeners = function () {\n    var _this = this;\n\n    var listener = function (e) {\n      return _this.setActiveHeader(e.type === 'mouseenter');\n    };\n\n    this.addManagedListener(this.getGui(), 'mouseenter', listener);\n    this.addManagedListener(this.getGui(), 'mouseleave', listener);\n  };\n\n  HeaderWrapperComp.prototype.setActiveHeader = function (active) {\n    addOrRemoveCssClass(this.getGui(), 'ag-header-active', active);\n  };\n\n  HeaderWrapperComp.prototype.onFocusIn = function (e) {\n    if (!this.getGui().contains(e.relatedTarget)) {\n      var headerRow = this.getParentComponent();\n      this.focusService.setFocusedHeader(headerRow.getRowIndex(), this.getColumn());\n    }\n\n    this.setActiveHeader(true);\n  };\n\n  HeaderWrapperComp.prototype.onFocusOut = function (e) {\n    if (this.getGui().contains(e.relatedTarget)) {\n      return;\n    }\n\n    this.setActiveHeader(false);\n  };\n\n  HeaderWrapperComp.prototype.handleKeyDown = function (e) {\n    var headerComp = this.headerComp;\n\n    if (!headerComp) {\n      return;\n    }\n\n    if (e.keyCode === KeyCode.SPACE) {\n      var checkbox = this.cbSelectAll;\n\n      if (checkbox.isDisplayed() && !checkbox.getGui().contains(document.activeElement)) {\n        e.preventDefault();\n        checkbox.setValue(!checkbox.getValue());\n      }\n    }\n\n    if (e.keyCode === KeyCode.ENTER) {\n      if (e.ctrlKey || e.metaKey) {\n        if (this.menuEnabled && headerComp.showMenu) {\n          e.preventDefault();\n          headerComp.showMenu();\n        }\n      } else if (this.sortable) {\n        var multiSort = e.shiftKey;\n        this.sortController.progressSort(this.column, multiSort, \"uiColumnSorted\");\n      }\n    }\n  };\n\n  HeaderWrapperComp.prototype.onTabKeyDown = function () {};\n\n  HeaderWrapperComp.prototype.getComponentHolder = function () {\n    return this.column.getColDef();\n  };\n\n  HeaderWrapperComp.prototype.addColumnHoverListener = function () {\n    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_HOVER_CHANGED, this.onColumnHover.bind(this));\n    this.onColumnHover();\n  };\n\n  HeaderWrapperComp.prototype.onColumnHover = function () {\n    if (!this.gridOptionsWrapper.isColumnHoverHighlight()) {\n      return;\n    }\n\n    var isHovered = this.columnHoverService.isHovered(this.column);\n    addOrRemoveCssClass(this.getGui(), 'ag-column-hover', isHovered);\n  };\n\n  HeaderWrapperComp.prototype.setupSortableClass = function () {\n    var _this = this;\n\n    var eGui = this.getGui();\n\n    var updateSortableCssClass = function () {\n      addOrRemoveCssClass(eGui, 'ag-header-cell-sortable', !!_this.sortable);\n    };\n\n    var updateAriaSort = function () {\n      if (_this.sortable) {\n        setAriaSort(eGui, getAriaSortState(_this.column));\n      } else {\n        removeAriaSort(eGui);\n      }\n    };\n\n    updateSortableCssClass();\n    updateAriaSort();\n    this.refreshFunctions.push(updateSortableCssClass);\n    this.refreshFunctions.push(updateAriaSort);\n    this.addManagedListener(this.column, Column.EVENT_SORT_CHANGED, updateAriaSort.bind(this));\n  };\n\n  HeaderWrapperComp.prototype.onFilterChanged = function () {\n    var filterPresent = this.column.isFilterActive();\n    addOrRemoveCssClass(this.getGui(), 'ag-header-cell-filtered', filterPresent);\n  };\n\n  HeaderWrapperComp.prototype.appendHeaderComp = function () {\n    this.headerCompVersion++;\n    var colDef = this.column.getColDef();\n    this.colDefHeaderComponent = colDef.headerComponent;\n    this.colDefHeaderComponentFramework = colDef.headerComponentFramework;\n    var params = this.createParams();\n    var callback = this.afterHeaderCompCreated.bind(this, this.headerCompVersion);\n    this.userComponentFactory.newHeaderComponent(params).then(callback);\n  };\n\n  HeaderWrapperComp.prototype.createParams = function () {\n    var _this = this;\n\n    var colDef = this.column.getColDef();\n    this.menuEnabled = this.menuFactory.isMenuEnabled(this.column) && !colDef.suppressMenu;\n    var params = {\n      column: this.column,\n      displayName: this.displayName,\n      enableSorting: colDef.sortable,\n      enableMenu: this.menuEnabled,\n      showColumnMenu: function (source) {\n        _this.gridApi.showColumnMenuAfterButtonClick(_this.column, source);\n      },\n      progressSort: function (multiSort) {\n        _this.sortController.progressSort(_this.column, !!multiSort, \"uiColumnSorted\");\n      },\n      setSort: function (sort, multiSort) {\n        _this.sortController.setSortForColumn(_this.column, sort, !!multiSort, \"uiColumnSorted\");\n      },\n      api: this.gridApi,\n      columnApi: this.columnApi,\n      context: this.gridOptionsWrapper.getContext(),\n      eGridHeader: this.getGui()\n    };\n    return params;\n  };\n\n  HeaderWrapperComp.prototype.afterHeaderCompCreated = function (version, headerComp) {\n    if (version != this.headerCompVersion || !this.isAlive()) {\n      this.destroyBean(headerComp);\n      return;\n    }\n\n    this.destroyHeaderComp();\n    this.headerComp = headerComp;\n    this.headerCompGui = headerComp.getGui();\n    this.getGui().appendChild(this.headerCompGui);\n    this.attachDraggingToHeaderComp();\n  };\n\n  HeaderWrapperComp.prototype.onColumnMovingChanged = function () {\n    // this function adds or removes the moving css, based on if the col is moving.\n    // this is what makes the header go dark when it is been moved (gives impression to\n    // user that the column was picked up).\n    if (this.column.isMoving()) {\n      addCssClass(this.getGui(), 'ag-header-cell-moving');\n    } else {\n      removeCssClass(this.getGui(), 'ag-header-cell-moving');\n    }\n  };\n\n  HeaderWrapperComp.prototype.workOutDraggable = function () {\n    var colDef = this.column.getColDef();\n    var isSuppressMovableColumns = this.gridOptionsWrapper.isSuppressMovableColumns();\n    var colCanMove = !isSuppressMovableColumns && !colDef.suppressMovable && !colDef.lockPosition; // we should still be allowed drag the column, even if it can't be moved, if the column\n    // can be dragged to a rowGroup or pivot drop zone\n\n    return !!colCanMove || !!colDef.enableRowGroup || !!colDef.enablePivot;\n  };\n\n  HeaderWrapperComp.prototype.attachDraggingToHeaderComp = function () {\n    var _this = this;\n\n    this.removeMoveDragSource();\n\n    if (!this.draggable) {\n      return;\n    }\n\n    this.moveDragSource = {\n      type: DragSourceType.HeaderCell,\n      eElement: this.headerCompGui,\n      defaultIconName: DragAndDropService.ICON_HIDE,\n      getDragItem: function () {\n        return _this.createDragItem();\n      },\n      dragItemName: this.displayName,\n      onDragStarted: function () {\n        return _this.column.setMoving(true, \"uiColumnMoved\");\n      },\n      onDragStopped: function () {\n        return _this.column.setMoving(false, \"uiColumnMoved\");\n      }\n    };\n    this.dragAndDropService.addDragSource(this.moveDragSource, true);\n  };\n\n  HeaderWrapperComp.prototype.createDragItem = function () {\n    var visibleState = {};\n    visibleState[this.column.getId()] = this.column.isVisible();\n    return {\n      columns: [this.column],\n      visibleState: visibleState\n    };\n  };\n\n  HeaderWrapperComp.prototype.setupResize = function () {\n    var _this = this;\n\n    var colDef = this.getComponentHolder();\n    var destroyResizeFuncs = [];\n    var canResize;\n    var canAutosize;\n\n    var addResize = function () {\n      setDisplayed(_this.eResize, canResize);\n\n      if (!canResize) {\n        return;\n      }\n\n      var finishedWithResizeFunc = _this.horizontalResizeService.addResizeBar({\n        eResizeBar: _this.eResize,\n        onResizeStart: _this.onResizeStart.bind(_this),\n        onResizing: _this.onResizing.bind(_this, false),\n        onResizeEnd: _this.onResizing.bind(_this, true)\n      });\n\n      destroyResizeFuncs.push(finishedWithResizeFunc);\n\n      if (canAutosize) {\n        var skipHeaderOnAutoSize_1 = _this.gridOptionsWrapper.isSkipHeaderOnAutoSize();\n\n        var autoSizeColListener_1 = function () {\n          _this.columnModel.autoSizeColumn(_this.column, skipHeaderOnAutoSize_1, \"uiColumnResized\");\n        };\n\n        _this.eResize.addEventListener('dblclick', autoSizeColListener_1);\n\n        var touchListener_1 = new TouchListener(_this.eResize);\n        touchListener_1.addEventListener(TouchListener.EVENT_DOUBLE_TAP, autoSizeColListener_1);\n\n        _this.addDestroyFunc(function () {\n          _this.eResize.removeEventListener('dblclick', autoSizeColListener_1);\n\n          touchListener_1.removeEventListener(TouchListener.EVENT_DOUBLE_TAP, autoSizeColListener_1);\n          touchListener_1.destroy();\n        });\n      }\n    };\n\n    var removeResize = function () {\n      destroyResizeFuncs.forEach(function (f) {\n        return f();\n      });\n      destroyResizeFuncs.length = 0;\n    };\n\n    var refresh = function () {\n      var resize = _this.column.isResizable();\n\n      var autoSize = !_this.gridOptionsWrapper.isSuppressAutoSize() && !colDef.suppressAutoSize;\n      var propertyChange = resize !== canResize || autoSize !== canAutosize;\n\n      if (propertyChange) {\n        canResize = resize;\n        canAutosize = autoSize;\n        removeResize();\n        addResize();\n      }\n    };\n\n    refresh();\n    this.addDestroyFunc(removeResize);\n    this.refreshFunctions.push(refresh);\n  };\n\n  HeaderWrapperComp.prototype.onResizing = function (finished, resizeAmount) {\n    var resizeAmountNormalised = this.normaliseResizeAmount(resizeAmount);\n    var columnWidths = [{\n      key: this.column,\n      newWidth: this.resizeStartWidth + resizeAmountNormalised\n    }];\n    this.columnModel.setColumnWidths(columnWidths, this.resizeWithShiftKey, finished, \"uiColumnDragged\");\n\n    if (finished) {\n      removeCssClass(this.getGui(), 'ag-column-resizing');\n    }\n  };\n\n  HeaderWrapperComp.prototype.onResizeStart = function (shiftKey) {\n    this.resizeStartWidth = this.column.getActualWidth();\n    this.resizeWithShiftKey = shiftKey;\n    addCssClass(this.getGui(), 'ag-column-resizing');\n  };\n\n  HeaderWrapperComp.prototype.getTooltipParams = function () {\n    var res = _super.prototype.getTooltipParams.call(this);\n\n    res.location = 'header';\n    res.colDef = this.column.getColDef();\n    return res;\n  };\n\n  HeaderWrapperComp.prototype.setupTooltip = function () {\n    var _this = this;\n\n    var refresh = function () {\n      var newTooltipText = _this.column.getColDef().headerTooltip;\n\n      _this.setTooltip(newTooltipText);\n    };\n\n    refresh();\n    this.refreshFunctions.push(refresh);\n  };\n\n  HeaderWrapperComp.prototype.setupMovingCss = function () {\n    this.addManagedListener(this.column, Column.EVENT_MOVING_CHANGED, this.onColumnMovingChanged.bind(this));\n    this.onColumnMovingChanged();\n  };\n\n  HeaderWrapperComp.prototype.addAttributes = function () {\n    this.getGui().setAttribute(\"col-id\", this.column.getColId());\n  };\n\n  HeaderWrapperComp.prototype.setupWidth = function () {\n    this.addManagedListener(this.column, Column.EVENT_WIDTH_CHANGED, this.onColumnWidthChanged.bind(this));\n    this.onColumnWidthChanged();\n  };\n\n  HeaderWrapperComp.prototype.setupMenuClass = function () {\n    this.addManagedListener(this.column, Column.EVENT_MENU_VISIBLE_CHANGED, this.onMenuVisible.bind(this));\n  };\n\n  HeaderWrapperComp.prototype.onMenuVisible = function () {\n    this.addOrRemoveCssClass('ag-column-menu-visible', this.column.isMenuVisible());\n  };\n\n  HeaderWrapperComp.prototype.onColumnWidthChanged = function () {\n    this.getGui().style.width = this.column.getActualWidth() + 'px';\n  }; // optionally inverts the drag, depending on pinned and RTL\n  // note - this method is duplicated in RenderedHeaderGroupCell - should refactor out?\n\n\n  HeaderWrapperComp.prototype.normaliseResizeAmount = function (dragChange) {\n    var result = dragChange;\n\n    if (this.gridOptionsWrapper.isEnableRtl()) {\n      // for RTL, dragging left makes the col bigger, except when pinning left\n      if (this.pinned !== Constants.PINNED_LEFT) {\n        result *= -1;\n      }\n    } else {\n      // for LTR (ie normal), dragging left makes the col smaller, except when pinning right\n      if (this.pinned === Constants.PINNED_RIGHT) {\n        result *= -1;\n      }\n    }\n\n    return result;\n  };\n\n  HeaderWrapperComp.TEMPLATE = \"<div class=\\\"ag-header-cell\\\" role=\\\"columnheader\\\" unselectable=\\\"on\\\" tabindex=\\\"-1\\\">\\n            <div ref=\\\"eResize\\\" class=\\\"ag-header-cell-resize\\\" role=\\\"presentation\\\"></div>\\n            <ag-checkbox ref=\\\"cbSelectAll\\\" class=\\\"ag-header-select-all\\\" role=\\\"presentation\\\"></ag-checkbox>\\n        </div>\";\n\n  __decorate([Autowired('dragAndDropService')], HeaderWrapperComp.prototype, \"dragAndDropService\", void 0);\n\n  __decorate([Autowired('columnModel')], HeaderWrapperComp.prototype, \"columnModel\", void 0);\n\n  __decorate([Autowired('horizontalResizeService')], HeaderWrapperComp.prototype, \"horizontalResizeService\", void 0);\n\n  __decorate([Autowired('menuFactory')], HeaderWrapperComp.prototype, \"menuFactory\", void 0);\n\n  __decorate([Autowired('gridApi')], HeaderWrapperComp.prototype, \"gridApi\", void 0);\n\n  __decorate([Autowired('columnApi')], HeaderWrapperComp.prototype, \"columnApi\", void 0);\n\n  __decorate([Autowired('sortController')], HeaderWrapperComp.prototype, \"sortController\", void 0);\n\n  __decorate([Autowired('userComponentFactory')], HeaderWrapperComp.prototype, \"userComponentFactory\", void 0);\n\n  __decorate([Autowired('columnHoverService')], HeaderWrapperComp.prototype, \"columnHoverService\", void 0);\n\n  __decorate([Autowired('beans')], HeaderWrapperComp.prototype, \"beans\", void 0);\n\n  __decorate([RefSelector('eResize')], HeaderWrapperComp.prototype, \"eResize\", void 0);\n\n  __decorate([RefSelector('cbSelectAll')], HeaderWrapperComp.prototype, \"cbSelectAll\", void 0);\n\n  __decorate([PostConstruct], HeaderWrapperComp.prototype, \"postConstruct\", null);\n\n  __decorate([PreDestroy], HeaderWrapperComp.prototype, \"destroyHeaderComp\", null);\n\n  return HeaderWrapperComp;\n}(AbstractHeaderWrapper);\n\nexport { HeaderWrapperComp };","map":{"version":3,"sources":["/Users/mphelps/react-app/TasQDashboard-main/node_modules/@ag-grid-community/core/dist/es6/headerRendering/header/headerWrapperComp.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Autowired","PreDestroy","PostConstruct","Column","DragAndDropService","DragSourceType","Constants","CssClassApplier","Events","HoverFeature","SetLeftFeature","SelectAllFeature","RefSelector","TouchListener","AbstractHeaderWrapper","setAriaSort","getAriaSortState","removeAriaSort","addCssClass","addOrRemoveCssClass","removeCssClass","setDisplayed","KeyCode","ManagedFocusFeature","HeaderWrapperComp","_super","column","pinned","_this","call","TEMPLATE","headerCompVersion","refreshFunctions","postConstruct","colDefVersion","columnModel","getColDefVersion","updateState","setupWidth","setupMovingCss","setupTooltip","setupResize","setupMenuClass","setupSortableClass","addColumnHoverListener","addActiveHeaderMouseListeners","createManagedBean","getFocusableElement","shouldStopEventPropagation","bind","onTabKeyDown","handleKeyDown","onFocusIn","onFocusOut","getGui","addManagedListener","EVENT_FILTER_ACTIVE_CHANGED","onFilterChanged","cbSelectAll","setParentComponent","beans","addAttributes","addHeaderClassesFromColDef","getColDef","gridOptionsWrapper","eventService","EVENT_NEW_COLUMNS_LOADED","onNewColumnsLoaded","EVENT_COLUMN_VALUE_CHANGED","onColumnValueChanged","EVENT_COLUMN_ROW_GROUP_CHANGED","onColumnRowGroupChanged","EVENT_COLUMN_PIVOT_CHANGED","onColumnPivotChanged","appendHeaderComp","checkDisplayName","displayName","calculateDisplayName","refresh","colDef","sortable","draggable","workOutDraggable","getDisplayNameForColumn","colDefVersionNow","refreshHeaderComp","forEach","f","headerComp","newHeaderCompConfigured","colDefHeaderComponent","headerComponent","colDefHeaderComponentFramework","headerComponentFramework","headerCompRefreshed","attemptHeaderCompRefresh","dragSourceIsMissing","moveDragSource","dragSourceNeedsRemoving","attachDraggingToHeaderComp","destroyHeaderComp","removeChild","headerCompGui","destroyBean","undefined","removeMoveDragSource","dragAndDropService","removeDragSource","params","createParams","finalParams","userComponentFactory","mergeParamsWithApplicationProvidedParams","getComponentHolder","res","listener","e","setActiveHeader","type","active","contains","relatedTarget","headerRow","getParentComponent","focusService","setFocusedHeader","getRowIndex","getColumn","keyCode","SPACE","checkbox","isDisplayed","document","activeElement","preventDefault","setValue","getValue","ENTER","ctrlKey","metaKey","menuEnabled","showMenu","multiSort","shiftKey","sortController","progressSort","EVENT_COLUMN_HOVER_CHANGED","onColumnHover","isColumnHoverHighlight","isHovered","columnHoverService","eGui","updateSortableCssClass","updateAriaSort","push","EVENT_SORT_CHANGED","filterPresent","isFilterActive","callback","afterHeaderCompCreated","newHeaderComponent","then","menuFactory","isMenuEnabled","suppressMenu","enableSorting","enableMenu","showColumnMenu","source","gridApi","showColumnMenuAfterButtonClick","setSort","sort","setSortForColumn","api","columnApi","context","getContext","eGridHeader","version","isAlive","appendChild","onColumnMovingChanged","isMoving","isSuppressMovableColumns","colCanMove","suppressMovable","lockPosition","enableRowGroup","enablePivot","HeaderCell","eElement","defaultIconName","ICON_HIDE","getDragItem","createDragItem","dragItemName","onDragStarted","setMoving","onDragStopped","addDragSource","visibleState","getId","isVisible","columns","destroyResizeFuncs","canResize","canAutosize","addResize","eResize","finishedWithResizeFunc","horizontalResizeService","addResizeBar","eResizeBar","onResizeStart","onResizing","onResizeEnd","skipHeaderOnAutoSize_1","isSkipHeaderOnAutoSize","autoSizeColListener_1","autoSizeColumn","addEventListener","touchListener_1","EVENT_DOUBLE_TAP","addDestroyFunc","removeEventListener","destroy","removeResize","resize","isResizable","autoSize","isSuppressAutoSize","suppressAutoSize","propertyChange","finished","resizeAmount","resizeAmountNormalised","normaliseResizeAmount","columnWidths","newWidth","resizeStartWidth","setColumnWidths","resizeWithShiftKey","getActualWidth","getTooltipParams","location","newTooltipText","headerTooltip","setTooltip","EVENT_MOVING_CHANGED","setAttribute","getColId","EVENT_WIDTH_CHANGED","onColumnWidthChanged","EVENT_MENU_VISIBLE_CHANGED","onMenuVisible","isMenuVisible","style","width","dragChange","result","isEnableRtl","PINNED_LEFT","PINNED_RIGHT"],"mappings":"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","sourcesContent":["/**\n * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v26.0.0\n * @link http://www.ag-grid.com/\n * @license MIT\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Autowired, PreDestroy, PostConstruct } from \"../../context/context\";\nimport { Column } from \"../../entities/column\";\nimport { DragAndDropService, DragSourceType } from \"../../dragAndDrop/dragAndDropService\";\nimport { Constants } from \"../../constants/constants\";\nimport { CssClassApplier } from \"../cssClassApplier\";\nimport { Events } from \"../../events\";\nimport { HoverFeature } from \"../hoverFeature\";\nimport { SetLeftFeature } from \"../../rendering/features/setLeftFeature\";\nimport { SelectAllFeature } from \"./selectAllFeature\";\nimport { RefSelector } from \"../../widgets/componentAnnotations\";\nimport { TouchListener } from \"../../widgets/touchListener\";\nimport { AbstractHeaderWrapper } from \"./abstractHeaderWrapper\";\nimport { setAriaSort, getAriaSortState, removeAriaSort } from \"../../utils/aria\";\nimport { addCssClass, addOrRemoveCssClass, removeCssClass, setDisplayed } from \"../../utils/dom\";\nimport { KeyCode } from '../../constants/keyCode';\nimport { ManagedFocusFeature } from \"../../widgets/managedFocusFeature\";\nvar HeaderWrapperComp = /** @class */ (function (_super) {\n    __extends(HeaderWrapperComp, _super);\n    function HeaderWrapperComp(column, pinned) {\n        var _this = _super.call(this, HeaderWrapperComp.TEMPLATE) || this;\n        _this.headerCompVersion = 0;\n        _this.refreshFunctions = [];\n        _this.column = column;\n        _this.pinned = pinned;\n        return _this;\n    }\n    HeaderWrapperComp.prototype.postConstruct = function () {\n        this.colDefVersion = this.columnModel.getColDefVersion();\n        this.updateState();\n        this.setupWidth();\n        this.setupMovingCss();\n        this.setupTooltip();\n        this.setupResize();\n        this.setupMenuClass();\n        this.setupSortableClass();\n        this.addColumnHoverListener();\n        this.addActiveHeaderMouseListeners();\n        this.createManagedBean(new ManagedFocusFeature(this.getFocusableElement(), {\n            shouldStopEventPropagation: this.shouldStopEventPropagation.bind(this),\n            onTabKeyDown: this.onTabKeyDown.bind(this),\n            handleKeyDown: this.handleKeyDown.bind(this),\n            onFocusIn: this.onFocusIn.bind(this),\n            onFocusOut: this.onFocusOut.bind(this)\n        }));\n        this.createManagedBean(new HoverFeature([this.column], this.getGui()));\n        this.addManagedListener(this.column, Column.EVENT_FILTER_ACTIVE_CHANGED, this.onFilterChanged.bind(this));\n        this.onFilterChanged();\n        this.createManagedBean(new SelectAllFeature(this.cbSelectAll, this.column));\n        this.cbSelectAll.setParentComponent(this);\n        this.createManagedBean(new SetLeftFeature(this.column, this.getGui(), this.beans));\n        this.addAttributes();\n        CssClassApplier.addHeaderClassesFromColDef(this.column.getColDef(), this.getGui(), this.gridOptionsWrapper, this.column, null);\n        this.addManagedListener(this.eventService, Events.EVENT_NEW_COLUMNS_LOADED, this.onNewColumnsLoaded.bind(this));\n        this.addManagedListener(this.eventService, Events.EVENT_COLUMN_VALUE_CHANGED, this.onColumnValueChanged.bind(this));\n        this.addManagedListener(this.eventService, Events.EVENT_COLUMN_ROW_GROUP_CHANGED, this.onColumnRowGroupChanged.bind(this));\n        this.addManagedListener(this.eventService, Events.EVENT_COLUMN_PIVOT_CHANGED, this.onColumnPivotChanged.bind(this));\n        this.appendHeaderComp();\n    };\n    HeaderWrapperComp.prototype.onColumnRowGroupChanged = function () {\n        this.checkDisplayName();\n    };\n    HeaderWrapperComp.prototype.onColumnPivotChanged = function () {\n        this.checkDisplayName();\n    };\n    HeaderWrapperComp.prototype.onColumnValueChanged = function () {\n        this.checkDisplayName();\n    };\n    HeaderWrapperComp.prototype.checkDisplayName = function () {\n        // display name can change if aggFunc different, eg sum(Gold) is now max(Gold)\n        if (this.displayName !== this.calculateDisplayName()) {\n            this.refresh();\n        }\n    };\n    HeaderWrapperComp.prototype.updateState = function () {\n        var colDef = this.column.getColDef();\n        this.sortable = colDef.sortable;\n        this.displayName = this.calculateDisplayName();\n        this.draggable = this.workOutDraggable();\n    };\n    HeaderWrapperComp.prototype.calculateDisplayName = function () {\n        return this.columnModel.getDisplayNameForColumn(this.column, 'header', true);\n    };\n    HeaderWrapperComp.prototype.onNewColumnsLoaded = function () {\n        var colDefVersionNow = this.columnModel.getColDefVersion();\n        if (colDefVersionNow != this.colDefVersion) {\n            this.colDefVersion = colDefVersionNow;\n            this.refresh();\n        }\n    };\n    HeaderWrapperComp.prototype.refresh = function () {\n        this.updateState();\n        this.refreshHeaderComp();\n        this.refreshFunctions.forEach(function (f) { return f(); });\n    };\n    HeaderWrapperComp.prototype.refreshHeaderComp = function () {\n        // if no header comp created yet, it's cos of async creation, so first version is yet\n        // to get here, in which case nothing to refresh\n        if (!this.headerComp) {\n            return;\n        }\n        var colDef = this.column.getColDef();\n        var newHeaderCompConfigured = this.colDefHeaderComponent != colDef.headerComponent\n            || this.colDefHeaderComponentFramework != colDef.headerComponentFramework;\n        var headerCompRefreshed = newHeaderCompConfigured ? false : this.attemptHeaderCompRefresh();\n        if (headerCompRefreshed) {\n            var dragSourceIsMissing = this.draggable && !this.moveDragSource;\n            var dragSourceNeedsRemoving = !this.draggable && this.moveDragSource;\n            if (dragSourceIsMissing || dragSourceNeedsRemoving) {\n                this.attachDraggingToHeaderComp();\n            }\n        }\n        else {\n            this.appendHeaderComp();\n        }\n    };\n    HeaderWrapperComp.prototype.destroyHeaderComp = function () {\n        if (this.headerComp) {\n            this.getGui().removeChild(this.headerCompGui);\n            this.headerComp = this.destroyBean(this.headerComp);\n            this.headerCompGui = undefined;\n        }\n        this.removeMoveDragSource();\n    };\n    HeaderWrapperComp.prototype.removeMoveDragSource = function () {\n        if (this.moveDragSource) {\n            this.dragAndDropService.removeDragSource(this.moveDragSource);\n            this.moveDragSource = undefined;\n        }\n    };\n    HeaderWrapperComp.prototype.attemptHeaderCompRefresh = function () {\n        // if no refresh method, then we want to replace the headerComp\n        if (!this.headerComp.refresh) {\n            return false;\n        }\n        // if the cell renderer has a refresh method, we call this instead of doing a refresh\n        var params = this.createParams();\n        // take any custom params off of the user\n        var finalParams = this.userComponentFactory.mergeParamsWithApplicationProvidedParams(this.getComponentHolder(), 'headerComponent', params);\n        var res = this.headerComp.refresh(finalParams);\n        return res;\n    };\n    HeaderWrapperComp.prototype.addActiveHeaderMouseListeners = function () {\n        var _this = this;\n        var listener = function (e) { return _this.setActiveHeader(e.type === 'mouseenter'); };\n        this.addManagedListener(this.getGui(), 'mouseenter', listener);\n        this.addManagedListener(this.getGui(), 'mouseleave', listener);\n    };\n    HeaderWrapperComp.prototype.setActiveHeader = function (active) {\n        addOrRemoveCssClass(this.getGui(), 'ag-header-active', active);\n    };\n    HeaderWrapperComp.prototype.onFocusIn = function (e) {\n        if (!this.getGui().contains(e.relatedTarget)) {\n            var headerRow = this.getParentComponent();\n            this.focusService.setFocusedHeader(headerRow.getRowIndex(), this.getColumn());\n        }\n        this.setActiveHeader(true);\n    };\n    HeaderWrapperComp.prototype.onFocusOut = function (e) {\n        if (this.getGui().contains(e.relatedTarget)) {\n            return;\n        }\n        this.setActiveHeader(false);\n    };\n    HeaderWrapperComp.prototype.handleKeyDown = function (e) {\n        var headerComp = this.headerComp;\n        if (!headerComp) {\n            return;\n        }\n        if (e.keyCode === KeyCode.SPACE) {\n            var checkbox = this.cbSelectAll;\n            if (checkbox.isDisplayed() && !checkbox.getGui().contains(document.activeElement)) {\n                e.preventDefault();\n                checkbox.setValue(!checkbox.getValue());\n            }\n        }\n        if (e.keyCode === KeyCode.ENTER) {\n            if (e.ctrlKey || e.metaKey) {\n                if (this.menuEnabled && headerComp.showMenu) {\n                    e.preventDefault();\n                    headerComp.showMenu();\n                }\n            }\n            else if (this.sortable) {\n                var multiSort = e.shiftKey;\n                this.sortController.progressSort(this.column, multiSort, \"uiColumnSorted\");\n            }\n        }\n    };\n    HeaderWrapperComp.prototype.onTabKeyDown = function () { };\n    HeaderWrapperComp.prototype.getComponentHolder = function () {\n        return this.column.getColDef();\n    };\n    HeaderWrapperComp.prototype.addColumnHoverListener = function () {\n        this.addManagedListener(this.eventService, Events.EVENT_COLUMN_HOVER_CHANGED, this.onColumnHover.bind(this));\n        this.onColumnHover();\n    };\n    HeaderWrapperComp.prototype.onColumnHover = function () {\n        if (!this.gridOptionsWrapper.isColumnHoverHighlight()) {\n            return;\n        }\n        var isHovered = this.columnHoverService.isHovered(this.column);\n        addOrRemoveCssClass(this.getGui(), 'ag-column-hover', isHovered);\n    };\n    HeaderWrapperComp.prototype.setupSortableClass = function () {\n        var _this = this;\n        var eGui = this.getGui();\n        var updateSortableCssClass = function () {\n            addOrRemoveCssClass(eGui, 'ag-header-cell-sortable', !!_this.sortable);\n        };\n        var updateAriaSort = function () {\n            if (_this.sortable) {\n                setAriaSort(eGui, getAriaSortState(_this.column));\n            }\n            else {\n                removeAriaSort(eGui);\n            }\n        };\n        updateSortableCssClass();\n        updateAriaSort();\n        this.refreshFunctions.push(updateSortableCssClass);\n        this.refreshFunctions.push(updateAriaSort);\n        this.addManagedListener(this.column, Column.EVENT_SORT_CHANGED, updateAriaSort.bind(this));\n    };\n    HeaderWrapperComp.prototype.onFilterChanged = function () {\n        var filterPresent = this.column.isFilterActive();\n        addOrRemoveCssClass(this.getGui(), 'ag-header-cell-filtered', filterPresent);\n    };\n    HeaderWrapperComp.prototype.appendHeaderComp = function () {\n        this.headerCompVersion++;\n        var colDef = this.column.getColDef();\n        this.colDefHeaderComponent = colDef.headerComponent;\n        this.colDefHeaderComponentFramework = colDef.headerComponentFramework;\n        var params = this.createParams();\n        var callback = this.afterHeaderCompCreated.bind(this, this.headerCompVersion);\n        this.userComponentFactory.newHeaderComponent(params).then(callback);\n    };\n    HeaderWrapperComp.prototype.createParams = function () {\n        var _this = this;\n        var colDef = this.column.getColDef();\n        this.menuEnabled = this.menuFactory.isMenuEnabled(this.column) && !colDef.suppressMenu;\n        var params = {\n            column: this.column,\n            displayName: this.displayName,\n            enableSorting: colDef.sortable,\n            enableMenu: this.menuEnabled,\n            showColumnMenu: function (source) {\n                _this.gridApi.showColumnMenuAfterButtonClick(_this.column, source);\n            },\n            progressSort: function (multiSort) {\n                _this.sortController.progressSort(_this.column, !!multiSort, \"uiColumnSorted\");\n            },\n            setSort: function (sort, multiSort) {\n                _this.sortController.setSortForColumn(_this.column, sort, !!multiSort, \"uiColumnSorted\");\n            },\n            api: this.gridApi,\n            columnApi: this.columnApi,\n            context: this.gridOptionsWrapper.getContext(),\n            eGridHeader: this.getGui()\n        };\n        return params;\n    };\n    HeaderWrapperComp.prototype.afterHeaderCompCreated = function (version, headerComp) {\n        if (version != this.headerCompVersion || !this.isAlive()) {\n            this.destroyBean(headerComp);\n            return;\n        }\n        this.destroyHeaderComp();\n        this.headerComp = headerComp;\n        this.headerCompGui = headerComp.getGui();\n        this.getGui().appendChild(this.headerCompGui);\n        this.attachDraggingToHeaderComp();\n    };\n    HeaderWrapperComp.prototype.onColumnMovingChanged = function () {\n        // this function adds or removes the moving css, based on if the col is moving.\n        // this is what makes the header go dark when it is been moved (gives impression to\n        // user that the column was picked up).\n        if (this.column.isMoving()) {\n            addCssClass(this.getGui(), 'ag-header-cell-moving');\n        }\n        else {\n            removeCssClass(this.getGui(), 'ag-header-cell-moving');\n        }\n    };\n    HeaderWrapperComp.prototype.workOutDraggable = function () {\n        var colDef = this.column.getColDef();\n        var isSuppressMovableColumns = this.gridOptionsWrapper.isSuppressMovableColumns();\n        var colCanMove = !isSuppressMovableColumns && !colDef.suppressMovable && !colDef.lockPosition;\n        // we should still be allowed drag the column, even if it can't be moved, if the column\n        // can be dragged to a rowGroup or pivot drop zone\n        return !!colCanMove || !!colDef.enableRowGroup || !!colDef.enablePivot;\n    };\n    HeaderWrapperComp.prototype.attachDraggingToHeaderComp = function () {\n        var _this = this;\n        this.removeMoveDragSource();\n        if (!this.draggable) {\n            return;\n        }\n        this.moveDragSource = {\n            type: DragSourceType.HeaderCell,\n            eElement: this.headerCompGui,\n            defaultIconName: DragAndDropService.ICON_HIDE,\n            getDragItem: function () { return _this.createDragItem(); },\n            dragItemName: this.displayName,\n            onDragStarted: function () { return _this.column.setMoving(true, \"uiColumnMoved\"); },\n            onDragStopped: function () { return _this.column.setMoving(false, \"uiColumnMoved\"); }\n        };\n        this.dragAndDropService.addDragSource(this.moveDragSource, true);\n    };\n    HeaderWrapperComp.prototype.createDragItem = function () {\n        var visibleState = {};\n        visibleState[this.column.getId()] = this.column.isVisible();\n        return {\n            columns: [this.column],\n            visibleState: visibleState\n        };\n    };\n    HeaderWrapperComp.prototype.setupResize = function () {\n        var _this = this;\n        var colDef = this.getComponentHolder();\n        var destroyResizeFuncs = [];\n        var canResize;\n        var canAutosize;\n        var addResize = function () {\n            setDisplayed(_this.eResize, canResize);\n            if (!canResize) {\n                return;\n            }\n            var finishedWithResizeFunc = _this.horizontalResizeService.addResizeBar({\n                eResizeBar: _this.eResize,\n                onResizeStart: _this.onResizeStart.bind(_this),\n                onResizing: _this.onResizing.bind(_this, false),\n                onResizeEnd: _this.onResizing.bind(_this, true)\n            });\n            destroyResizeFuncs.push(finishedWithResizeFunc);\n            if (canAutosize) {\n                var skipHeaderOnAutoSize_1 = _this.gridOptionsWrapper.isSkipHeaderOnAutoSize();\n                var autoSizeColListener_1 = function () {\n                    _this.columnModel.autoSizeColumn(_this.column, skipHeaderOnAutoSize_1, \"uiColumnResized\");\n                };\n                _this.eResize.addEventListener('dblclick', autoSizeColListener_1);\n                var touchListener_1 = new TouchListener(_this.eResize);\n                touchListener_1.addEventListener(TouchListener.EVENT_DOUBLE_TAP, autoSizeColListener_1);\n                _this.addDestroyFunc(function () {\n                    _this.eResize.removeEventListener('dblclick', autoSizeColListener_1);\n                    touchListener_1.removeEventListener(TouchListener.EVENT_DOUBLE_TAP, autoSizeColListener_1);\n                    touchListener_1.destroy();\n                });\n            }\n        };\n        var removeResize = function () {\n            destroyResizeFuncs.forEach(function (f) { return f(); });\n            destroyResizeFuncs.length = 0;\n        };\n        var refresh = function () {\n            var resize = _this.column.isResizable();\n            var autoSize = !_this.gridOptionsWrapper.isSuppressAutoSize() && !colDef.suppressAutoSize;\n            var propertyChange = resize !== canResize || autoSize !== canAutosize;\n            if (propertyChange) {\n                canResize = resize;\n                canAutosize = autoSize;\n                removeResize();\n                addResize();\n            }\n        };\n        refresh();\n        this.addDestroyFunc(removeResize);\n        this.refreshFunctions.push(refresh);\n    };\n    HeaderWrapperComp.prototype.onResizing = function (finished, resizeAmount) {\n        var resizeAmountNormalised = this.normaliseResizeAmount(resizeAmount);\n        var columnWidths = [{ key: this.column, newWidth: this.resizeStartWidth + resizeAmountNormalised }];\n        this.columnModel.setColumnWidths(columnWidths, this.resizeWithShiftKey, finished, \"uiColumnDragged\");\n        if (finished) {\n            removeCssClass(this.getGui(), 'ag-column-resizing');\n        }\n    };\n    HeaderWrapperComp.prototype.onResizeStart = function (shiftKey) {\n        this.resizeStartWidth = this.column.getActualWidth();\n        this.resizeWithShiftKey = shiftKey;\n        addCssClass(this.getGui(), 'ag-column-resizing');\n    };\n    HeaderWrapperComp.prototype.getTooltipParams = function () {\n        var res = _super.prototype.getTooltipParams.call(this);\n        res.location = 'header';\n        res.colDef = this.column.getColDef();\n        return res;\n    };\n    HeaderWrapperComp.prototype.setupTooltip = function () {\n        var _this = this;\n        var refresh = function () {\n            var newTooltipText = _this.column.getColDef().headerTooltip;\n            _this.setTooltip(newTooltipText);\n        };\n        refresh();\n        this.refreshFunctions.push(refresh);\n    };\n    HeaderWrapperComp.prototype.setupMovingCss = function () {\n        this.addManagedListener(this.column, Column.EVENT_MOVING_CHANGED, this.onColumnMovingChanged.bind(this));\n        this.onColumnMovingChanged();\n    };\n    HeaderWrapperComp.prototype.addAttributes = function () {\n        this.getGui().setAttribute(\"col-id\", this.column.getColId());\n    };\n    HeaderWrapperComp.prototype.setupWidth = function () {\n        this.addManagedListener(this.column, Column.EVENT_WIDTH_CHANGED, this.onColumnWidthChanged.bind(this));\n        this.onColumnWidthChanged();\n    };\n    HeaderWrapperComp.prototype.setupMenuClass = function () {\n        this.addManagedListener(this.column, Column.EVENT_MENU_VISIBLE_CHANGED, this.onMenuVisible.bind(this));\n    };\n    HeaderWrapperComp.prototype.onMenuVisible = function () {\n        this.addOrRemoveCssClass('ag-column-menu-visible', this.column.isMenuVisible());\n    };\n    HeaderWrapperComp.prototype.onColumnWidthChanged = function () {\n        this.getGui().style.width = this.column.getActualWidth() + 'px';\n    };\n    // optionally inverts the drag, depending on pinned and RTL\n    // note - this method is duplicated in RenderedHeaderGroupCell - should refactor out?\n    HeaderWrapperComp.prototype.normaliseResizeAmount = function (dragChange) {\n        var result = dragChange;\n        if (this.gridOptionsWrapper.isEnableRtl()) {\n            // for RTL, dragging left makes the col bigger, except when pinning left\n            if (this.pinned !== Constants.PINNED_LEFT) {\n                result *= -1;\n            }\n        }\n        else {\n            // for LTR (ie normal), dragging left makes the col smaller, except when pinning right\n            if (this.pinned === Constants.PINNED_RIGHT) {\n                result *= -1;\n            }\n        }\n        return result;\n    };\n    HeaderWrapperComp.TEMPLATE = \"<div class=\\\"ag-header-cell\\\" role=\\\"columnheader\\\" unselectable=\\\"on\\\" tabindex=\\\"-1\\\">\\n            <div ref=\\\"eResize\\\" class=\\\"ag-header-cell-resize\\\" role=\\\"presentation\\\"></div>\\n            <ag-checkbox ref=\\\"cbSelectAll\\\" class=\\\"ag-header-select-all\\\" role=\\\"presentation\\\"></ag-checkbox>\\n        </div>\";\n    __decorate([\n        Autowired('dragAndDropService')\n    ], HeaderWrapperComp.prototype, \"dragAndDropService\", void 0);\n    __decorate([\n        Autowired('columnModel')\n    ], HeaderWrapperComp.prototype, \"columnModel\", void 0);\n    __decorate([\n        Autowired('horizontalResizeService')\n    ], HeaderWrapperComp.prototype, \"horizontalResizeService\", void 0);\n    __decorate([\n        Autowired('menuFactory')\n    ], HeaderWrapperComp.prototype, \"menuFactory\", void 0);\n    __decorate([\n        Autowired('gridApi')\n    ], HeaderWrapperComp.prototype, \"gridApi\", void 0);\n    __decorate([\n        Autowired('columnApi')\n    ], HeaderWrapperComp.prototype, \"columnApi\", void 0);\n    __decorate([\n        Autowired('sortController')\n    ], HeaderWrapperComp.prototype, \"sortController\", void 0);\n    __decorate([\n        Autowired('userComponentFactory')\n    ], HeaderWrapperComp.prototype, \"userComponentFactory\", void 0);\n    __decorate([\n        Autowired('columnHoverService')\n    ], HeaderWrapperComp.prototype, \"columnHoverService\", void 0);\n    __decorate([\n        Autowired('beans')\n    ], HeaderWrapperComp.prototype, \"beans\", void 0);\n    __decorate([\n        RefSelector('eResize')\n    ], HeaderWrapperComp.prototype, \"eResize\", void 0);\n    __decorate([\n        RefSelector('cbSelectAll')\n    ], HeaderWrapperComp.prototype, \"cbSelectAll\", void 0);\n    __decorate([\n        PostConstruct\n    ], HeaderWrapperComp.prototype, \"postConstruct\", null);\n    __decorate([\n        PreDestroy\n    ], HeaderWrapperComp.prototype, \"destroyHeaderComp\", null);\n    return HeaderWrapperComp;\n}(AbstractHeaderWrapper));\nexport { HeaderWrapperComp };\n"]},"metadata":{},"sourceType":"module"}