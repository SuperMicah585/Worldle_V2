{"ast":null,"code":"/**\n * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v26.0.0\n * @link http://www.ag-grid.com/\n * @license MIT\n */\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport { RowNode } from \"../../entities/rowNode\";\nimport { Events } from \"../../events\";\nimport { CellRangeFeature } from \"./cellRangeFeature\";\nimport { exists } from \"../../utils/generic\";\nimport { BeanStub } from \"../../context/beanStub\";\nimport { CellPositionFeature } from \"./cellPositionFeature\";\nimport { escapeString } from \"../../utils/string\";\nimport { CellCustomStyleFeature } from \"./cellCustomStyleFeature\";\nimport { CellTooltipFeature } from \"./cellTooltipFeature\";\nimport { CellMouseListenerFeature } from \"./cellMouseListenerFeature\";\nimport { CellKeyboardListenerFeature } from \"./cellKeyboardListenerFeature\";\nimport { KeyCode } from \"../../constants/keyCode\";\nimport { CheckboxSelectionComponent } from \"../checkboxSelectionComponent\";\nimport { DndSourceComp } from \"../dndSourceComp\";\nimport { doOnce } from \"../../utils/function\";\nimport { RowDragComp } from \"../row/rowDragComp\";\nvar CSS_CELL = 'ag-cell';\nvar CSS_AUTO_HEIGHT = 'ag-cell-auto-height';\nvar CSS_NORMAL_HEIGHT = 'ag-cell-normal-height';\nvar CSS_CELL_FOCUS = 'ag-cell-focus';\nvar CSS_CELL_FIRST_RIGHT_PINNED = 'ag-cell-first-right-pinned';\nvar CSS_CELL_LAST_LEFT_PINNED = 'ag-cell-last-left-pinned';\nvar CSS_CELL_NOT_INLINE_EDITING = 'ag-cell-not-inline-editing';\nvar CSS_CELL_INLINE_EDITING = 'ag-cell-inline-editing';\nvar CSS_CELL_POPUP_EDITING = 'ag-cell-popup-editing';\nvar CSS_COLUMN_HOVER = 'ag-column-hover';\nvar CSS_CELL_WRAP_TEXT = 'ag-cell-wrap-text';\nvar instanceIdSequence = 0;\n\nvar CellCtrl = function (_super) {\n  __extends(CellCtrl, _super);\n\n  function CellCtrl(column, rowNode, beans, rowCtrl) {\n    var _this = _super.call(this) || this;\n\n    _this.suppressRefreshCell = false;\n    _this.column = column;\n    _this.rowNode = rowNode;\n    _this.beans = beans;\n    _this.rowCtrl = rowCtrl; // unique id to this instance, including the column ID to help with debugging in React as it's used in 'key'\n\n    _this.instanceId = column.getId() + '-' + instanceIdSequence++;\n\n    _this.createCellPosition();\n\n    _this.addFeatures();\n\n    return _this;\n  }\n\n  CellCtrl.prototype.addFeatures = function () {\n    var _this = this;\n\n    this.cellPositionFeature = new CellPositionFeature(this, this.beans);\n    this.addDestroyFunc(function () {\n      return _this.cellPositionFeature.destroy();\n    });\n    this.cellCustomStyleFeature = new CellCustomStyleFeature(this, this.beans);\n    this.addDestroyFunc(function () {\n      return _this.cellCustomStyleFeature.destroy();\n    });\n    this.cellTooltipFeature = new CellTooltipFeature(this, this.beans);\n    this.addDestroyFunc(function () {\n      return _this.cellTooltipFeature.destroy();\n    });\n    this.cellMouseListenerFeature = new CellMouseListenerFeature(this, this.beans, this.column);\n    this.addDestroyFunc(function () {\n      return _this.cellMouseListenerFeature.destroy();\n    });\n    this.cellKeyboardListenerFeature = new CellKeyboardListenerFeature(this, this.beans, this.column, this.rowNode, this.scope, this.rowCtrl);\n    this.addDestroyFunc(function () {\n      return _this.cellKeyboardListenerFeature.destroy();\n    });\n    var rangeSelectionEnabled = this.beans.rangeService && this.beans.gridOptionsWrapper.isEnableRangeSelection();\n\n    if (rangeSelectionEnabled) {\n      this.cellRangeFeature = new CellRangeFeature(this.beans, this);\n      this.addDestroyFunc(function () {\n        return _this.cellRangeFeature.destroy();\n      });\n    }\n  };\n\n  CellCtrl.prototype.setComp = function (comp, scope, eGui, printLayout, startEditing) {\n    var _this = this;\n\n    this.cellComp = comp;\n    this.gow = this.beans.gridOptionsWrapper;\n    this.scope = scope;\n    this.eGui = eGui;\n    this.printLayout = printLayout; // we force to make sure formatter gets called at least once,\n    // even if value has not changed (is is undefined)\n\n    this.updateAndFormatValue(true);\n    this.addDomData();\n    this.onCellFocused();\n    this.applyStaticCssClasses();\n    this.setWrapText();\n    this.onFirstRightPinnedChanged();\n    this.onLastLeftPinnedChanged();\n    this.onColumnHover();\n    this.setupControlComps();\n    this.setupAriaExpanded();\n    var colIdSanitised = escapeString(this.column.getId());\n    var ariaColIndex = this.beans.columnModel.getAriaColumnIndex(this.column);\n    this.cellComp.setTabIndex(-1);\n    this.cellComp.setRole('gridcell');\n    this.cellComp.setAriaColIndex(ariaColIndex);\n    this.cellComp.setColId(colIdSanitised);\n    this.cellComp.setUnselectable(!this.beans.gridOptionsWrapper.isEnableCellTextSelection() ? 'on' : null);\n    this.cellPositionFeature.setComp(comp);\n    this.cellCustomStyleFeature.setComp(comp, scope);\n    this.cellTooltipFeature.setComp(comp);\n    this.cellKeyboardListenerFeature.setComp(this.eGui);\n\n    if (this.cellRangeFeature) {\n      this.cellRangeFeature.setComp(comp);\n    }\n\n    if (startEditing && this.isCellEditable()) {\n      this.startEditing();\n    } else {\n      this.showValue();\n    }\n\n    this.addDestroyFunc(function () {\n      _this.destroyAutoHeight && _this.destroyAutoHeight();\n    });\n  };\n\n  CellCtrl.prototype.setupAutoHeight = function (eParentOfValue) {\n    var _this = this;\n\n    if (!this.column.getColDef().autoHeight) {\n      return;\n    }\n\n    if (this.autoHeightElement == eParentOfValue) {\n      return;\n    }\n\n    if (this.destroyAutoHeight) {\n      this.destroyAutoHeight();\n    }\n\n    this.autoHeightElement = eParentOfValue;\n\n    if (!eParentOfValue) {\n      return;\n    }\n\n    var listener = function () {\n      var newHeight = eParentOfValue.offsetHeight;\n\n      _this.rowNode.setRowAutoHeight(newHeight, _this.column);\n    }; // do once to set size in case size doesn't change, common when cell is blank\n\n\n    listener();\n    var destroyResizeObserver = this.beans.resizeObserverService.observeResize(eParentOfValue, listener);\n\n    this.destroyAutoHeight = function () {\n      destroyResizeObserver();\n\n      _this.rowNode.setRowAutoHeight(undefined, _this.column);\n    };\n  };\n\n  CellCtrl.prototype.getInstanceId = function () {\n    return this.instanceId;\n  };\n\n  CellCtrl.prototype.showValue = function (forceNewCellRendererInstance) {\n    if (forceNewCellRendererInstance === void 0) {\n      forceNewCellRendererInstance = false;\n    }\n\n    var valueToDisplay = this.valueFormatted != null ? this.valueFormatted : this.value;\n    var params = this.createCellRendererParams();\n    var compDetails = this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(), params);\n    this.cellComp.setRenderDetails(compDetails, valueToDisplay, forceNewCellRendererInstance);\n    this.refreshHandle();\n  };\n\n  CellCtrl.prototype.setupControlComps = function () {\n    var colDef = this.column.getColDef();\n    this.includeSelection = this.isIncludeControl(colDef.checkboxSelection);\n    this.includeRowDrag = this.isIncludeControl(colDef.rowDrag);\n    this.includeDndSource = this.isIncludeControl(colDef.dndSource); // text selection requires the value to be wrapped in another element\n\n    var forceWrapper = this.beans.gridOptionsWrapper.isEnableCellTextSelection() || this.column.getColDef().autoHeight == true;\n    this.cellComp.setIncludeSelection(this.includeSelection);\n    this.cellComp.setIncludeDndSource(this.includeDndSource);\n    this.cellComp.setIncludeRowDrag(this.includeRowDrag);\n    this.cellComp.setForceWrapper(forceWrapper);\n  };\n\n  CellCtrl.prototype.isIncludeControl = function (value) {\n    var rowNodePinned = this.rowNode.rowPinned != null;\n    var isFunc = typeof value === 'function';\n    var res = rowNodePinned ? false : isFunc || value === true;\n    return res;\n  };\n\n  CellCtrl.prototype.setupAriaExpanded = function () {\n    var _this = this;\n\n    var colDef = this.column.getColDef();\n\n    if (!this.rowNode.isExpandable()) {\n      return;\n    }\n\n    var showRowGroup = colDef.showRowGroup;\n    var rowGroupColumn = this.rowNode.rowGroupColumn;\n    var showingAllGroups = showRowGroup === true;\n    var showingThisGroup = rowGroupColumn && rowGroupColumn.getColId() === showRowGroup;\n    var colMatches = showingAllGroups || showingThisGroup;\n\n    if (!colMatches) {\n      return;\n    }\n\n    var listener = function () {\n      _this.cellComp.setAriaExpanded(!!_this.rowNode.expanded);\n    };\n\n    this.addManagedListener(this.rowNode, RowNode.EVENT_EXPANDED_CHANGED, listener);\n    listener();\n  };\n\n  CellCtrl.prototype.refreshShouldDestroy = function () {\n    var colDef = this.column.getColDef();\n    var selectionChanged = this.includeSelection != this.isIncludeControl(colDef.checkboxSelection);\n    var rowDragChanged = this.includeRowDrag != this.isIncludeControl(colDef.rowDrag);\n    var dndSourceChanged = this.includeDndSource != this.isIncludeControl(colDef.dndSource);\n    return selectionChanged || rowDragChanged || dndSourceChanged;\n  }; // either called internally if single cell editing, or called by rowRenderer if row editing\n\n\n  CellCtrl.prototype.startEditing = function (keyPress, charPress, cellStartedEdit) {\n    if (keyPress === void 0) {\n      keyPress = null;\n    }\n\n    if (charPress === void 0) {\n      charPress = null;\n    }\n\n    if (cellStartedEdit === void 0) {\n      cellStartedEdit = false;\n    }\n\n    if (!this.isCellEditable() || this.editing) {\n      return;\n    }\n\n    var editorParams = this.createCellEditorParams(keyPress, charPress, cellStartedEdit);\n    var colDef = this.column.getColDef();\n    var compDetails = this.beans.userComponentFactory.getCellEditorDetails(colDef, editorParams);\n    var popup = !!colDef.cellEditorPopup;\n    var position = colDef.cellEditorPopupPosition;\n    this.setEditing(true, popup);\n    this.cellComp.setEditDetails(compDetails, popup, position);\n    var event = this.createEvent(null, Events.EVENT_CELL_EDITING_STARTED);\n    this.beans.eventService.dispatchEvent(event);\n  };\n\n  CellCtrl.prototype.setEditing = function (editing, inPopup) {\n    if (inPopup === void 0) {\n      inPopup = false;\n    }\n\n    if (this.editing === editing) {\n      return;\n    }\n\n    this.editing = editing;\n    this.editingInPopup = inPopup;\n    this.setInlineEditingClass();\n\n    if (!editing) {\n      this.cellComp.setEditDetails();\n    }\n  }; // pass in 'true' to cancel the editing.\n\n\n  CellCtrl.prototype.stopRowOrCellEdit = function (cancel) {\n    if (cancel === void 0) {\n      cancel = false;\n    }\n\n    if (this.beans.gridOptionsWrapper.isFullRowEdit()) {\n      this.rowCtrl.stopRowEditing(cancel);\n    } else {\n      this.stopEditing(cancel);\n    }\n  };\n\n  CellCtrl.prototype.onPopupEditorClosed = function () {\n    if (!this.isEditing()) {\n      return;\n    } // note: this happens because of a click outside of the grid or if the popupEditor\n    // is closed with `Escape` key. if another cell was clicked, then the editing will \n    // have already stopped and returned on the conditional above.\n\n\n    this.stopEditingAndFocus();\n  };\n\n  CellCtrl.prototype.takeValueFromCellEditor = function (cancel) {\n    var noValueResult = {\n      newValueExists: false\n    };\n\n    if (cancel) {\n      return noValueResult;\n    }\n\n    var cellEditor = this.cellComp.getCellEditor();\n\n    if (!cellEditor) {\n      return noValueResult;\n    }\n\n    var userWantsToCancel = cellEditor.isCancelAfterEnd && cellEditor.isCancelAfterEnd();\n\n    if (userWantsToCancel) {\n      return noValueResult;\n    }\n\n    var newValue = cellEditor.getValue();\n    return {\n      newValue: newValue,\n      newValueExists: true\n    };\n  };\n\n  CellCtrl.prototype.saveNewValue = function (oldValue, newValue) {\n    if (newValue !== oldValue) {\n      // we suppressRefreshCell because the call to rowNode.setDataValue() results in change detection\n      // getting triggered, which results in all cells getting refreshed. we do not want this refresh\n      // to happen on this call as we want to call it explicitly below. otherwise refresh gets called twice.\n      // if we only did this refresh (and not the one below) then the cell would flash and not be forced.\n      this.suppressRefreshCell = true;\n      this.rowNode.setDataValue(this.column, newValue);\n      this.suppressRefreshCell = false;\n    }\n  };\n\n  CellCtrl.prototype.stopEditing = function (cancel) {\n    if (cancel === void 0) {\n      cancel = false;\n    }\n\n    if (!this.editing) {\n      return;\n    }\n\n    var _a = this.takeValueFromCellEditor(cancel),\n        newValue = _a.newValue,\n        newValueExists = _a.newValueExists;\n\n    var oldValue = this.getValueFromValueService();\n\n    if (newValueExists) {\n      this.saveNewValue(oldValue, newValue);\n    }\n\n    this.setEditing(false);\n    this.updateAndFormatValue();\n    this.refreshCell({\n      forceRefresh: true,\n      suppressFlash: true\n    });\n    this.dispatchEditingStoppedEvent(oldValue, newValue);\n  };\n\n  CellCtrl.prototype.dispatchEditingStoppedEvent = function (oldValue, newValue) {\n    var editingStoppedEvent = __assign(__assign({}, this.createEvent(null, Events.EVENT_CELL_EDITING_STOPPED)), {\n      oldValue: oldValue,\n      newValue: newValue\n    });\n\n    this.beans.eventService.dispatchEvent(editingStoppedEvent);\n  }; // if we are editing inline, then we don't have the padding in the cell (set in the themes)\n  // to allow the text editor full access to the entire cell\n\n\n  CellCtrl.prototype.setInlineEditingClass = function () {\n    if (!this.isAlive()) {\n      return;\n    } // ag-cell-inline-editing - appears when user is inline editing\n    // ag-cell-not-inline-editing - appears when user is no inline editing\n    // ag-cell-popup-editing - appears when user is editing cell in popup (appears on the cell, not on the popup)\n    // note: one of {ag-cell-inline-editing, ag-cell-not-inline-editing} is always present, they toggle.\n    //       however {ag-cell-popup-editing} shows when popup, so you have both {ag-cell-popup-editing}\n    //       and {ag-cell-not-inline-editing} showing at the same time.\n\n\n    var editingInline = this.editing && !this.editingInPopup;\n    var popupEditorShowing = this.editing && this.editingInPopup;\n    this.cellComp.addOrRemoveCssClass(CSS_CELL_INLINE_EDITING, editingInline);\n    this.cellComp.addOrRemoveCssClass(CSS_CELL_NOT_INLINE_EDITING, !editingInline);\n    this.cellComp.addOrRemoveCssClass(CSS_CELL_POPUP_EDITING, popupEditorShowing);\n    this.rowCtrl.setInlineEditingCss(this.editing);\n  }; // this is needed as the JS CellComp still allows isPopup() on the CellEditor class, so\n  // it's possible the editor is in a popup even though it's not configured via the colDef as so\n\n\n  CellCtrl.prototype.hackSayEditingInPopup = function () {\n    if (this.editingInPopup) {\n      return;\n    }\n\n    this.editingInPopup = true;\n    this.setInlineEditingClass();\n  };\n\n  CellCtrl.prototype.createCellEditorParams = function (keyPress, charPress, cellStartedEdit) {\n    var res = {\n      value: this.getValueFromValueService(),\n      keyPress: keyPress,\n      charPress: charPress,\n      column: this.column,\n      colDef: this.column.getColDef(),\n      rowIndex: this.getCellPosition().rowIndex,\n      node: this.rowNode,\n      data: this.rowNode.data,\n      api: this.beans.gridOptionsWrapper.getApi(),\n      cellStartedEdit: cellStartedEdit,\n      columnApi: this.beans.gridOptionsWrapper.getColumnApi(),\n      context: this.beans.gridOptionsWrapper.getContext(),\n      onKeyDown: this.onKeyDown.bind(this),\n      stopEditing: this.stopEditingAndFocus.bind(this),\n      eGridCell: this.getGui(),\n      parseValue: this.parseValue.bind(this),\n      formatValue: this.formatValue.bind(this)\n    };\n\n    if (this.scope) {\n      res.$scope = this.scope;\n    }\n\n    return res;\n  };\n\n  CellCtrl.prototype.createCellRendererParams = function () {\n    var _this = this;\n\n    var addRowCompListener = function (eventType, listener) {\n      console.warn('AG Grid: since AG Grid v26, params.addRowCompListener() is deprecated. If you need this functionality, please contact AG Grid support and advise why so that we can revert with an appropriate workaround, as we dont have any valid use cases for it. This method was originally provided as a work around to know when cells were destroyed in AG Grid before custom Cell Renderers could be provided.');\n\n      _this.rowCtrl.addEventListener(eventType, listener);\n    };\n\n    var res = {\n      value: this.value,\n      valueFormatted: this.valueFormatted,\n      getValue: this.getValueFromValueService.bind(this),\n      setValue: function (value) {\n        return _this.beans.valueService.setValue(_this.rowNode, _this.column, value);\n      },\n      formatValue: this.formatValue.bind(this),\n      data: this.rowNode.data,\n      node: this.rowNode,\n      colDef: this.column.getColDef(),\n      column: this.column,\n      rowIndex: this.getCellPosition().rowIndex,\n      api: this.beans.gridOptionsWrapper.getApi(),\n      columnApi: this.beans.gridOptionsWrapper.getColumnApi(),\n      context: this.beans.gridOptionsWrapper.getContext(),\n      refreshCell: this.refreshCell.bind(this),\n      eGridCell: this.getGui(),\n      eParentOfValue: this.cellComp.getParentOfValue(),\n      registerRowDragger: function (rowDraggerElement, dragStartPixels) {\n        return _this.registerRowDragger(rowDraggerElement, dragStartPixels);\n      },\n      // this function is not documented anywhere, so we could drop it\n      // it was in the olden days to allow user to register for when rendered\n      // row was removed (the row comp was removed), however now that the user\n      // can provide components for cells, the destroy method gets call when this\n      // happens so no longer need to fire event.\n      addRowCompListener: addRowCompListener\n    };\n\n    if (this.scope) {\n      res.$scope = this.scope;\n    }\n\n    return res;\n  };\n\n  CellCtrl.prototype.parseValue = function (newValue) {\n    var colDef = this.column.getColDef();\n    var params = {\n      node: this.rowNode,\n      data: this.rowNode.data,\n      oldValue: this.getValue(),\n      newValue: newValue,\n      colDef: colDef,\n      column: this.column,\n      api: this.beans.gridOptionsWrapper.getApi(),\n      columnApi: this.beans.gridOptionsWrapper.getColumnApi(),\n      context: this.beans.gridOptionsWrapper.getContext()\n    };\n    var valueParser = colDef.valueParser;\n    return exists(valueParser) ? this.beans.expressionService.evaluate(valueParser, params) : newValue;\n  };\n\n  CellCtrl.prototype.setFocusOutOnEditor = function () {\n    if (!this.editing) {\n      return;\n    }\n\n    var cellEditor = this.cellComp.getCellEditor();\n\n    if (cellEditor && cellEditor.focusOut) {\n      cellEditor.focusOut();\n    }\n  };\n\n  CellCtrl.prototype.setFocusInOnEditor = function () {\n    if (!this.editing) {\n      return;\n    }\n\n    var cellEditor = this.cellComp.getCellEditor();\n\n    if (cellEditor && cellEditor.focusIn) {\n      // if the editor is present, then we just focus it\n      cellEditor.focusIn();\n    } else {\n      // if the editor is not present, it means async cell editor (eg React fibre)\n      // and we are trying to set focus before the cell editor is present, so we\n      // focus the cell instead\n      this.focusCell(true);\n    }\n  };\n\n  CellCtrl.prototype.onCellChanged = function (event) {\n    var eventImpactsThisCell = event.column === this.column;\n\n    if (eventImpactsThisCell) {\n      this.refreshCell({});\n    }\n  }; // + stop editing {forceRefresh: true, suppressFlash: true}\n  // + event cellChanged {}\n  // + cellRenderer.params.refresh() {} -> method passes 'as is' to the cellRenderer, so params could be anything\n  // + rowCtrl: event dataChanged {suppressFlash: !update, newData: !update}\n  // + rowCtrl: api refreshCells() {animate: true/false}\n  // + rowRenderer: api softRefreshView() {}\n\n\n  CellCtrl.prototype.refreshCell = function (params) {\n    // if we are in the middle of 'stopEditing', then we don't refresh here, as refresh gets called explicitly\n    if (this.suppressRefreshCell || this.editing) {\n      return;\n    }\n\n    var colDef = this.column.getColDef();\n    var newData = params != null && !!params.newData;\n    var suppressFlash = params != null && !!params.suppressFlash || !!colDef.suppressCellFlash; // we always refresh if cell has no value - this can happen when user provides Cell Renderer and the\n    // cell renderer doesn't rely on a value, instead it could be looking directly at the data, or maybe\n    // printing the current time (which would be silly)???. Generally speaking\n    // non of {field, valueGetter, showRowGroup} is bad in the users application, however for this edge case, it's\n    // best always refresh and take the performance hit rather than never refresh and users complaining in support\n    // that cells are not updating.\n\n    var noValueProvided = colDef.field == null && colDef.valueGetter == null && colDef.showRowGroup == null;\n    var forceRefresh = params && params.forceRefresh || noValueProvided || newData;\n    var valuesDifferent = this.updateAndFormatValue();\n    var dataNeedsUpdating = forceRefresh || valuesDifferent;\n\n    if (dataNeedsUpdating) {\n      // if it's 'new data', then we don't refresh the cellRenderer, even if refresh method is available.\n      // this is because if the whole data is new (ie we are showing stock price 'BBA' now and not 'SSD')\n      // then we are not showing a movement in the stock price, rather we are showing different stock.\n      this.showValue(newData); // we don't want to flash the cells when processing a filter change, as otherwise the UI would\n      // be to busy. see comment in FilterManager with regards processingFilterChange\n\n      var processingFilterChange = this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering();\n      var flashCell = !suppressFlash && !processingFilterChange && (this.beans.gridOptionsWrapper.isEnableCellChangeFlash() || colDef.enableCellChangeFlash);\n\n      if (flashCell) {\n        this.flashCell();\n      }\n\n      this.cellCustomStyleFeature.applyUserStyles();\n      this.cellCustomStyleFeature.applyClassesFromColDef();\n    } // we can't readily determine if the data in an angularjs template has changed, so here we just update\n    // and recompile (if applicable)\n\n\n    this.refreshToolTip(); // we do cellClassRules even if the value has not changed, so that users who have rules that\n    // look at other parts of the row (where the other part of the row might of changed) will work.\n\n    this.cellCustomStyleFeature.applyCellClassRules();\n  }; // cell editors call this, when they want to stop for reasons other\n  // than what we pick up on. eg selecting from a dropdown ends editing.\n\n\n  CellCtrl.prototype.stopEditingAndFocus = function (suppressNavigateAfterEdit) {\n    if (suppressNavigateAfterEdit === void 0) {\n      suppressNavigateAfterEdit = false;\n    }\n\n    this.stopRowOrCellEdit();\n    this.focusCell(true);\n\n    if (!suppressNavigateAfterEdit) {\n      this.navigateAfterEdit();\n    }\n  };\n\n  CellCtrl.prototype.navigateAfterEdit = function () {\n    var fullRowEdit = this.beans.gridOptionsWrapper.isFullRowEdit();\n\n    if (fullRowEdit) {\n      return;\n    }\n\n    var enterMovesDownAfterEdit = this.beans.gridOptionsWrapper.isEnterMovesDownAfterEdit();\n\n    if (enterMovesDownAfterEdit) {\n      this.beans.navigationService.navigateToNextCell(null, KeyCode.DOWN, this.getCellPosition(), false);\n    }\n  }; // user can also call this via API\n\n\n  CellCtrl.prototype.flashCell = function (delays) {\n    var flashDelay = delays && delays.flashDelay;\n    var fadeDelay = delays && delays.fadeDelay;\n    this.animateCell('data-changed', flashDelay, fadeDelay);\n  };\n\n  CellCtrl.prototype.animateCell = function (cssName, flashDelay, fadeDelay) {\n    var _this = this;\n\n    var fullName = \"ag-cell-\" + cssName;\n    var animationFullName = \"ag-cell-\" + cssName + \"-animation\";\n    var gridOptionsWrapper = this.beans.gridOptionsWrapper;\n\n    if (!flashDelay) {\n      flashDelay = gridOptionsWrapper.getCellFlashDelay();\n    }\n\n    if (!exists(fadeDelay)) {\n      fadeDelay = gridOptionsWrapper.getCellFadeDelay();\n    } // we want to highlight the cells, without any animation\n\n\n    this.cellComp.addOrRemoveCssClass(fullName, true);\n    this.cellComp.addOrRemoveCssClass(animationFullName, false); // then once that is applied, we remove the highlight with animation\n\n    window.setTimeout(function () {\n      _this.cellComp.addOrRemoveCssClass(fullName, false);\n\n      _this.cellComp.addOrRemoveCssClass(animationFullName, true);\n\n      _this.cellComp.setTransition(\"background-color \" + fadeDelay + \"ms\");\n\n      window.setTimeout(function () {\n        // and then to leave things as we got them, we remove the animation\n        _this.cellComp.addOrRemoveCssClass(animationFullName, false);\n\n        _this.cellComp.setTransition('transition');\n      }, fadeDelay);\n    }, flashDelay);\n  };\n\n  CellCtrl.prototype.onFlashCells = function (event) {\n    var cellId = this.beans.cellPositionUtils.createId(this.getCellPosition());\n    var shouldFlash = event.cells[cellId];\n\n    if (shouldFlash) {\n      this.animateCell('highlight');\n    }\n  };\n\n  CellCtrl.prototype.isCellEditable = function () {\n    return this.column.isCellEditable(this.rowNode);\n  };\n\n  CellCtrl.prototype.formatValue = function (value) {\n    var res = this.callValueFormatter(value);\n    return res != null ? res : value;\n  };\n\n  CellCtrl.prototype.callValueFormatter = function (value) {\n    return this.beans.valueFormatterService.formatValue(this.column, this.rowNode, this.scope, value);\n  };\n\n  CellCtrl.prototype.updateAndFormatValue = function (force) {\n    if (force === void 0) {\n      force = false;\n    }\n\n    var oldValue = this.value;\n    var oldValueFormatted = this.valueFormatted;\n    this.value = this.getValueFromValueService();\n    this.valueFormatted = this.callValueFormatter(this.value);\n    var valuesDifferent = force ? true : !this.valuesAreEqual(oldValue, this.value) || this.valueFormatted != oldValueFormatted;\n    return valuesDifferent;\n  };\n\n  CellCtrl.prototype.valuesAreEqual = function (val1, val2) {\n    // if the user provided an equals method, use that, otherwise do simple comparison\n    var colDef = this.column.getColDef();\n    return colDef.equals ? colDef.equals(val1, val2) : val1 === val2;\n  };\n\n  CellCtrl.prototype.getComp = function () {\n    return this.cellComp;\n  };\n\n  CellCtrl.prototype.getValueFromValueService = function () {\n    // if we don't check this, then the grid will render leaf groups as open even if we are not\n    // allowing the user to open leaf groups. confused? remember for pivot mode we don't allow\n    // opening leaf groups, so we have to force leafGroups to be closed in case the user expanded\n    // them via the API, or user user expanded them in the UI before turning on pivot mode\n    var lockedClosedGroup = this.rowNode.leafGroup && this.beans.columnModel.isPivotMode();\n    var isOpenGroup = this.rowNode.group && this.rowNode.expanded && !this.rowNode.footer && !lockedClosedGroup; // are we showing group footers\n\n    var groupFootersEnabled = this.beans.gridOptionsWrapper.isGroupIncludeFooter(); // if doing footers, we normally don't show agg data at group level when group is open\n\n    var groupAlwaysShowAggData = this.beans.gridOptionsWrapper.isGroupSuppressBlankHeader(); // if doing grouping and footers, we don't want to include the agg value\n    // in the header when the group is open\n\n    var ignoreAggData = isOpenGroup && groupFootersEnabled && !groupAlwaysShowAggData;\n    var value = this.beans.valueService.getValue(this.column, this.rowNode, false, ignoreAggData);\n    return value;\n  };\n\n  CellCtrl.prototype.getValue = function () {\n    return this.value;\n  };\n\n  CellCtrl.prototype.getValueFormatted = function () {\n    return this.valueFormatted;\n  };\n\n  CellCtrl.prototype.addDomData = function () {\n    var _this = this;\n\n    var element = this.getGui();\n    this.beans.gridOptionsWrapper.setDomData(element, CellCtrl.DOM_DATA_KEY_CELL_CTRL, this);\n    this.addDestroyFunc(function () {\n      return _this.beans.gridOptionsWrapper.setDomData(element, CellCtrl.DOM_DATA_KEY_CELL_CTRL, null);\n    });\n  };\n\n  CellCtrl.prototype.createEvent = function (domEvent, eventType) {\n    var event = {\n      type: eventType,\n      node: this.rowNode,\n      data: this.rowNode.data,\n      value: this.value,\n      column: this.column,\n      colDef: this.column.getColDef(),\n      context: this.beans.gridOptionsWrapper.getContext(),\n      api: this.beans.gridApi,\n      columnApi: this.beans.columnApi,\n      rowPinned: this.rowNode.rowPinned,\n      event: domEvent,\n      rowIndex: this.rowNode.rowIndex\n    }; // because we are hacking in $scope for angular 1, we have to de-reference\n\n    if (this.scope) {\n      event.$scope = this.scope;\n    }\n\n    return event;\n  };\n\n  CellCtrl.prototype.onKeyPress = function (event) {\n    this.cellKeyboardListenerFeature.onKeyPress(event);\n  };\n\n  CellCtrl.prototype.onKeyDown = function (event) {\n    this.cellKeyboardListenerFeature.onKeyDown(event);\n  };\n\n  CellCtrl.prototype.onMouseEvent = function (eventName, mouseEvent) {\n    this.cellMouseListenerFeature.onMouseEvent(eventName, mouseEvent);\n  };\n\n  CellCtrl.prototype.getGui = function () {\n    return this.eGui;\n  };\n\n  CellCtrl.prototype.refreshToolTip = function () {\n    this.cellTooltipFeature.refreshToolTip();\n  };\n\n  CellCtrl.prototype.getColSpanningList = function () {\n    return this.cellPositionFeature.getColSpanningList();\n  };\n\n  CellCtrl.prototype.onLeftChanged = function () {\n    this.cellPositionFeature.onLeftChanged();\n    this.refreshAriaIndex(); // should change this to listen for when column order changes\n  };\n\n  CellCtrl.prototype.refreshAriaIndex = function () {\n    var colIdx = this.beans.columnModel.getAriaColumnIndex(this.column);\n    this.cellComp.setAriaColIndex(colIdx);\n  };\n\n  CellCtrl.prototype.isSuppressNavigable = function () {\n    return this.column.isSuppressNavigable(this.rowNode);\n  };\n\n  CellCtrl.prototype.onWidthChanged = function () {\n    return this.cellPositionFeature.onWidthChanged();\n  };\n\n  CellCtrl.prototype.getColumn = function () {\n    return this.column;\n  };\n\n  CellCtrl.prototype.getRowNode = function () {\n    return this.rowNode;\n  };\n\n  CellCtrl.prototype.getBeans = function () {\n    return this.beans;\n  };\n\n  CellCtrl.prototype.isPrintLayout = function () {\n    return this.printLayout;\n  };\n\n  CellCtrl.prototype.appendChild = function (htmlElement) {\n    this.eGui.appendChild(htmlElement);\n  };\n\n  CellCtrl.prototype.refreshHandle = function () {\n    if (this.editing) {\n      return;\n    }\n\n    if (this.cellRangeFeature) {\n      this.cellRangeFeature.refreshHandle();\n    }\n  };\n\n  CellCtrl.prototype.getCellPosition = function () {\n    return this.cellPosition;\n  };\n\n  CellCtrl.prototype.isEditing = function () {\n    return this.editing;\n  }; // called by rowRenderer when user navigates via tab key\n\n\n  CellCtrl.prototype.startRowOrCellEdit = function (keyPress, charPress) {\n    if (this.beans.gridOptionsWrapper.isFullRowEdit()) {\n      this.rowCtrl.startRowEditing(keyPress, charPress, this);\n    } else {\n      this.startEditing(keyPress, charPress, true);\n    }\n  };\n\n  CellCtrl.prototype.getRowCtrl = function () {\n    return this.rowCtrl;\n  };\n\n  CellCtrl.prototype.getRowPosition = function () {\n    return {\n      rowIndex: this.cellPosition.rowIndex,\n      rowPinned: this.cellPosition.rowPinned\n    };\n  };\n\n  CellCtrl.prototype.updateRangeBordersIfRangeCount = function () {\n    if (this.cellRangeFeature) {\n      this.cellRangeFeature.updateRangeBordersIfRangeCount();\n    }\n  };\n\n  CellCtrl.prototype.onRangeSelectionChanged = function () {\n    if (this.cellRangeFeature) {\n      this.cellRangeFeature.onRangeSelectionChanged();\n    }\n  };\n\n  CellCtrl.prototype.isRangeSelectionEnabled = function () {\n    return this.cellRangeFeature != null;\n  };\n\n  CellCtrl.prototype.focusCell = function (forceBrowserFocus) {\n    if (forceBrowserFocus === void 0) {\n      forceBrowserFocus = false;\n    }\n\n    this.beans.focusService.setFocusedCell(this.getCellPosition().rowIndex, this.column, this.rowNode.rowPinned, forceBrowserFocus);\n  };\n\n  CellCtrl.prototype.onRowIndexChanged = function () {\n    // when index changes, this influences items that need the index, so we update the\n    // grid cell so they are working off the new index.\n    this.createCellPosition(); // when the index of the row changes, ie means the cell may have lost or gained focus\n\n    this.onCellFocused(); // check range selection\n\n    if (this.cellRangeFeature) {\n      this.cellRangeFeature.onRangeSelectionChanged();\n    }\n  };\n\n  CellCtrl.prototype.onFirstRightPinnedChanged = function () {\n    if (!this.cellComp) {\n      return;\n    }\n\n    var firstRightPinned = this.column.isFirstRightPinned();\n    this.cellComp.addOrRemoveCssClass(CSS_CELL_FIRST_RIGHT_PINNED, firstRightPinned);\n  };\n\n  CellCtrl.prototype.onLastLeftPinnedChanged = function () {\n    if (!this.cellComp) {\n      return;\n    }\n\n    var lastLeftPinned = this.column.isLastLeftPinned();\n    this.cellComp.addOrRemoveCssClass(CSS_CELL_LAST_LEFT_PINNED, lastLeftPinned);\n  };\n\n  CellCtrl.prototype.onCellFocused = function (event) {\n    if (!this.cellComp) {\n      return;\n    }\n\n    var cellFocused = this.beans.focusService.isCellFocused(this.cellPosition);\n\n    if (!this.gow.isSuppressCellSelection()) {\n      this.cellComp.addOrRemoveCssClass(CSS_CELL_FOCUS, cellFocused);\n    } // see if we need to force browser focus - this can happen if focus is programmatically set\n\n\n    if (cellFocused && event && event.forceBrowserFocus) {\n      var focusEl = this.cellComp.getFocusableElement();\n      focusEl.focus(); // Fix for AG-3465 \"IE11 - After editing cell's content, selection doesn't go one cell below on enter\"\n      // IE can fail to focus the cell after the first call to focus(), and needs a second call\n\n      if (!document.activeElement || document.activeElement === document.body) {\n        focusEl.focus();\n      }\n    } // if another cell was focused, and we are editing, then stop editing\n\n\n    var fullRowEdit = this.beans.gridOptionsWrapper.isFullRowEdit();\n\n    if (!cellFocused && !fullRowEdit && this.editing) {\n      this.stopRowOrCellEdit();\n    }\n  };\n\n  CellCtrl.prototype.createCellPosition = function () {\n    this.cellPosition = {\n      rowIndex: this.rowNode.rowIndex,\n      rowPinned: this.rowNode.rowPinned,\n      column: this.column\n    };\n  }; // CSS Classes that only get applied once, they never change\n\n\n  CellCtrl.prototype.applyStaticCssClasses = function () {\n    this.cellComp.addOrRemoveCssClass(CSS_CELL, true);\n    this.cellComp.addOrRemoveCssClass(CSS_CELL_NOT_INLINE_EDITING, true); // normal cells fill the height of the row. autoHeight cells have no height to let them\n    // fit the height of content.\n    // const autoHeight = this.column.getColDef().autoHeight == true;\n    // this.cellComp.addOrRemoveCssClass(CSS_AUTO_HEIGHT, autoHeight);\n    // this.cellComp.addOrRemoveCssClass(CSS_NORMAL_HEIGHT, !autoHeight);\n\n    this.cellComp.addOrRemoveCssClass(CSS_NORMAL_HEIGHT, true);\n  };\n\n  CellCtrl.prototype.onColumnHover = function () {\n    if (!this.cellComp) {\n      return;\n    }\n\n    if (!this.beans.gridOptionsWrapper.isColumnHoverHighlight()) {\n      return;\n    }\n\n    var isHovered = this.beans.columnHoverService.isHovered(this.column);\n    this.cellComp.addOrRemoveCssClass(CSS_COLUMN_HOVER, isHovered);\n  };\n\n  CellCtrl.prototype.onNewColumnsLoaded = function () {\n    if (!this.cellComp) {\n      return;\n    }\n\n    this.setWrapText();\n\n    if (!this.editing) {\n      this.refreshCell({\n        forceRefresh: true\n      });\n    }\n  };\n\n  CellCtrl.prototype.setWrapText = function () {\n    var value = this.column.getColDef().wrapText == true;\n    this.cellComp.addOrRemoveCssClass(CSS_CELL_WRAP_TEXT, value);\n  };\n\n  CellCtrl.prototype.dispatchCellContextMenuEvent = function (event) {\n    var colDef = this.column.getColDef();\n    var cellContextMenuEvent = this.createEvent(event, Events.EVENT_CELL_CONTEXT_MENU);\n    this.beans.eventService.dispatchEvent(cellContextMenuEvent);\n\n    if (colDef.onCellContextMenu) {\n      // to make the callback async, do in a timeout\n      window.setTimeout(function () {\n        return colDef.onCellContextMenu(cellContextMenuEvent);\n      }, 0);\n    }\n  };\n\n  CellCtrl.prototype.getCellRenderer = function () {\n    return this.cellComp ? this.cellComp.getCellRenderer() : null;\n  };\n\n  CellCtrl.prototype.getCellEditor = function () {\n    return this.cellComp ? this.cellComp.getCellEditor() : null;\n  };\n\n  CellCtrl.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n  };\n\n  CellCtrl.prototype.createSelectionCheckbox = function () {\n    var cbSelectionComponent = new CheckboxSelectionComponent();\n    this.beans.context.createBean(cbSelectionComponent);\n    cbSelectionComponent.init({\n      rowNode: this.rowNode,\n      column: this.column\n    }); // put the checkbox in before the value\n\n    return cbSelectionComponent;\n  };\n\n  CellCtrl.prototype.createDndSource = function () {\n    var dndSourceComp = new DndSourceComp(this.rowNode, this.column, this.beans, this.eGui);\n    this.beans.context.createBean(dndSourceComp);\n    return dndSourceComp;\n  };\n\n  CellCtrl.prototype.registerRowDragger = function (customElement, dragStartPixels) {\n    var _this = this; // if previously existed, then we are only updating\n\n\n    if (this.customRowDragComp) {\n      this.customRowDragComp.setDragElement(customElement, dragStartPixels);\n      return;\n    }\n\n    var newComp = this.createRowDragComp(customElement, dragStartPixels);\n\n    if (newComp) {\n      this.customRowDragComp = newComp;\n      this.addDestroyFunc(function () {\n        return _this.beans.context.destroyBean(newComp);\n      });\n    }\n  };\n\n  CellCtrl.prototype.createRowDragComp = function (customElement, dragStartPixels) {\n    var _this = this;\n\n    var pagination = this.beans.gridOptionsWrapper.isPagination();\n    var rowDragManaged = this.beans.gridOptionsWrapper.isRowDragManaged();\n    var clientSideRowModelActive = this.beans.gridOptionsWrapper.isRowModelDefault();\n\n    if (rowDragManaged) {\n      // row dragging only available in default row model\n      if (!clientSideRowModelActive) {\n        doOnce(function () {\n          return console.warn('AG Grid: managed row dragging is only allowed in the Client Side Row Model');\n        }, 'CellComp.addRowDragging');\n        return;\n      }\n\n      if (pagination) {\n        doOnce(function () {\n          return console.warn('AG Grid: managed row dragging is not possible when doing pagination');\n        }, 'CellComp.addRowDragging');\n        return;\n      }\n    } // otherwise (normal case) we are creating a RowDraggingComp for the first time\n\n\n    var rowDragComp = new RowDragComp(function () {\n      return _this.value;\n    }, this.rowNode, this.column, customElement, dragStartPixels);\n    this.beans.context.createBean(rowDragComp);\n    return rowDragComp;\n  };\n\n  CellCtrl.DOM_DATA_KEY_CELL_CTRL = 'cellCtrl';\n  return CellCtrl;\n}(BeanStub);\n\nexport { CellCtrl };","map":{"version":3,"sources":["/Users/mphelps/react-app/TasQDashboard-main/node_modules/@ag-grid-community/core/dist/es6/rendering/cell/cellCtrl.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","RowNode","Events","CellRangeFeature","exists","BeanStub","CellPositionFeature","escapeString","CellCustomStyleFeature","CellTooltipFeature","CellMouseListenerFeature","CellKeyboardListenerFeature","KeyCode","CheckboxSelectionComponent","DndSourceComp","doOnce","RowDragComp","CSS_CELL","CSS_AUTO_HEIGHT","CSS_NORMAL_HEIGHT","CSS_CELL_FOCUS","CSS_CELL_FIRST_RIGHT_PINNED","CSS_CELL_LAST_LEFT_PINNED","CSS_CELL_NOT_INLINE_EDITING","CSS_CELL_INLINE_EDITING","CSS_CELL_POPUP_EDITING","CSS_COLUMN_HOVER","CSS_CELL_WRAP_TEXT","instanceIdSequence","CellCtrl","_super","column","rowNode","beans","rowCtrl","_this","suppressRefreshCell","instanceId","getId","createCellPosition","addFeatures","cellPositionFeature","addDestroyFunc","destroy","cellCustomStyleFeature","cellTooltipFeature","cellMouseListenerFeature","cellKeyboardListenerFeature","scope","rangeSelectionEnabled","rangeService","gridOptionsWrapper","isEnableRangeSelection","cellRangeFeature","setComp","comp","eGui","printLayout","startEditing","cellComp","gow","updateAndFormatValue","addDomData","onCellFocused","applyStaticCssClasses","setWrapText","onFirstRightPinnedChanged","onLastLeftPinnedChanged","onColumnHover","setupControlComps","setupAriaExpanded","colIdSanitised","ariaColIndex","columnModel","getAriaColumnIndex","setTabIndex","setRole","setAriaColIndex","setColId","setUnselectable","isEnableCellTextSelection","isCellEditable","showValue","destroyAutoHeight","setupAutoHeight","eParentOfValue","getColDef","autoHeight","autoHeightElement","listener","newHeight","offsetHeight","setRowAutoHeight","destroyResizeObserver","resizeObserverService","observeResize","undefined","getInstanceId","forceNewCellRendererInstance","valueToDisplay","valueFormatted","value","params","createCellRendererParams","compDetails","userComponentFactory","getCellRendererDetails","setRenderDetails","refreshHandle","colDef","includeSelection","isIncludeControl","checkboxSelection","includeRowDrag","rowDrag","includeDndSource","dndSource","forceWrapper","setIncludeSelection","setIncludeDndSource","setIncludeRowDrag","setForceWrapper","rowNodePinned","rowPinned","isFunc","res","isExpandable","showRowGroup","rowGroupColumn","showingAllGroups","showingThisGroup","getColId","colMatches","setAriaExpanded","expanded","addManagedListener","EVENT_EXPANDED_CHANGED","refreshShouldDestroy","selectionChanged","rowDragChanged","dndSourceChanged","keyPress","charPress","cellStartedEdit","editing","editorParams","createCellEditorParams","getCellEditorDetails","popup","cellEditorPopup","position","cellEditorPopupPosition","setEditing","setEditDetails","event","createEvent","EVENT_CELL_EDITING_STARTED","eventService","dispatchEvent","inPopup","editingInPopup","setInlineEditingClass","stopRowOrCellEdit","cancel","isFullRowEdit","stopRowEditing","stopEditing","onPopupEditorClosed","isEditing","stopEditingAndFocus","takeValueFromCellEditor","noValueResult","newValueExists","cellEditor","getCellEditor","userWantsToCancel","isCancelAfterEnd","newValue","getValue","saveNewValue","oldValue","setDataValue","_a","getValueFromValueService","refreshCell","forceRefresh","suppressFlash","dispatchEditingStoppedEvent","editingStoppedEvent","EVENT_CELL_EDITING_STOPPED","isAlive","editingInline","popupEditorShowing","addOrRemoveCssClass","setInlineEditingCss","hackSayEditingInPopup","rowIndex","getCellPosition","node","data","api","getApi","columnApi","getColumnApi","context","getContext","onKeyDown","bind","eGridCell","getGui","parseValue","formatValue","$scope","addRowCompListener","eventType","console","warn","addEventListener","setValue","valueService","getParentOfValue","registerRowDragger","rowDraggerElement","dragStartPixels","valueParser","expressionService","evaluate","setFocusOutOnEditor","focusOut","setFocusInOnEditor","focusIn","focusCell","onCellChanged","eventImpactsThisCell","newData","suppressCellFlash","noValueProvided","field","valueGetter","valuesDifferent","dataNeedsUpdating","processingFilterChange","filterManager","isSuppressFlashingCellsBecauseFiltering","flashCell","isEnableCellChangeFlash","enableCellChangeFlash","applyUserStyles","applyClassesFromColDef","refreshToolTip","applyCellClassRules","suppressNavigateAfterEdit","navigateAfterEdit","fullRowEdit","enterMovesDownAfterEdit","isEnterMovesDownAfterEdit","navigationService","navigateToNextCell","DOWN","delays","flashDelay","fadeDelay","animateCell","cssName","fullName","animationFullName","getCellFlashDelay","getCellFadeDelay","window","setTimeout","setTransition","onFlashCells","cellId","cellPositionUtils","createId","shouldFlash","cells","callValueFormatter","valueFormatterService","force","oldValueFormatted","valuesAreEqual","val1","val2","equals","getComp","lockedClosedGroup","leafGroup","isPivotMode","isOpenGroup","group","footer","groupFootersEnabled","isGroupIncludeFooter","groupAlwaysShowAggData","isGroupSuppressBlankHeader","ignoreAggData","getValueFormatted","element","setDomData","DOM_DATA_KEY_CELL_CTRL","domEvent","type","gridApi","onKeyPress","onMouseEvent","eventName","mouseEvent","getColSpanningList","onLeftChanged","refreshAriaIndex","colIdx","isSuppressNavigable","onWidthChanged","getColumn","getRowNode","getBeans","isPrintLayout","appendChild","htmlElement","cellPosition","startRowOrCellEdit","startRowEditing","getRowCtrl","getRowPosition","updateRangeBordersIfRangeCount","onRangeSelectionChanged","isRangeSelectionEnabled","forceBrowserFocus","focusService","setFocusedCell","onRowIndexChanged","firstRightPinned","isFirstRightPinned","lastLeftPinned","isLastLeftPinned","cellFocused","isCellFocused","isSuppressCellSelection","focusEl","getFocusableElement","focus","document","activeElement","body","isColumnHoverHighlight","isHovered","columnHoverService","onNewColumnsLoaded","wrapText","dispatchCellContextMenuEvent","cellContextMenuEvent","EVENT_CELL_CONTEXT_MENU","onCellContextMenu","getCellRenderer","createSelectionCheckbox","cbSelectionComponent","createBean","init","createDndSource","dndSourceComp","customElement","customRowDragComp","setDragElement","newComp","createRowDragComp","destroyBean","pagination","isPagination","rowDragManaged","isRowDragManaged","clientSideRowModelActive","isRowModelDefault","rowDragComp"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIA,SAAS,GAAI,QAAQ,KAAKA,SAAd,IAA6B,YAAY;AACrD,MAAIC,aAAa,GAAG,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChCF,IAAAA,aAAa,GAAGG,MAAM,CAACC,cAAP,IACX;AAAEC,MAAAA,SAAS,EAAE;AAAb,iBAA6BC,KAA7B,IAAsC,UAAUL,CAAV,EAAaC,CAAb,EAAgB;AAAED,MAAAA,CAAC,CAACI,SAAF,GAAcH,CAAd;AAAkB,KAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AAAE,WAAK,IAAIK,CAAT,IAAcL,CAAd,EAAiB,IAAIA,CAAC,CAACM,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBN,CAAC,CAACM,CAAD,CAAD,GAAOL,CAAC,CAACK,CAAD,CAAR;AAAc,KAF9E;;AAGA,WAAOP,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAApB;AACH,GALD;;AAMA,SAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AACnBF,IAAAA,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAAb;;AACA,aAASO,EAAT,GAAc;AAAE,WAAKC,WAAL,GAAmBT,CAAnB;AAAuB;;AACvCA,IAAAA,CAAC,CAACU,SAAF,GAAcT,CAAC,KAAK,IAAN,GAAaC,MAAM,CAACS,MAAP,CAAcV,CAAd,CAAb,IAAiCO,EAAE,CAACE,SAAH,GAAeT,CAAC,CAACS,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;AACH,GAJD;AAKH,CAZ2C,EAA5C;;AAaA,IAAII,QAAQ,GAAI,QAAQ,KAAKA,QAAd,IAA2B,YAAY;AAClDA,EAAAA,QAAQ,GAAGV,MAAM,CAACW,MAAP,IAAiB,UAASC,CAAT,EAAY;AACpC,SAAK,IAAIC,CAAJ,EAAOC,CAAC,GAAG,CAAX,EAAcC,CAAC,GAAGC,SAAS,CAACC,MAAjC,EAAyCH,CAAC,GAAGC,CAA7C,EAAgDD,CAAC,EAAjD,EAAqD;AACjDD,MAAAA,CAAC,GAAGG,SAAS,CAACF,CAAD,CAAb;;AACA,WAAK,IAAIV,CAAT,IAAcS,CAAd,EAAiB,IAAIb,MAAM,CAACQ,SAAP,CAAiBH,cAAjB,CAAgCa,IAAhC,CAAqCL,CAArC,EAAwCT,CAAxC,CAAJ,EACbQ,CAAC,CAACR,CAAD,CAAD,GAAOS,CAAC,CAACT,CAAD,CAAR;AACP;;AACD,WAAOQ,CAAP;AACH,GAPD;;AAQA,SAAOF,QAAQ,CAACS,KAAT,CAAe,IAAf,EAAqBH,SAArB,CAAP;AACH,CAVD;;AAWA,SAASI,OAAT,QAAwB,wBAAxB;AACA,SAASC,MAAT,QAAuB,cAAvB;AACA,SAASC,gBAAT,QAAiC,oBAAjC;AACA,SAASC,MAAT,QAAuB,qBAAvB;AACA,SAASC,QAAT,QAAyB,wBAAzB;AACA,SAASC,mBAAT,QAAoC,uBAApC;AACA,SAASC,YAAT,QAA6B,oBAA7B;AACA,SAASC,sBAAT,QAAuC,0BAAvC;AACA,SAASC,kBAAT,QAAmC,sBAAnC;AACA,SAASC,wBAAT,QAAyC,4BAAzC;AACA,SAASC,2BAAT,QAA4C,+BAA5C;AACA,SAASC,OAAT,QAAwB,yBAAxB;AACA,SAASC,0BAAT,QAA2C,+BAA3C;AACA,SAASC,aAAT,QAA8B,kBAA9B;AACA,SAASC,MAAT,QAAuB,sBAAvB;AACA,SAASC,WAAT,QAA4B,oBAA5B;AACA,IAAIC,QAAQ,GAAG,SAAf;AACA,IAAIC,eAAe,GAAG,qBAAtB;AACA,IAAIC,iBAAiB,GAAG,uBAAxB;AACA,IAAIC,cAAc,GAAG,eAArB;AACA,IAAIC,2BAA2B,GAAG,4BAAlC;AACA,IAAIC,yBAAyB,GAAG,0BAAhC;AACA,IAAIC,2BAA2B,GAAG,4BAAlC;AACA,IAAIC,uBAAuB,GAAG,wBAA9B;AACA,IAAIC,sBAAsB,GAAG,uBAA7B;AACA,IAAIC,gBAAgB,GAAG,iBAAvB;AACA,IAAIC,kBAAkB,GAAG,mBAAzB;AACA,IAAIC,kBAAkB,GAAG,CAAzB;;AACA,IAAIC,QAAQ,GAAkB,UAAUC,MAAV,EAAkB;AAC5CrD,EAAAA,SAAS,CAACoD,QAAD,EAAWC,MAAX,CAAT;;AACA,WAASD,QAAT,CAAkBE,MAAlB,EAA0BC,OAA1B,EAAmCC,KAAnC,EAA0CC,OAA1C,EAAmD;AAC/C,QAAIC,KAAK,GAAGL,MAAM,CAAC/B,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;AACAoC,IAAAA,KAAK,CAACC,mBAAN,GAA4B,KAA5B;AACAD,IAAAA,KAAK,CAACJ,MAAN,GAAeA,MAAf;AACAI,IAAAA,KAAK,CAACH,OAAN,GAAgBA,OAAhB;AACAG,IAAAA,KAAK,CAACF,KAAN,GAAcA,KAAd;AACAE,IAAAA,KAAK,CAACD,OAAN,GAAgBA,OAAhB,CAN+C,CAO/C;;AACAC,IAAAA,KAAK,CAACE,UAAN,GAAmBN,MAAM,CAACO,KAAP,KAAiB,GAAjB,GAAuBV,kBAAkB,EAA5D;;AACAO,IAAAA,KAAK,CAACI,kBAAN;;AACAJ,IAAAA,KAAK,CAACK,WAAN;;AACA,WAAOL,KAAP;AACH;;AACDN,EAAAA,QAAQ,CAACxC,SAAT,CAAmBmD,WAAnB,GAAiC,YAAY;AACzC,QAAIL,KAAK,GAAG,IAAZ;;AACA,SAAKM,mBAAL,GAA2B,IAAInC,mBAAJ,CAAwB,IAAxB,EAA8B,KAAK2B,KAAnC,CAA3B;AACA,SAAKS,cAAL,CAAoB,YAAY;AAAE,aAAOP,KAAK,CAACM,mBAAN,CAA0BE,OAA1B,EAAP;AAA6C,KAA/E;AACA,SAAKC,sBAAL,GAA8B,IAAIpC,sBAAJ,CAA2B,IAA3B,EAAiC,KAAKyB,KAAtC,CAA9B;AACA,SAAKS,cAAL,CAAoB,YAAY;AAAE,aAAOP,KAAK,CAACS,sBAAN,CAA6BD,OAA7B,EAAP;AAAgD,KAAlF;AACA,SAAKE,kBAAL,GAA0B,IAAIpC,kBAAJ,CAAuB,IAAvB,EAA6B,KAAKwB,KAAlC,CAA1B;AACA,SAAKS,cAAL,CAAoB,YAAY;AAAE,aAAOP,KAAK,CAACU,kBAAN,CAAyBF,OAAzB,EAAP;AAA4C,KAA9E;AACA,SAAKG,wBAAL,GAAgC,IAAIpC,wBAAJ,CAA6B,IAA7B,EAAmC,KAAKuB,KAAxC,EAA+C,KAAKF,MAApD,CAAhC;AACA,SAAKW,cAAL,CAAoB,YAAY;AAAE,aAAOP,KAAK,CAACW,wBAAN,CAA+BH,OAA/B,EAAP;AAAkD,KAApF;AACA,SAAKI,2BAAL,GAAmC,IAAIpC,2BAAJ,CAAgC,IAAhC,EAAsC,KAAKsB,KAA3C,EAAkD,KAAKF,MAAvD,EAA+D,KAAKC,OAApE,EAA6E,KAAKgB,KAAlF,EAAyF,KAAKd,OAA9F,CAAnC;AACA,SAAKQ,cAAL,CAAoB,YAAY;AAAE,aAAOP,KAAK,CAACY,2BAAN,CAAkCJ,OAAlC,EAAP;AAAqD,KAAvF;AACA,QAAIM,qBAAqB,GAAG,KAAKhB,KAAL,CAAWiB,YAAX,IAA2B,KAAKjB,KAAL,CAAWkB,kBAAX,CAA8BC,sBAA9B,EAAvD;;AACA,QAAIH,qBAAJ,EAA2B;AACvB,WAAKI,gBAAL,GAAwB,IAAIlD,gBAAJ,CAAqB,KAAK8B,KAA1B,EAAiC,IAAjC,CAAxB;AACA,WAAKS,cAAL,CAAoB,YAAY;AAAE,eAAOP,KAAK,CAACkB,gBAAN,CAAuBV,OAAvB,EAAP;AAA0C,OAA5E;AACH;AACJ,GAjBD;;AAkBAd,EAAAA,QAAQ,CAACxC,SAAT,CAAmBiE,OAAnB,GAA6B,UAAUC,IAAV,EAAgBP,KAAhB,EAAuBQ,IAAvB,EAA6BC,WAA7B,EAA0CC,YAA1C,EAAwD;AACjF,QAAIvB,KAAK,GAAG,IAAZ;;AACA,SAAKwB,QAAL,GAAgBJ,IAAhB;AACA,SAAKK,GAAL,GAAW,KAAK3B,KAAL,CAAWkB,kBAAtB;AACA,SAAKH,KAAL,GAAaA,KAAb;AACA,SAAKQ,IAAL,GAAYA,IAAZ;AACA,SAAKC,WAAL,GAAmBA,WAAnB,CANiF,CAOjF;AACA;;AACA,SAAKI,oBAAL,CAA0B,IAA1B;AACA,SAAKC,UAAL;AACA,SAAKC,aAAL;AACA,SAAKC,qBAAL;AACA,SAAKC,WAAL;AACA,SAAKC,yBAAL;AACA,SAAKC,uBAAL;AACA,SAAKC,aAAL;AACA,SAAKC,iBAAL;AACA,SAAKC,iBAAL;AACA,QAAIC,cAAc,GAAGhE,YAAY,CAAC,KAAKwB,MAAL,CAAYO,KAAZ,EAAD,CAAjC;AACA,QAAIkC,YAAY,GAAG,KAAKvC,KAAL,CAAWwC,WAAX,CAAuBC,kBAAvB,CAA0C,KAAK3C,MAA/C,CAAnB;AACA,SAAK4B,QAAL,CAAcgB,WAAd,CAA0B,CAAC,CAA3B;AACA,SAAKhB,QAAL,CAAciB,OAAd,CAAsB,UAAtB;AACA,SAAKjB,QAAL,CAAckB,eAAd,CAA8BL,YAA9B;AACA,SAAKb,QAAL,CAAcmB,QAAd,CAAuBP,cAAvB;AACA,SAAKZ,QAAL,CAAcoB,eAAd,CAA8B,CAAC,KAAK9C,KAAL,CAAWkB,kBAAX,CAA8B6B,yBAA9B,EAAD,GAA6D,IAA7D,GAAoE,IAAlG;AACA,SAAKvC,mBAAL,CAAyBa,OAAzB,CAAiCC,IAAjC;AACA,SAAKX,sBAAL,CAA4BU,OAA5B,CAAoCC,IAApC,EAA0CP,KAA1C;AACA,SAAKH,kBAAL,CAAwBS,OAAxB,CAAgCC,IAAhC;AACA,SAAKR,2BAAL,CAAiCO,OAAjC,CAAyC,KAAKE,IAA9C;;AACA,QAAI,KAAKH,gBAAT,EAA2B;AACvB,WAAKA,gBAAL,CAAsBC,OAAtB,CAA8BC,IAA9B;AACH;;AACD,QAAIG,YAAY,IAAI,KAAKuB,cAAL,EAApB,EAA2C;AACvC,WAAKvB,YAAL;AACH,KAFD,MAGK;AACD,WAAKwB,SAAL;AACH;;AACD,SAAKxC,cAAL,CAAoB,YAAY;AAC5BP,MAAAA,KAAK,CAACgD,iBAAN,IAA2BhD,KAAK,CAACgD,iBAAN,EAA3B;AACH,KAFD;AAGH,GA1CD;;AA2CAtD,EAAAA,QAAQ,CAACxC,SAAT,CAAmB+F,eAAnB,GAAqC,UAAUC,cAAV,EAA0B;AAC3D,QAAIlD,KAAK,GAAG,IAAZ;;AACA,QAAI,CAAC,KAAKJ,MAAL,CAAYuD,SAAZ,GAAwBC,UAA7B,EAAyC;AACrC;AACH;;AACD,QAAI,KAAKC,iBAAL,IAA0BH,cAA9B,EAA8C;AAC1C;AACH;;AACD,QAAI,KAAKF,iBAAT,EAA4B;AACxB,WAAKA,iBAAL;AACH;;AACD,SAAKK,iBAAL,GAAyBH,cAAzB;;AACA,QAAI,CAACA,cAAL,EAAqB;AACjB;AACH;;AACD,QAAII,QAAQ,GAAG,YAAY;AACvB,UAAIC,SAAS,GAAGL,cAAc,CAACM,YAA/B;;AACAxD,MAAAA,KAAK,CAACH,OAAN,CAAc4D,gBAAd,CAA+BF,SAA/B,EAA0CvD,KAAK,CAACJ,MAAhD;AACH,KAHD,CAf2D,CAmB3D;;;AACA0D,IAAAA,QAAQ;AACR,QAAII,qBAAqB,GAAG,KAAK5D,KAAL,CAAW6D,qBAAX,CAAiCC,aAAjC,CAA+CV,cAA/C,EAA+DI,QAA/D,CAA5B;;AACA,SAAKN,iBAAL,GAAyB,YAAY;AACjCU,MAAAA,qBAAqB;;AACrB1D,MAAAA,KAAK,CAACH,OAAN,CAAc4D,gBAAd,CAA+BI,SAA/B,EAA0C7D,KAAK,CAACJ,MAAhD;AACH,KAHD;AAIH,GA1BD;;AA2BAF,EAAAA,QAAQ,CAACxC,SAAT,CAAmB4G,aAAnB,GAAmC,YAAY;AAC3C,WAAO,KAAK5D,UAAZ;AACH,GAFD;;AAGAR,EAAAA,QAAQ,CAACxC,SAAT,CAAmB6F,SAAnB,GAA+B,UAAUgB,4BAAV,EAAwC;AACnE,QAAIA,4BAA4B,KAAK,KAAK,CAA1C,EAA6C;AAAEA,MAAAA,4BAA4B,GAAG,KAA/B;AAAuC;;AACtF,QAAIC,cAAc,GAAG,KAAKC,cAAL,IAAuB,IAAvB,GAA8B,KAAKA,cAAnC,GAAoD,KAAKC,KAA9E;AACA,QAAIC,MAAM,GAAG,KAAKC,wBAAL,EAAb;AACA,QAAIC,WAAW,GAAG,KAAKvE,KAAL,CAAWwE,oBAAX,CAAgCC,sBAAhC,CAAuD,KAAK3E,MAAL,CAAYuD,SAAZ,EAAvD,EAAgFgB,MAAhF,CAAlB;AACA,SAAK3C,QAAL,CAAcgD,gBAAd,CAA+BH,WAA/B,EAA4CL,cAA5C,EAA4DD,4BAA5D;AACA,SAAKU,aAAL;AACH,GAPD;;AAQA/E,EAAAA,QAAQ,CAACxC,SAAT,CAAmBgF,iBAAnB,GAAuC,YAAY;AAC/C,QAAIwC,MAAM,GAAG,KAAK9E,MAAL,CAAYuD,SAAZ,EAAb;AACA,SAAKwB,gBAAL,GAAwB,KAAKC,gBAAL,CAAsBF,MAAM,CAACG,iBAA7B,CAAxB;AACA,SAAKC,cAAL,GAAsB,KAAKF,gBAAL,CAAsBF,MAAM,CAACK,OAA7B,CAAtB;AACA,SAAKC,gBAAL,GAAwB,KAAKJ,gBAAL,CAAsBF,MAAM,CAACO,SAA7B,CAAxB,CAJ+C,CAK/C;;AACA,QAAIC,YAAY,GAAG,KAAKpF,KAAL,CAAWkB,kBAAX,CAA8B6B,yBAA9B,MAA6D,KAAKjD,MAAL,CAAYuD,SAAZ,GAAwBC,UAAxB,IAAsC,IAAtH;AACA,SAAK5B,QAAL,CAAc2D,mBAAd,CAAkC,KAAKR,gBAAvC;AACA,SAAKnD,QAAL,CAAc4D,mBAAd,CAAkC,KAAKJ,gBAAvC;AACA,SAAKxD,QAAL,CAAc6D,iBAAd,CAAgC,KAAKP,cAArC;AACA,SAAKtD,QAAL,CAAc8D,eAAd,CAA8BJ,YAA9B;AACH,GAXD;;AAYAxF,EAAAA,QAAQ,CAACxC,SAAT,CAAmB0H,gBAAnB,GAAsC,UAAUV,KAAV,EAAiB;AACnD,QAAIqB,aAAa,GAAG,KAAK1F,OAAL,CAAa2F,SAAb,IAA0B,IAA9C;AACA,QAAIC,MAAM,GAAG,OAAOvB,KAAP,KAAiB,UAA9B;AACA,QAAIwB,GAAG,GAAGH,aAAa,GAAG,KAAH,GAAWE,MAAM,IAAIvB,KAAK,KAAK,IAAtD;AACA,WAAOwB,GAAP;AACH,GALD;;AAMAhG,EAAAA,QAAQ,CAACxC,SAAT,CAAmBiF,iBAAnB,GAAuC,YAAY;AAC/C,QAAInC,KAAK,GAAG,IAAZ;;AACA,QAAI0E,MAAM,GAAG,KAAK9E,MAAL,CAAYuD,SAAZ,EAAb;;AACA,QAAI,CAAC,KAAKtD,OAAL,CAAa8F,YAAb,EAAL,EAAkC;AAC9B;AACH;;AACD,QAAIC,YAAY,GAAGlB,MAAM,CAACkB,YAA1B;AACA,QAAIC,cAAc,GAAG,KAAKhG,OAAL,CAAagG,cAAlC;AACA,QAAIC,gBAAgB,GAAGF,YAAY,KAAK,IAAxC;AACA,QAAIG,gBAAgB,GAAGF,cAAc,IAAIA,cAAc,CAACG,QAAf,OAA8BJ,YAAvE;AACA,QAAIK,UAAU,GAAGH,gBAAgB,IAAIC,gBAArC;;AACA,QAAI,CAACE,UAAL,EAAiB;AACb;AACH;;AACD,QAAI3C,QAAQ,GAAG,YAAY;AACvBtD,MAAAA,KAAK,CAACwB,QAAN,CAAe0E,eAAf,CAA+B,CAAC,CAAClG,KAAK,CAACH,OAAN,CAAcsG,QAA/C;AACH,KAFD;;AAGA,SAAKC,kBAAL,CAAwB,KAAKvG,OAA7B,EAAsC/B,OAAO,CAACuI,sBAA9C,EAAsE/C,QAAtE;AACAA,IAAAA,QAAQ;AACX,GAnBD;;AAoBA5D,EAAAA,QAAQ,CAACxC,SAAT,CAAmBoJ,oBAAnB,GAA0C,YAAY;AAClD,QAAI5B,MAAM,GAAG,KAAK9E,MAAL,CAAYuD,SAAZ,EAAb;AACA,QAAIoD,gBAAgB,GAAG,KAAK5B,gBAAL,IAAyB,KAAKC,gBAAL,CAAsBF,MAAM,CAACG,iBAA7B,CAAhD;AACA,QAAI2B,cAAc,GAAG,KAAK1B,cAAL,IAAuB,KAAKF,gBAAL,CAAsBF,MAAM,CAACK,OAA7B,CAA5C;AACA,QAAI0B,gBAAgB,GAAG,KAAKzB,gBAAL,IAAyB,KAAKJ,gBAAL,CAAsBF,MAAM,CAACO,SAA7B,CAAhD;AACA,WAAOsB,gBAAgB,IAAIC,cAApB,IAAsCC,gBAA7C;AACH,GAND,CAxJ4C,CA+J5C;;;AACA/G,EAAAA,QAAQ,CAACxC,SAAT,CAAmBqE,YAAnB,GAAkC,UAAUmF,QAAV,EAAoBC,SAApB,EAA+BC,eAA/B,EAAgD;AAC9E,QAAIF,QAAQ,KAAK,KAAK,CAAtB,EAAyB;AAAEA,MAAAA,QAAQ,GAAG,IAAX;AAAkB;;AAC7C,QAAIC,SAAS,KAAK,KAAK,CAAvB,EAA0B;AAAEA,MAAAA,SAAS,GAAG,IAAZ;AAAmB;;AAC/C,QAAIC,eAAe,KAAK,KAAK,CAA7B,EAAgC;AAAEA,MAAAA,eAAe,GAAG,KAAlB;AAA0B;;AAC5D,QAAI,CAAC,KAAK9D,cAAL,EAAD,IAA0B,KAAK+D,OAAnC,EAA4C;AACxC;AACH;;AACD,QAAIC,YAAY,GAAG,KAAKC,sBAAL,CAA4BL,QAA5B,EAAsCC,SAAtC,EAAiDC,eAAjD,CAAnB;AACA,QAAIlC,MAAM,GAAG,KAAK9E,MAAL,CAAYuD,SAAZ,EAAb;AACA,QAAIkB,WAAW,GAAG,KAAKvE,KAAL,CAAWwE,oBAAX,CAAgC0C,oBAAhC,CAAqDtC,MAArD,EAA6DoC,YAA7D,CAAlB;AACA,QAAIG,KAAK,GAAG,CAAC,CAACvC,MAAM,CAACwC,eAArB;AACA,QAAIC,QAAQ,GAAGzC,MAAM,CAAC0C,uBAAtB;AACA,SAAKC,UAAL,CAAgB,IAAhB,EAAsBJ,KAAtB;AACA,SAAKzF,QAAL,CAAc8F,cAAd,CAA6BjD,WAA7B,EAA0C4C,KAA1C,EAAiDE,QAAjD;AACA,QAAII,KAAK,GAAG,KAAKC,WAAL,CAAiB,IAAjB,EAAuBzJ,MAAM,CAAC0J,0BAA9B,CAAZ;AACA,SAAK3H,KAAL,CAAW4H,YAAX,CAAwBC,aAAxB,CAAsCJ,KAAtC;AACH,GAhBD;;AAiBA7H,EAAAA,QAAQ,CAACxC,SAAT,CAAmBmK,UAAnB,GAAgC,UAAUR,OAAV,EAAmBe,OAAnB,EAA4B;AACxD,QAAIA,OAAO,KAAK,KAAK,CAArB,EAAwB;AAAEA,MAAAA,OAAO,GAAG,KAAV;AAAkB;;AAC5C,QAAI,KAAKf,OAAL,KAAiBA,OAArB,EAA8B;AAC1B;AACH;;AACD,SAAKA,OAAL,GAAeA,OAAf;AACA,SAAKgB,cAAL,GAAsBD,OAAtB;AACA,SAAKE,qBAAL;;AACA,QAAI,CAACjB,OAAL,EAAc;AACV,WAAKrF,QAAL,CAAc8F,cAAd;AACH;AACJ,GAXD,CAjL4C,CA6L5C;;;AACA5H,EAAAA,QAAQ,CAACxC,SAAT,CAAmB6K,iBAAnB,GAAuC,UAAUC,MAAV,EAAkB;AACrD,QAAIA,MAAM,KAAK,KAAK,CAApB,EAAuB;AAAEA,MAAAA,MAAM,GAAG,KAAT;AAAiB;;AAC1C,QAAI,KAAKlI,KAAL,CAAWkB,kBAAX,CAA8BiH,aAA9B,EAAJ,EAAmD;AAC/C,WAAKlI,OAAL,CAAamI,cAAb,CAA4BF,MAA5B;AACH,KAFD,MAGK;AACD,WAAKG,WAAL,CAAiBH,MAAjB;AACH;AACJ,GARD;;AASAtI,EAAAA,QAAQ,CAACxC,SAAT,CAAmBkL,mBAAnB,GAAyC,YAAY;AACjD,QAAI,CAAC,KAAKC,SAAL,EAAL,EAAuB;AACnB;AACH,KAHgD,CAIjD;AACA;AACA;;;AACA,SAAKC,mBAAL;AACH,GARD;;AASA5I,EAAAA,QAAQ,CAACxC,SAAT,CAAmBqL,uBAAnB,GAA6C,UAAUP,MAAV,EAAkB;AAC3D,QAAIQ,aAAa,GAAG;AAAEC,MAAAA,cAAc,EAAE;AAAlB,KAApB;;AACA,QAAIT,MAAJ,EAAY;AACR,aAAOQ,aAAP;AACH;;AACD,QAAIE,UAAU,GAAG,KAAKlH,QAAL,CAAcmH,aAAd,EAAjB;;AACA,QAAI,CAACD,UAAL,EAAiB;AACb,aAAOF,aAAP;AACH;;AACD,QAAII,iBAAiB,GAAGF,UAAU,CAACG,gBAAX,IAA+BH,UAAU,CAACG,gBAAX,EAAvD;;AACA,QAAID,iBAAJ,EAAuB;AACnB,aAAOJ,aAAP;AACH;;AACD,QAAIM,QAAQ,GAAGJ,UAAU,CAACK,QAAX,EAAf;AACA,WAAO;AACHD,MAAAA,QAAQ,EAAEA,QADP;AAEHL,MAAAA,cAAc,EAAE;AAFb,KAAP;AAIH,GAlBD;;AAmBA/I,EAAAA,QAAQ,CAACxC,SAAT,CAAmB8L,YAAnB,GAAkC,UAAUC,QAAV,EAAoBH,QAApB,EAA8B;AAC5D,QAAIA,QAAQ,KAAKG,QAAjB,EAA2B;AACvB;AACA;AACA;AACA;AACA,WAAKhJ,mBAAL,GAA2B,IAA3B;AACA,WAAKJ,OAAL,CAAaqJ,YAAb,CAA0B,KAAKtJ,MAA/B,EAAuCkJ,QAAvC;AACA,WAAK7I,mBAAL,GAA2B,KAA3B;AACH;AACJ,GAVD;;AAWAP,EAAAA,QAAQ,CAACxC,SAAT,CAAmBiL,WAAnB,GAAiC,UAAUH,MAAV,EAAkB;AAC/C,QAAIA,MAAM,KAAK,KAAK,CAApB,EAAuB;AAAEA,MAAAA,MAAM,GAAG,KAAT;AAAiB;;AAC1C,QAAI,CAAC,KAAKnB,OAAV,EAAmB;AACf;AACH;;AACD,QAAIsC,EAAE,GAAG,KAAKZ,uBAAL,CAA6BP,MAA7B,CAAT;AAAA,QAA+Cc,QAAQ,GAAGK,EAAE,CAACL,QAA7D;AAAA,QAAuEL,cAAc,GAAGU,EAAE,CAACV,cAA3F;;AACA,QAAIQ,QAAQ,GAAG,KAAKG,wBAAL,EAAf;;AACA,QAAIX,cAAJ,EAAoB;AAChB,WAAKO,YAAL,CAAkBC,QAAlB,EAA4BH,QAA5B;AACH;;AACD,SAAKzB,UAAL,CAAgB,KAAhB;AACA,SAAK3F,oBAAL;AACA,SAAK2H,WAAL,CAAiB;AAAEC,MAAAA,YAAY,EAAE,IAAhB;AAAsBC,MAAAA,aAAa,EAAE;AAArC,KAAjB;AACA,SAAKC,2BAAL,CAAiCP,QAAjC,EAA2CH,QAA3C;AACH,GAdD;;AAeApJ,EAAAA,QAAQ,CAACxC,SAAT,CAAmBsM,2BAAnB,GAAiD,UAAUP,QAAV,EAAoBH,QAApB,EAA8B;AAC3E,QAAIW,mBAAmB,GAAGrM,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAK,KAAKoK,WAAL,CAAiB,IAAjB,EAAuBzJ,MAAM,CAAC2L,0BAA9B,CAAL,CAAT,EAA0E;AAAET,MAAAA,QAAQ,EAAEA,QAAZ;AACxGH,MAAAA,QAAQ,EAAEA;AAD8F,KAA1E,CAAlC;;AAEA,SAAKhJ,KAAL,CAAW4H,YAAX,CAAwBC,aAAxB,CAAsC8B,mBAAtC;AACH,GAJD,CA7P4C,CAkQ5C;AACA;;;AACA/J,EAAAA,QAAQ,CAACxC,SAAT,CAAmB4K,qBAAnB,GAA2C,YAAY;AACnD,QAAI,CAAC,KAAK6B,OAAL,EAAL,EAAqB;AACjB;AACH,KAHkD,CAInD;AACA;AACA;AACA;AACA;AACA;;;AACA,QAAIC,aAAa,GAAG,KAAK/C,OAAL,IAAgB,CAAC,KAAKgB,cAA1C;AACA,QAAIgC,kBAAkB,GAAG,KAAKhD,OAAL,IAAgB,KAAKgB,cAA9C;AACA,SAAKrG,QAAL,CAAcsI,mBAAd,CAAkCzK,uBAAlC,EAA2DuK,aAA3D;AACA,SAAKpI,QAAL,CAAcsI,mBAAd,CAAkC1K,2BAAlC,EAA+D,CAACwK,aAAhE;AACA,SAAKpI,QAAL,CAAcsI,mBAAd,CAAkCxK,sBAAlC,EAA0DuK,kBAA1D;AACA,SAAK9J,OAAL,CAAagK,mBAAb,CAAiC,KAAKlD,OAAtC;AACH,GAhBD,CApQ4C,CAqR5C;AACA;;;AACAnH,EAAAA,QAAQ,CAACxC,SAAT,CAAmB8M,qBAAnB,GAA2C,YAAY;AACnD,QAAI,KAAKnC,cAAT,EAAyB;AACrB;AACH;;AACD,SAAKA,cAAL,GAAsB,IAAtB;AACA,SAAKC,qBAAL;AACH,GAND;;AAOApI,EAAAA,QAAQ,CAACxC,SAAT,CAAmB6J,sBAAnB,GAA4C,UAAUL,QAAV,EAAoBC,SAApB,EAA+BC,eAA/B,EAAgD;AACxF,QAAIlB,GAAG,GAAG;AACNxB,MAAAA,KAAK,EAAE,KAAKkF,wBAAL,EADD;AAEN1C,MAAAA,QAAQ,EAAEA,QAFJ;AAGNC,MAAAA,SAAS,EAAEA,SAHL;AAIN/G,MAAAA,MAAM,EAAE,KAAKA,MAJP;AAKN8E,MAAAA,MAAM,EAAE,KAAK9E,MAAL,CAAYuD,SAAZ,EALF;AAMN8G,MAAAA,QAAQ,EAAE,KAAKC,eAAL,GAAuBD,QAN3B;AAONE,MAAAA,IAAI,EAAE,KAAKtK,OAPL;AAQNuK,MAAAA,IAAI,EAAE,KAAKvK,OAAL,CAAauK,IARb;AASNC,MAAAA,GAAG,EAAE,KAAKvK,KAAL,CAAWkB,kBAAX,CAA8BsJ,MAA9B,EATC;AAUN1D,MAAAA,eAAe,EAAEA,eAVX;AAWN2D,MAAAA,SAAS,EAAE,KAAKzK,KAAL,CAAWkB,kBAAX,CAA8BwJ,YAA9B,EAXL;AAYNC,MAAAA,OAAO,EAAE,KAAK3K,KAAL,CAAWkB,kBAAX,CAA8B0J,UAA9B,EAZH;AAaNC,MAAAA,SAAS,EAAE,KAAKA,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAbL;AAcNzC,MAAAA,WAAW,EAAE,KAAKG,mBAAL,CAAyBsC,IAAzB,CAA8B,IAA9B,CAdP;AAeNC,MAAAA,SAAS,EAAE,KAAKC,MAAL,EAfL;AAgBNC,MAAAA,UAAU,EAAE,KAAKA,UAAL,CAAgBH,IAAhB,CAAqB,IAArB,CAhBN;AAiBNI,MAAAA,WAAW,EAAE,KAAKA,WAAL,CAAiBJ,IAAjB,CAAsB,IAAtB;AAjBP,KAAV;;AAmBA,QAAI,KAAK/J,KAAT,EAAgB;AACZ6E,MAAAA,GAAG,CAACuF,MAAJ,GAAa,KAAKpK,KAAlB;AACH;;AACD,WAAO6E,GAAP;AACH,GAxBD;;AAyBAhG,EAAAA,QAAQ,CAACxC,SAAT,CAAmBkH,wBAAnB,GAA8C,YAAY;AACtD,QAAIpE,KAAK,GAAG,IAAZ;;AACA,QAAIkL,kBAAkB,GAAG,UAAUC,SAAV,EAAqB7H,QAArB,EAA+B;AACpD8H,MAAAA,OAAO,CAACC,IAAR,CAAa,0YAAb;;AACArL,MAAAA,KAAK,CAACD,OAAN,CAAcuL,gBAAd,CAA+BH,SAA/B,EAA0C7H,QAA1C;AACH,KAHD;;AAIA,QAAIoC,GAAG,GAAG;AACNxB,MAAAA,KAAK,EAAE,KAAKA,KADN;AAEND,MAAAA,cAAc,EAAE,KAAKA,cAFf;AAGN8E,MAAAA,QAAQ,EAAE,KAAKK,wBAAL,CAA8BwB,IAA9B,CAAmC,IAAnC,CAHJ;AAINW,MAAAA,QAAQ,EAAE,UAAUrH,KAAV,EAAiB;AAAE,eAAOlE,KAAK,CAACF,KAAN,CAAY0L,YAAZ,CAAyBD,QAAzB,CAAkCvL,KAAK,CAACH,OAAxC,EAAiDG,KAAK,CAACJ,MAAvD,EAA+DsE,KAA/D,CAAP;AAA+E,OAJtG;AAKN8G,MAAAA,WAAW,EAAE,KAAKA,WAAL,CAAiBJ,IAAjB,CAAsB,IAAtB,CALP;AAMNR,MAAAA,IAAI,EAAE,KAAKvK,OAAL,CAAauK,IANb;AAOND,MAAAA,IAAI,EAAE,KAAKtK,OAPL;AAQN6E,MAAAA,MAAM,EAAE,KAAK9E,MAAL,CAAYuD,SAAZ,EARF;AASNvD,MAAAA,MAAM,EAAE,KAAKA,MATP;AAUNqK,MAAAA,QAAQ,EAAE,KAAKC,eAAL,GAAuBD,QAV3B;AAWNI,MAAAA,GAAG,EAAE,KAAKvK,KAAL,CAAWkB,kBAAX,CAA8BsJ,MAA9B,EAXC;AAYNC,MAAAA,SAAS,EAAE,KAAKzK,KAAL,CAAWkB,kBAAX,CAA8BwJ,YAA9B,EAZL;AAaNC,MAAAA,OAAO,EAAE,KAAK3K,KAAL,CAAWkB,kBAAX,CAA8B0J,UAA9B,EAbH;AAcNrB,MAAAA,WAAW,EAAE,KAAKA,WAAL,CAAiBuB,IAAjB,CAAsB,IAAtB,CAdP;AAeNC,MAAAA,SAAS,EAAE,KAAKC,MAAL,EAfL;AAgBN5H,MAAAA,cAAc,EAAE,KAAK1B,QAAL,CAAciK,gBAAd,EAhBV;AAiBNC,MAAAA,kBAAkB,EAAE,UAAUC,iBAAV,EAA6BC,eAA7B,EAA8C;AAAE,eAAO5L,KAAK,CAAC0L,kBAAN,CAAyBC,iBAAzB,EAA4CC,eAA5C,CAAP;AAAsE,OAjBpI;AAkBN;AACA;AACA;AACA;AACA;AACAV,MAAAA,kBAAkB,EAAEA;AAvBd,KAAV;;AAyBA,QAAI,KAAKrK,KAAT,EAAgB;AACZ6E,MAAAA,GAAG,CAACuF,MAAJ,GAAa,KAAKpK,KAAlB;AACH;;AACD,WAAO6E,GAAP;AACH,GAnCD;;AAoCAhG,EAAAA,QAAQ,CAACxC,SAAT,CAAmB6N,UAAnB,GAAgC,UAAUjC,QAAV,EAAoB;AAChD,QAAIpE,MAAM,GAAG,KAAK9E,MAAL,CAAYuD,SAAZ,EAAb;AACA,QAAIgB,MAAM,GAAG;AACTgG,MAAAA,IAAI,EAAE,KAAKtK,OADF;AAETuK,MAAAA,IAAI,EAAE,KAAKvK,OAAL,CAAauK,IAFV;AAGTnB,MAAAA,QAAQ,EAAE,KAAKF,QAAL,EAHD;AAITD,MAAAA,QAAQ,EAAEA,QAJD;AAKTpE,MAAAA,MAAM,EAAEA,MALC;AAMT9E,MAAAA,MAAM,EAAE,KAAKA,MANJ;AAOTyK,MAAAA,GAAG,EAAE,KAAKvK,KAAL,CAAWkB,kBAAX,CAA8BsJ,MAA9B,EAPI;AAQTC,MAAAA,SAAS,EAAE,KAAKzK,KAAL,CAAWkB,kBAAX,CAA8BwJ,YAA9B,EARF;AASTC,MAAAA,OAAO,EAAE,KAAK3K,KAAL,CAAWkB,kBAAX,CAA8B0J,UAA9B;AATA,KAAb;AAWA,QAAImB,WAAW,GAAGnH,MAAM,CAACmH,WAAzB;AACA,WAAO5N,MAAM,CAAC4N,WAAD,CAAN,GAAsB,KAAK/L,KAAL,CAAWgM,iBAAX,CAA6BC,QAA7B,CAAsCF,WAAtC,EAAmD1H,MAAnD,CAAtB,GAAmF2E,QAA1F;AACH,GAfD;;AAgBApJ,EAAAA,QAAQ,CAACxC,SAAT,CAAmB8O,mBAAnB,GAAyC,YAAY;AACjD,QAAI,CAAC,KAAKnF,OAAV,EAAmB;AACf;AACH;;AACD,QAAI6B,UAAU,GAAG,KAAKlH,QAAL,CAAcmH,aAAd,EAAjB;;AACA,QAAID,UAAU,IAAIA,UAAU,CAACuD,QAA7B,EAAuC;AACnCvD,MAAAA,UAAU,CAACuD,QAAX;AACH;AACJ,GARD;;AASAvM,EAAAA,QAAQ,CAACxC,SAAT,CAAmBgP,kBAAnB,GAAwC,YAAY;AAChD,QAAI,CAAC,KAAKrF,OAAV,EAAmB;AACf;AACH;;AACD,QAAI6B,UAAU,GAAG,KAAKlH,QAAL,CAAcmH,aAAd,EAAjB;;AACA,QAAID,UAAU,IAAIA,UAAU,CAACyD,OAA7B,EAAsC;AAClC;AACAzD,MAAAA,UAAU,CAACyD,OAAX;AACH,KAHD,MAIK;AACD;AACA;AACA;AACA,WAAKC,SAAL,CAAe,IAAf;AACH;AACJ,GAfD;;AAgBA1M,EAAAA,QAAQ,CAACxC,SAAT,CAAmBmP,aAAnB,GAAmC,UAAU9E,KAAV,EAAiB;AAChD,QAAI+E,oBAAoB,GAAG/E,KAAK,CAAC3H,MAAN,KAAiB,KAAKA,MAAjD;;AACA,QAAI0M,oBAAJ,EAA0B;AACtB,WAAKjD,WAAL,CAAiB,EAAjB;AACH;AACJ,GALD,CApY4C,CA0Y5C;AACA;AACA;AACA;AACA;AACA;;;AACA3J,EAAAA,QAAQ,CAACxC,SAAT,CAAmBmM,WAAnB,GAAiC,UAAUlF,MAAV,EAAkB;AAC/C;AACA,QAAI,KAAKlE,mBAAL,IAA4B,KAAK4G,OAArC,EAA8C;AAC1C;AACH;;AACD,QAAInC,MAAM,GAAG,KAAK9E,MAAL,CAAYuD,SAAZ,EAAb;AACA,QAAIoJ,OAAO,GAAGpI,MAAM,IAAI,IAAV,IAAkB,CAAC,CAACA,MAAM,CAACoI,OAAzC;AACA,QAAIhD,aAAa,GAAIpF,MAAM,IAAI,IAAV,IAAkB,CAAC,CAACA,MAAM,CAACoF,aAA5B,IAA8C,CAAC,CAAC7E,MAAM,CAAC8H,iBAA3E,CAP+C,CAQ/C;AACA;AACA;AACA;AACA;AACA;;AACA,QAAIC,eAAe,GAAG/H,MAAM,CAACgI,KAAP,IAAgB,IAAhB,IAAwBhI,MAAM,CAACiI,WAAP,IAAsB,IAA9C,IAAsDjI,MAAM,CAACkB,YAAP,IAAuB,IAAnG;AACA,QAAI0D,YAAY,GAAInF,MAAM,IAAIA,MAAM,CAACmF,YAAlB,IAAmCmD,eAAnC,IAAsDF,OAAzE;AACA,QAAIK,eAAe,GAAG,KAAKlL,oBAAL,EAAtB;AACA,QAAImL,iBAAiB,GAAGvD,YAAY,IAAIsD,eAAxC;;AACA,QAAIC,iBAAJ,EAAuB;AACnB;AACA;AACA;AACA,WAAK9J,SAAL,CAAewJ,OAAf,EAJmB,CAKnB;AACA;;AACA,UAAIO,sBAAsB,GAAG,KAAKhN,KAAL,CAAWiN,aAAX,CAAyBC,uCAAzB,EAA7B;AACA,UAAIC,SAAS,GAAG,CAAC1D,aAAD,IAAkB,CAACuD,sBAAnB,KACX,KAAKhN,KAAL,CAAWkB,kBAAX,CAA8BkM,uBAA9B,MAA2DxI,MAAM,CAACyI,qBADvD,CAAhB;;AAEA,UAAIF,SAAJ,EAAe;AACX,aAAKA,SAAL;AACH;;AACD,WAAKxM,sBAAL,CAA4B2M,eAA5B;AACA,WAAK3M,sBAAL,CAA4B4M,sBAA5B;AACH,KAjC8C,CAkC/C;AACA;;;AACA,SAAKC,cAAL,GApC+C,CAqC/C;AACA;;AACA,SAAK7M,sBAAL,CAA4B8M,mBAA5B;AACH,GAxCD,CAhZ4C,CAyb5C;AACA;;;AACA7N,EAAAA,QAAQ,CAACxC,SAAT,CAAmBoL,mBAAnB,GAAyC,UAAUkF,yBAAV,EAAqC;AAC1E,QAAIA,yBAAyB,KAAK,KAAK,CAAvC,EAA0C;AAAEA,MAAAA,yBAAyB,GAAG,KAA5B;AAAoC;;AAChF,SAAKzF,iBAAL;AACA,SAAKqE,SAAL,CAAe,IAAf;;AACA,QAAI,CAACoB,yBAAL,EAAgC;AAC5B,WAAKC,iBAAL;AACH;AACJ,GAPD;;AAQA/N,EAAAA,QAAQ,CAACxC,SAAT,CAAmBuQ,iBAAnB,GAAuC,YAAY;AAC/C,QAAIC,WAAW,GAAG,KAAK5N,KAAL,CAAWkB,kBAAX,CAA8BiH,aAA9B,EAAlB;;AACA,QAAIyF,WAAJ,EAAiB;AACb;AACH;;AACD,QAAIC,uBAAuB,GAAG,KAAK7N,KAAL,CAAWkB,kBAAX,CAA8B4M,yBAA9B,EAA9B;;AACA,QAAID,uBAAJ,EAA6B;AACzB,WAAK7N,KAAL,CAAW+N,iBAAX,CAA6BC,kBAA7B,CAAgD,IAAhD,EAAsDrP,OAAO,CAACsP,IAA9D,EAAoE,KAAK7D,eAAL,EAApE,EAA4F,KAA5F;AACH;AACJ,GATD,CAnc4C,CA6c5C;;;AACAxK,EAAAA,QAAQ,CAACxC,SAAT,CAAmB+P,SAAnB,GAA+B,UAAUe,MAAV,EAAkB;AAC7C,QAAIC,UAAU,GAAGD,MAAM,IAAIA,MAAM,CAACC,UAAlC;AACA,QAAIC,SAAS,GAAGF,MAAM,IAAIA,MAAM,CAACE,SAAjC;AACA,SAAKC,WAAL,CAAiB,cAAjB,EAAiCF,UAAjC,EAA6CC,SAA7C;AACH,GAJD;;AAKAxO,EAAAA,QAAQ,CAACxC,SAAT,CAAmBiR,WAAnB,GAAiC,UAAUC,OAAV,EAAmBH,UAAnB,EAA+BC,SAA/B,EAA0C;AACvE,QAAIlO,KAAK,GAAG,IAAZ;;AACA,QAAIqO,QAAQ,GAAG,aAAaD,OAA5B;AACA,QAAIE,iBAAiB,GAAG,aAAaF,OAAb,GAAuB,YAA/C;AACA,QAAIpN,kBAAkB,GAAG,KAAKlB,KAAL,CAAWkB,kBAApC;;AACA,QAAI,CAACiN,UAAL,EAAiB;AACbA,MAAAA,UAAU,GAAGjN,kBAAkB,CAACuN,iBAAnB,EAAb;AACH;;AACD,QAAI,CAACtQ,MAAM,CAACiQ,SAAD,CAAX,EAAwB;AACpBA,MAAAA,SAAS,GAAGlN,kBAAkB,CAACwN,gBAAnB,EAAZ;AACH,KAVsE,CAWvE;;;AACA,SAAKhN,QAAL,CAAcsI,mBAAd,CAAkCuE,QAAlC,EAA4C,IAA5C;AACA,SAAK7M,QAAL,CAAcsI,mBAAd,CAAkCwE,iBAAlC,EAAqD,KAArD,EAbuE,CAcvE;;AACAG,IAAAA,MAAM,CAACC,UAAP,CAAkB,YAAY;AAC1B1O,MAAAA,KAAK,CAACwB,QAAN,CAAesI,mBAAf,CAAmCuE,QAAnC,EAA6C,KAA7C;;AACArO,MAAAA,KAAK,CAACwB,QAAN,CAAesI,mBAAf,CAAmCwE,iBAAnC,EAAsD,IAAtD;;AACAtO,MAAAA,KAAK,CAACwB,QAAN,CAAemN,aAAf,CAA6B,sBAAsBT,SAAtB,GAAkC,IAA/D;;AACAO,MAAAA,MAAM,CAACC,UAAP,CAAkB,YAAY;AAC1B;AACA1O,QAAAA,KAAK,CAACwB,QAAN,CAAesI,mBAAf,CAAmCwE,iBAAnC,EAAsD,KAAtD;;AACAtO,QAAAA,KAAK,CAACwB,QAAN,CAAemN,aAAf,CAA6B,YAA7B;AACH,OAJD,EAIGT,SAJH;AAKH,KATD,EASGD,UATH;AAUH,GAzBD;;AA0BAvO,EAAAA,QAAQ,CAACxC,SAAT,CAAmB0R,YAAnB,GAAkC,UAAUrH,KAAV,EAAiB;AAC/C,QAAIsH,MAAM,GAAG,KAAK/O,KAAL,CAAWgP,iBAAX,CAA6BC,QAA7B,CAAsC,KAAK7E,eAAL,EAAtC,CAAb;AACA,QAAI8E,WAAW,GAAGzH,KAAK,CAAC0H,KAAN,CAAYJ,MAAZ,CAAlB;;AACA,QAAIG,WAAJ,EAAiB;AACb,WAAKb,WAAL,CAAiB,WAAjB;AACH;AACJ,GAND;;AAOAzO,EAAAA,QAAQ,CAACxC,SAAT,CAAmB4F,cAAnB,GAAoC,YAAY;AAC5C,WAAO,KAAKlD,MAAL,CAAYkD,cAAZ,CAA2B,KAAKjD,OAAhC,CAAP;AACH,GAFD;;AAGAH,EAAAA,QAAQ,CAACxC,SAAT,CAAmB8N,WAAnB,GAAiC,UAAU9G,KAAV,EAAiB;AAC9C,QAAIwB,GAAG,GAAG,KAAKwJ,kBAAL,CAAwBhL,KAAxB,CAAV;AACA,WAAOwB,GAAG,IAAI,IAAP,GAAcA,GAAd,GAAoBxB,KAA3B;AACH,GAHD;;AAIAxE,EAAAA,QAAQ,CAACxC,SAAT,CAAmBgS,kBAAnB,GAAwC,UAAUhL,KAAV,EAAiB;AACrD,WAAO,KAAKpE,KAAL,CAAWqP,qBAAX,CAAiCnE,WAAjC,CAA6C,KAAKpL,MAAlD,EAA0D,KAAKC,OAA/D,EAAwE,KAAKgB,KAA7E,EAAoFqD,KAApF,CAAP;AACH,GAFD;;AAGAxE,EAAAA,QAAQ,CAACxC,SAAT,CAAmBwE,oBAAnB,GAA0C,UAAU0N,KAAV,EAAiB;AACvD,QAAIA,KAAK,KAAK,KAAK,CAAnB,EAAsB;AAAEA,MAAAA,KAAK,GAAG,KAAR;AAAgB;;AACxC,QAAInG,QAAQ,GAAG,KAAK/E,KAApB;AACA,QAAImL,iBAAiB,GAAG,KAAKpL,cAA7B;AACA,SAAKC,KAAL,GAAa,KAAKkF,wBAAL,EAAb;AACA,SAAKnF,cAAL,GAAsB,KAAKiL,kBAAL,CAAwB,KAAKhL,KAA7B,CAAtB;AACA,QAAI0I,eAAe,GAAGwC,KAAK,GAAG,IAAH,GACvB,CAAC,KAAKE,cAAL,CAAoBrG,QAApB,EAA8B,KAAK/E,KAAnC,CAAD,IAA8C,KAAKD,cAAL,IAAuBoL,iBADzE;AAEA,WAAOzC,eAAP;AACH,GATD;;AAUAlN,EAAAA,QAAQ,CAACxC,SAAT,CAAmBoS,cAAnB,GAAoC,UAAUC,IAAV,EAAgBC,IAAhB,EAAsB;AACtD;AACA,QAAI9K,MAAM,GAAG,KAAK9E,MAAL,CAAYuD,SAAZ,EAAb;AACA,WAAOuB,MAAM,CAAC+K,MAAP,GAAgB/K,MAAM,CAAC+K,MAAP,CAAcF,IAAd,EAAoBC,IAApB,CAAhB,GAA4CD,IAAI,KAAKC,IAA5D;AACH,GAJD;;AAKA9P,EAAAA,QAAQ,CAACxC,SAAT,CAAmBwS,OAAnB,GAA6B,YAAY;AACrC,WAAO,KAAKlO,QAAZ;AACH,GAFD;;AAGA9B,EAAAA,QAAQ,CAACxC,SAAT,CAAmBkM,wBAAnB,GAA8C,YAAY;AACtD;AACA;AACA;AACA;AACA,QAAIuG,iBAAiB,GAAG,KAAK9P,OAAL,CAAa+P,SAAb,IAA0B,KAAK9P,KAAL,CAAWwC,WAAX,CAAuBuN,WAAvB,EAAlD;AACA,QAAIC,WAAW,GAAG,KAAKjQ,OAAL,CAAakQ,KAAb,IAAsB,KAAKlQ,OAAL,CAAasG,QAAnC,IAA+C,CAAC,KAAKtG,OAAL,CAAamQ,MAA7D,IAAuE,CAACL,iBAA1F,CANsD,CAOtD;;AACA,QAAIM,mBAAmB,GAAG,KAAKnQ,KAAL,CAAWkB,kBAAX,CAA8BkP,oBAA9B,EAA1B,CARsD,CAStD;;AACA,QAAIC,sBAAsB,GAAG,KAAKrQ,KAAL,CAAWkB,kBAAX,CAA8BoP,0BAA9B,EAA7B,CAVsD,CAWtD;AACA;;AACA,QAAIC,aAAa,GAAIP,WAAW,IAAIG,mBAAhB,IAAwC,CAACE,sBAA7D;AACA,QAAIjM,KAAK,GAAG,KAAKpE,KAAL,CAAW0L,YAAX,CAAwBzC,QAAxB,CAAiC,KAAKnJ,MAAtC,EAA8C,KAAKC,OAAnD,EAA4D,KAA5D,EAAmEwQ,aAAnE,CAAZ;AACA,WAAOnM,KAAP;AACH,GAhBD;;AAiBAxE,EAAAA,QAAQ,CAACxC,SAAT,CAAmB6L,QAAnB,GAA8B,YAAY;AACtC,WAAO,KAAK7E,KAAZ;AACH,GAFD;;AAGAxE,EAAAA,QAAQ,CAACxC,SAAT,CAAmBoT,iBAAnB,GAAuC,YAAY;AAC/C,WAAO,KAAKrM,cAAZ;AACH,GAFD;;AAGAvE,EAAAA,QAAQ,CAACxC,SAAT,CAAmByE,UAAnB,GAAgC,YAAY;AACxC,QAAI3B,KAAK,GAAG,IAAZ;;AACA,QAAIuQ,OAAO,GAAG,KAAKzF,MAAL,EAAd;AACA,SAAKhL,KAAL,CAAWkB,kBAAX,CAA8BwP,UAA9B,CAAyCD,OAAzC,EAAkD7Q,QAAQ,CAAC+Q,sBAA3D,EAAmF,IAAnF;AACA,SAAKlQ,cAAL,CAAoB,YAAY;AAAE,aAAOP,KAAK,CAACF,KAAN,CAAYkB,kBAAZ,CAA+BwP,UAA/B,CAA0CD,OAA1C,EAAmD7Q,QAAQ,CAAC+Q,sBAA5D,EAAoF,IAApF,CAAP;AAAmG,KAArI;AACH,GALD;;AAMA/Q,EAAAA,QAAQ,CAACxC,SAAT,CAAmBsK,WAAnB,GAAiC,UAAUkJ,QAAV,EAAoBvF,SAApB,EAA+B;AAC5D,QAAI5D,KAAK,GAAG;AACRoJ,MAAAA,IAAI,EAAExF,SADE;AAERhB,MAAAA,IAAI,EAAE,KAAKtK,OAFH;AAGRuK,MAAAA,IAAI,EAAE,KAAKvK,OAAL,CAAauK,IAHX;AAIRlG,MAAAA,KAAK,EAAE,KAAKA,KAJJ;AAKRtE,MAAAA,MAAM,EAAE,KAAKA,MALL;AAMR8E,MAAAA,MAAM,EAAE,KAAK9E,MAAL,CAAYuD,SAAZ,EANA;AAORsH,MAAAA,OAAO,EAAE,KAAK3K,KAAL,CAAWkB,kBAAX,CAA8B0J,UAA9B,EAPD;AAQRL,MAAAA,GAAG,EAAE,KAAKvK,KAAL,CAAW8Q,OARR;AASRrG,MAAAA,SAAS,EAAE,KAAKzK,KAAL,CAAWyK,SATd;AAUR/E,MAAAA,SAAS,EAAE,KAAK3F,OAAL,CAAa2F,SAVhB;AAWR+B,MAAAA,KAAK,EAAEmJ,QAXC;AAYRzG,MAAAA,QAAQ,EAAE,KAAKpK,OAAL,CAAaoK;AAZf,KAAZ,CAD4D,CAe5D;;AACA,QAAI,KAAKpJ,KAAT,EAAgB;AACZ0G,MAAAA,KAAK,CAAC0D,MAAN,GAAe,KAAKpK,KAApB;AACH;;AACD,WAAO0G,KAAP;AACH,GApBD;;AAqBA7H,EAAAA,QAAQ,CAACxC,SAAT,CAAmB2T,UAAnB,GAAgC,UAAUtJ,KAAV,EAAiB;AAC7C,SAAK3G,2BAAL,CAAiCiQ,UAAjC,CAA4CtJ,KAA5C;AACH,GAFD;;AAGA7H,EAAAA,QAAQ,CAACxC,SAAT,CAAmByN,SAAnB,GAA+B,UAAUpD,KAAV,EAAiB;AAC5C,SAAK3G,2BAAL,CAAiC+J,SAAjC,CAA2CpD,KAA3C;AACH,GAFD;;AAGA7H,EAAAA,QAAQ,CAACxC,SAAT,CAAmB4T,YAAnB,GAAkC,UAAUC,SAAV,EAAqBC,UAArB,EAAiC;AAC/D,SAAKrQ,wBAAL,CAA8BmQ,YAA9B,CAA2CC,SAA3C,EAAsDC,UAAtD;AACH,GAFD;;AAGAtR,EAAAA,QAAQ,CAACxC,SAAT,CAAmB4N,MAAnB,GAA4B,YAAY;AACpC,WAAO,KAAKzJ,IAAZ;AACH,GAFD;;AAGA3B,EAAAA,QAAQ,CAACxC,SAAT,CAAmBoQ,cAAnB,GAAoC,YAAY;AAC5C,SAAK5M,kBAAL,CAAwB4M,cAAxB;AACH,GAFD;;AAGA5N,EAAAA,QAAQ,CAACxC,SAAT,CAAmB+T,kBAAnB,GAAwC,YAAY;AAChD,WAAO,KAAK3Q,mBAAL,CAAyB2Q,kBAAzB,EAAP;AACH,GAFD;;AAGAvR,EAAAA,QAAQ,CAACxC,SAAT,CAAmBgU,aAAnB,GAAmC,YAAY;AAC3C,SAAK5Q,mBAAL,CAAyB4Q,aAAzB;AACA,SAAKC,gBAAL,GAF2C,CAElB;AAC5B,GAHD;;AAIAzR,EAAAA,QAAQ,CAACxC,SAAT,CAAmBiU,gBAAnB,GAAsC,YAAY;AAC9C,QAAIC,MAAM,GAAG,KAAKtR,KAAL,CAAWwC,WAAX,CAAuBC,kBAAvB,CAA0C,KAAK3C,MAA/C,CAAb;AACA,SAAK4B,QAAL,CAAckB,eAAd,CAA8B0O,MAA9B;AACH,GAHD;;AAIA1R,EAAAA,QAAQ,CAACxC,SAAT,CAAmBmU,mBAAnB,GAAyC,YAAY;AACjD,WAAO,KAAKzR,MAAL,CAAYyR,mBAAZ,CAAgC,KAAKxR,OAArC,CAAP;AACH,GAFD;;AAGAH,EAAAA,QAAQ,CAACxC,SAAT,CAAmBoU,cAAnB,GAAoC,YAAY;AAC5C,WAAO,KAAKhR,mBAAL,CAAyBgR,cAAzB,EAAP;AACH,GAFD;;AAGA5R,EAAAA,QAAQ,CAACxC,SAAT,CAAmBqU,SAAnB,GAA+B,YAAY;AACvC,WAAO,KAAK3R,MAAZ;AACH,GAFD;;AAGAF,EAAAA,QAAQ,CAACxC,SAAT,CAAmBsU,UAAnB,GAAgC,YAAY;AACxC,WAAO,KAAK3R,OAAZ;AACH,GAFD;;AAGAH,EAAAA,QAAQ,CAACxC,SAAT,CAAmBuU,QAAnB,GAA8B,YAAY;AACtC,WAAO,KAAK3R,KAAZ;AACH,GAFD;;AAGAJ,EAAAA,QAAQ,CAACxC,SAAT,CAAmBwU,aAAnB,GAAmC,YAAY;AAC3C,WAAO,KAAKpQ,WAAZ;AACH,GAFD;;AAGA5B,EAAAA,QAAQ,CAACxC,SAAT,CAAmByU,WAAnB,GAAiC,UAAUC,WAAV,EAAuB;AACpD,SAAKvQ,IAAL,CAAUsQ,WAAV,CAAsBC,WAAtB;AACH,GAFD;;AAGAlS,EAAAA,QAAQ,CAACxC,SAAT,CAAmBuH,aAAnB,GAAmC,YAAY;AAC3C,QAAI,KAAKoC,OAAT,EAAkB;AACd;AACH;;AACD,QAAI,KAAK3F,gBAAT,EAA2B;AACvB,WAAKA,gBAAL,CAAsBuD,aAAtB;AACH;AACJ,GAPD;;AAQA/E,EAAAA,QAAQ,CAACxC,SAAT,CAAmBgN,eAAnB,GAAqC,YAAY;AAC7C,WAAO,KAAK2H,YAAZ;AACH,GAFD;;AAGAnS,EAAAA,QAAQ,CAACxC,SAAT,CAAmBmL,SAAnB,GAA+B,YAAY;AACvC,WAAO,KAAKxB,OAAZ;AACH,GAFD,CA5nB4C,CA+nB5C;;;AACAnH,EAAAA,QAAQ,CAACxC,SAAT,CAAmB4U,kBAAnB,GAAwC,UAAUpL,QAAV,EAAoBC,SAApB,EAA+B;AACnE,QAAI,KAAK7G,KAAL,CAAWkB,kBAAX,CAA8BiH,aAA9B,EAAJ,EAAmD;AAC/C,WAAKlI,OAAL,CAAagS,eAAb,CAA6BrL,QAA7B,EAAuCC,SAAvC,EAAkD,IAAlD;AACH,KAFD,MAGK;AACD,WAAKpF,YAAL,CAAkBmF,QAAlB,EAA4BC,SAA5B,EAAuC,IAAvC;AACH;AACJ,GAPD;;AAQAjH,EAAAA,QAAQ,CAACxC,SAAT,CAAmB8U,UAAnB,GAAgC,YAAY;AACxC,WAAO,KAAKjS,OAAZ;AACH,GAFD;;AAGAL,EAAAA,QAAQ,CAACxC,SAAT,CAAmB+U,cAAnB,GAAoC,YAAY;AAC5C,WAAO;AACHhI,MAAAA,QAAQ,EAAE,KAAK4H,YAAL,CAAkB5H,QADzB;AAEHzE,MAAAA,SAAS,EAAE,KAAKqM,YAAL,CAAkBrM;AAF1B,KAAP;AAIH,GALD;;AAMA9F,EAAAA,QAAQ,CAACxC,SAAT,CAAmBgV,8BAAnB,GAAoD,YAAY;AAC5D,QAAI,KAAKhR,gBAAT,EAA2B;AACvB,WAAKA,gBAAL,CAAsBgR,8BAAtB;AACH;AACJ,GAJD;;AAKAxS,EAAAA,QAAQ,CAACxC,SAAT,CAAmBiV,uBAAnB,GAA6C,YAAY;AACrD,QAAI,KAAKjR,gBAAT,EAA2B;AACvB,WAAKA,gBAAL,CAAsBiR,uBAAtB;AACH;AACJ,GAJD;;AAKAzS,EAAAA,QAAQ,CAACxC,SAAT,CAAmBkV,uBAAnB,GAA6C,YAAY;AACrD,WAAO,KAAKlR,gBAAL,IAAyB,IAAhC;AACH,GAFD;;AAGAxB,EAAAA,QAAQ,CAACxC,SAAT,CAAmBkP,SAAnB,GAA+B,UAAUiG,iBAAV,EAA6B;AACxD,QAAIA,iBAAiB,KAAK,KAAK,CAA/B,EAAkC;AAAEA,MAAAA,iBAAiB,GAAG,KAApB;AAA4B;;AAChE,SAAKvS,KAAL,CAAWwS,YAAX,CAAwBC,cAAxB,CAAuC,KAAKrI,eAAL,GAAuBD,QAA9D,EAAwE,KAAKrK,MAA7E,EAAqF,KAAKC,OAAL,CAAa2F,SAAlG,EAA6G6M,iBAA7G;AACH,GAHD;;AAIA3S,EAAAA,QAAQ,CAACxC,SAAT,CAAmBsV,iBAAnB,GAAuC,YAAY;AAC/C;AACA;AACA,SAAKpS,kBAAL,GAH+C,CAI/C;;AACA,SAAKwB,aAAL,GAL+C,CAM/C;;AACA,QAAI,KAAKV,gBAAT,EAA2B;AACvB,WAAKA,gBAAL,CAAsBiR,uBAAtB;AACH;AACJ,GAVD;;AAWAzS,EAAAA,QAAQ,CAACxC,SAAT,CAAmB6E,yBAAnB,GAA+C,YAAY;AACvD,QAAI,CAAC,KAAKP,QAAV,EAAoB;AAChB;AACH;;AACD,QAAIiR,gBAAgB,GAAG,KAAK7S,MAAL,CAAY8S,kBAAZ,EAAvB;AACA,SAAKlR,QAAL,CAAcsI,mBAAd,CAAkC5K,2BAAlC,EAA+DuT,gBAA/D;AACH,GAND;;AAOA/S,EAAAA,QAAQ,CAACxC,SAAT,CAAmB8E,uBAAnB,GAA6C,YAAY;AACrD,QAAI,CAAC,KAAKR,QAAV,EAAoB;AAChB;AACH;;AACD,QAAImR,cAAc,GAAG,KAAK/S,MAAL,CAAYgT,gBAAZ,EAArB;AACA,SAAKpR,QAAL,CAAcsI,mBAAd,CAAkC3K,yBAAlC,EAA6DwT,cAA7D;AACH,GAND;;AAOAjT,EAAAA,QAAQ,CAACxC,SAAT,CAAmB0E,aAAnB,GAAmC,UAAU2F,KAAV,EAAiB;AAChD,QAAI,CAAC,KAAK/F,QAAV,EAAoB;AAChB;AACH;;AACD,QAAIqR,WAAW,GAAG,KAAK/S,KAAL,CAAWwS,YAAX,CAAwBQ,aAAxB,CAAsC,KAAKjB,YAA3C,CAAlB;;AACA,QAAI,CAAC,KAAKpQ,GAAL,CAASsR,uBAAT,EAAL,EAAyC;AACrC,WAAKvR,QAAL,CAAcsI,mBAAd,CAAkC7K,cAAlC,EAAkD4T,WAAlD;AACH,KAP+C,CAQhD;;;AACA,QAAIA,WAAW,IAAItL,KAAf,IAAwBA,KAAK,CAAC8K,iBAAlC,EAAqD;AACjD,UAAIW,OAAO,GAAG,KAAKxR,QAAL,CAAcyR,mBAAd,EAAd;AACAD,MAAAA,OAAO,CAACE,KAAR,GAFiD,CAGjD;AACA;;AACA,UAAI,CAACC,QAAQ,CAACC,aAAV,IAA2BD,QAAQ,CAACC,aAAT,KAA2BD,QAAQ,CAACE,IAAnE,EAAyE;AACrEL,QAAAA,OAAO,CAACE,KAAR;AACH;AACJ,KAjB+C,CAkBhD;;;AACA,QAAIxF,WAAW,GAAG,KAAK5N,KAAL,CAAWkB,kBAAX,CAA8BiH,aAA9B,EAAlB;;AACA,QAAI,CAAC4K,WAAD,IAAgB,CAACnF,WAAjB,IAAgC,KAAK7G,OAAzC,EAAkD;AAC9C,WAAKkB,iBAAL;AACH;AACJ,GAvBD;;AAwBArI,EAAAA,QAAQ,CAACxC,SAAT,CAAmBkD,kBAAnB,GAAwC,YAAY;AAChD,SAAKyR,YAAL,GAAoB;AAChB5H,MAAAA,QAAQ,EAAE,KAAKpK,OAAL,CAAaoK,QADP;AAEhBzE,MAAAA,SAAS,EAAE,KAAK3F,OAAL,CAAa2F,SAFR;AAGhB5F,MAAAA,MAAM,EAAE,KAAKA;AAHG,KAApB;AAKH,GAND,CAntB4C,CA0tB5C;;;AACAF,EAAAA,QAAQ,CAACxC,SAAT,CAAmB2E,qBAAnB,GAA2C,YAAY;AACnD,SAAKL,QAAL,CAAcsI,mBAAd,CAAkChL,QAAlC,EAA4C,IAA5C;AACA,SAAK0C,QAAL,CAAcsI,mBAAd,CAAkC1K,2BAAlC,EAA+D,IAA/D,EAFmD,CAGnD;AACA;AACA;AACA;AACA;;AACA,SAAKoC,QAAL,CAAcsI,mBAAd,CAAkC9K,iBAAlC,EAAqD,IAArD;AACH,GATD;;AAUAU,EAAAA,QAAQ,CAACxC,SAAT,CAAmB+E,aAAnB,GAAmC,YAAY;AAC3C,QAAI,CAAC,KAAKT,QAAV,EAAoB;AAChB;AACH;;AACD,QAAI,CAAC,KAAK1B,KAAL,CAAWkB,kBAAX,CAA8BsS,sBAA9B,EAAL,EAA6D;AACzD;AACH;;AACD,QAAIC,SAAS,GAAG,KAAKzT,KAAL,CAAW0T,kBAAX,CAA8BD,SAA9B,CAAwC,KAAK3T,MAA7C,CAAhB;AACA,SAAK4B,QAAL,CAAcsI,mBAAd,CAAkCvK,gBAAlC,EAAoDgU,SAApD;AACH,GATD;;AAUA7T,EAAAA,QAAQ,CAACxC,SAAT,CAAmBuW,kBAAnB,GAAwC,YAAY;AAChD,QAAI,CAAC,KAAKjS,QAAV,EAAoB;AAChB;AACH;;AACD,SAAKM,WAAL;;AACA,QAAI,CAAC,KAAK+E,OAAV,EAAmB;AACf,WAAKwC,WAAL,CAAiB;AAAEC,QAAAA,YAAY,EAAE;AAAhB,OAAjB;AACH;AACJ,GARD;;AASA5J,EAAAA,QAAQ,CAACxC,SAAT,CAAmB4E,WAAnB,GAAiC,YAAY;AACzC,QAAIoC,KAAK,GAAG,KAAKtE,MAAL,CAAYuD,SAAZ,GAAwBuQ,QAAxB,IAAoC,IAAhD;AACA,SAAKlS,QAAL,CAAcsI,mBAAd,CAAkCtK,kBAAlC,EAAsD0E,KAAtD;AACH,GAHD;;AAIAxE,EAAAA,QAAQ,CAACxC,SAAT,CAAmByW,4BAAnB,GAAkD,UAAUpM,KAAV,EAAiB;AAC/D,QAAI7C,MAAM,GAAG,KAAK9E,MAAL,CAAYuD,SAAZ,EAAb;AACA,QAAIyQ,oBAAoB,GAAG,KAAKpM,WAAL,CAAiBD,KAAjB,EAAwBxJ,MAAM,CAAC8V,uBAA/B,CAA3B;AACA,SAAK/T,KAAL,CAAW4H,YAAX,CAAwBC,aAAxB,CAAsCiM,oBAAtC;;AACA,QAAIlP,MAAM,CAACoP,iBAAX,EAA8B;AAC1B;AACArF,MAAAA,MAAM,CAACC,UAAP,CAAkB,YAAY;AAAE,eAAOhK,MAAM,CAACoP,iBAAP,CAAyBF,oBAAzB,CAAP;AAAwD,OAAxF,EAA0F,CAA1F;AACH;AACJ,GARD;;AASAlU,EAAAA,QAAQ,CAACxC,SAAT,CAAmB6W,eAAnB,GAAqC,YAAY;AAC7C,WAAO,KAAKvS,QAAL,GAAgB,KAAKA,QAAL,CAAcuS,eAAd,EAAhB,GAAkD,IAAzD;AACH,GAFD;;AAGArU,EAAAA,QAAQ,CAACxC,SAAT,CAAmByL,aAAnB,GAAmC,YAAY;AAC3C,WAAO,KAAKnH,QAAL,GAAgB,KAAKA,QAAL,CAAcmH,aAAd,EAAhB,GAAgD,IAAvD;AACH,GAFD;;AAGAjJ,EAAAA,QAAQ,CAACxC,SAAT,CAAmBsD,OAAnB,GAA6B,YAAY;AACrCb,IAAAA,MAAM,CAACzC,SAAP,CAAiBsD,OAAjB,CAAyB5C,IAAzB,CAA8B,IAA9B;AACH,GAFD;;AAGA8B,EAAAA,QAAQ,CAACxC,SAAT,CAAmB8W,uBAAnB,GAA6C,YAAY;AACrD,QAAIC,oBAAoB,GAAG,IAAIvV,0BAAJ,EAA3B;AACA,SAAKoB,KAAL,CAAW2K,OAAX,CAAmByJ,UAAnB,CAA8BD,oBAA9B;AACAA,IAAAA,oBAAoB,CAACE,IAArB,CAA0B;AAAEtU,MAAAA,OAAO,EAAE,KAAKA,OAAhB;AAAyBD,MAAAA,MAAM,EAAE,KAAKA;AAAtC,KAA1B,EAHqD,CAIrD;;AACA,WAAOqU,oBAAP;AACH,GAND;;AAOAvU,EAAAA,QAAQ,CAACxC,SAAT,CAAmBkX,eAAnB,GAAqC,YAAY;AAC7C,QAAIC,aAAa,GAAG,IAAI1V,aAAJ,CAAkB,KAAKkB,OAAvB,EAAgC,KAAKD,MAArC,EAA6C,KAAKE,KAAlD,EAAyD,KAAKuB,IAA9D,CAApB;AACA,SAAKvB,KAAL,CAAW2K,OAAX,CAAmByJ,UAAnB,CAA8BG,aAA9B;AACA,WAAOA,aAAP;AACH,GAJD;;AAKA3U,EAAAA,QAAQ,CAACxC,SAAT,CAAmBwO,kBAAnB,GAAwC,UAAU4I,aAAV,EAAyB1I,eAAzB,EAA0C;AAC9E,QAAI5L,KAAK,GAAG,IAAZ,CAD8E,CAE9E;;;AACA,QAAI,KAAKuU,iBAAT,EAA4B;AACxB,WAAKA,iBAAL,CAAuBC,cAAvB,CAAsCF,aAAtC,EAAqD1I,eAArD;AACA;AACH;;AACD,QAAI6I,OAAO,GAAG,KAAKC,iBAAL,CAAuBJ,aAAvB,EAAsC1I,eAAtC,CAAd;;AACA,QAAI6I,OAAJ,EAAa;AACT,WAAKF,iBAAL,GAAyBE,OAAzB;AACA,WAAKlU,cAAL,CAAoB,YAAY;AAAE,eAAOP,KAAK,CAACF,KAAN,CAAY2K,OAAZ,CAAoBkK,WAApB,CAAgCF,OAAhC,CAAP;AAAkD,OAApF;AACH;AACJ,GAZD;;AAaA/U,EAAAA,QAAQ,CAACxC,SAAT,CAAmBwX,iBAAnB,GAAuC,UAAUJ,aAAV,EAAyB1I,eAAzB,EAA0C;AAC7E,QAAI5L,KAAK,GAAG,IAAZ;;AACA,QAAI4U,UAAU,GAAG,KAAK9U,KAAL,CAAWkB,kBAAX,CAA8B6T,YAA9B,EAAjB;AACA,QAAIC,cAAc,GAAG,KAAKhV,KAAL,CAAWkB,kBAAX,CAA8B+T,gBAA9B,EAArB;AACA,QAAIC,wBAAwB,GAAG,KAAKlV,KAAL,CAAWkB,kBAAX,CAA8BiU,iBAA9B,EAA/B;;AACA,QAAIH,cAAJ,EAAoB;AAChB;AACA,UAAI,CAACE,wBAAL,EAA+B;AAC3BpW,QAAAA,MAAM,CAAC,YAAY;AAAE,iBAAOwM,OAAO,CAACC,IAAR,CAAa,4EAAb,CAAP;AAAoG,SAAnH,EAAqH,yBAArH,CAAN;AACA;AACH;;AACD,UAAIuJ,UAAJ,EAAgB;AACZhW,QAAAA,MAAM,CAAC,YAAY;AAAE,iBAAOwM,OAAO,CAACC,IAAR,CAAa,qEAAb,CAAP;AAA6F,SAA5G,EAA8G,yBAA9G,CAAN;AACA;AACH;AACJ,KAf4E,CAgB7E;;;AACA,QAAI6J,WAAW,GAAG,IAAIrW,WAAJ,CAAgB,YAAY;AAAE,aAAOmB,KAAK,CAACkE,KAAb;AAAqB,KAAnD,EAAqD,KAAKrE,OAA1D,EAAmE,KAAKD,MAAxE,EAAgF0U,aAAhF,EAA+F1I,eAA/F,CAAlB;AACA,SAAK9L,KAAL,CAAW2K,OAAX,CAAmByJ,UAAnB,CAA8BgB,WAA9B;AACA,WAAOA,WAAP;AACH,GApBD;;AAqBAxV,EAAAA,QAAQ,CAAC+Q,sBAAT,GAAkC,UAAlC;AACA,SAAO/Q,QAAP;AACH,CA9zB6B,CA8zB5BxB,QA9zB4B,CAA9B;;AA+zBA,SAASwB,QAAT","sourcesContent":["/**\n * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v26.0.0\n * @link http://www.ag-grid.com/\n * @license MIT\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { RowNode } from \"../../entities/rowNode\";\nimport { Events } from \"../../events\";\nimport { CellRangeFeature } from \"./cellRangeFeature\";\nimport { exists } from \"../../utils/generic\";\nimport { BeanStub } from \"../../context/beanStub\";\nimport { CellPositionFeature } from \"./cellPositionFeature\";\nimport { escapeString } from \"../../utils/string\";\nimport { CellCustomStyleFeature } from \"./cellCustomStyleFeature\";\nimport { CellTooltipFeature } from \"./cellTooltipFeature\";\nimport { CellMouseListenerFeature } from \"./cellMouseListenerFeature\";\nimport { CellKeyboardListenerFeature } from \"./cellKeyboardListenerFeature\";\nimport { KeyCode } from \"../../constants/keyCode\";\nimport { CheckboxSelectionComponent } from \"../checkboxSelectionComponent\";\nimport { DndSourceComp } from \"../dndSourceComp\";\nimport { doOnce } from \"../../utils/function\";\nimport { RowDragComp } from \"../row/rowDragComp\";\nvar CSS_CELL = 'ag-cell';\nvar CSS_AUTO_HEIGHT = 'ag-cell-auto-height';\nvar CSS_NORMAL_HEIGHT = 'ag-cell-normal-height';\nvar CSS_CELL_FOCUS = 'ag-cell-focus';\nvar CSS_CELL_FIRST_RIGHT_PINNED = 'ag-cell-first-right-pinned';\nvar CSS_CELL_LAST_LEFT_PINNED = 'ag-cell-last-left-pinned';\nvar CSS_CELL_NOT_INLINE_EDITING = 'ag-cell-not-inline-editing';\nvar CSS_CELL_INLINE_EDITING = 'ag-cell-inline-editing';\nvar CSS_CELL_POPUP_EDITING = 'ag-cell-popup-editing';\nvar CSS_COLUMN_HOVER = 'ag-column-hover';\nvar CSS_CELL_WRAP_TEXT = 'ag-cell-wrap-text';\nvar instanceIdSequence = 0;\nvar CellCtrl = /** @class */ (function (_super) {\n    __extends(CellCtrl, _super);\n    function CellCtrl(column, rowNode, beans, rowCtrl) {\n        var _this = _super.call(this) || this;\n        _this.suppressRefreshCell = false;\n        _this.column = column;\n        _this.rowNode = rowNode;\n        _this.beans = beans;\n        _this.rowCtrl = rowCtrl;\n        // unique id to this instance, including the column ID to help with debugging in React as it's used in 'key'\n        _this.instanceId = column.getId() + '-' + instanceIdSequence++;\n        _this.createCellPosition();\n        _this.addFeatures();\n        return _this;\n    }\n    CellCtrl.prototype.addFeatures = function () {\n        var _this = this;\n        this.cellPositionFeature = new CellPositionFeature(this, this.beans);\n        this.addDestroyFunc(function () { return _this.cellPositionFeature.destroy(); });\n        this.cellCustomStyleFeature = new CellCustomStyleFeature(this, this.beans);\n        this.addDestroyFunc(function () { return _this.cellCustomStyleFeature.destroy(); });\n        this.cellTooltipFeature = new CellTooltipFeature(this, this.beans);\n        this.addDestroyFunc(function () { return _this.cellTooltipFeature.destroy(); });\n        this.cellMouseListenerFeature = new CellMouseListenerFeature(this, this.beans, this.column);\n        this.addDestroyFunc(function () { return _this.cellMouseListenerFeature.destroy(); });\n        this.cellKeyboardListenerFeature = new CellKeyboardListenerFeature(this, this.beans, this.column, this.rowNode, this.scope, this.rowCtrl);\n        this.addDestroyFunc(function () { return _this.cellKeyboardListenerFeature.destroy(); });\n        var rangeSelectionEnabled = this.beans.rangeService && this.beans.gridOptionsWrapper.isEnableRangeSelection();\n        if (rangeSelectionEnabled) {\n            this.cellRangeFeature = new CellRangeFeature(this.beans, this);\n            this.addDestroyFunc(function () { return _this.cellRangeFeature.destroy(); });\n        }\n    };\n    CellCtrl.prototype.setComp = function (comp, scope, eGui, printLayout, startEditing) {\n        var _this = this;\n        this.cellComp = comp;\n        this.gow = this.beans.gridOptionsWrapper;\n        this.scope = scope;\n        this.eGui = eGui;\n        this.printLayout = printLayout;\n        // we force to make sure formatter gets called at least once,\n        // even if value has not changed (is is undefined)\n        this.updateAndFormatValue(true);\n        this.addDomData();\n        this.onCellFocused();\n        this.applyStaticCssClasses();\n        this.setWrapText();\n        this.onFirstRightPinnedChanged();\n        this.onLastLeftPinnedChanged();\n        this.onColumnHover();\n        this.setupControlComps();\n        this.setupAriaExpanded();\n        var colIdSanitised = escapeString(this.column.getId());\n        var ariaColIndex = this.beans.columnModel.getAriaColumnIndex(this.column);\n        this.cellComp.setTabIndex(-1);\n        this.cellComp.setRole('gridcell');\n        this.cellComp.setAriaColIndex(ariaColIndex);\n        this.cellComp.setColId(colIdSanitised);\n        this.cellComp.setUnselectable(!this.beans.gridOptionsWrapper.isEnableCellTextSelection() ? 'on' : null);\n        this.cellPositionFeature.setComp(comp);\n        this.cellCustomStyleFeature.setComp(comp, scope);\n        this.cellTooltipFeature.setComp(comp);\n        this.cellKeyboardListenerFeature.setComp(this.eGui);\n        if (this.cellRangeFeature) {\n            this.cellRangeFeature.setComp(comp);\n        }\n        if (startEditing && this.isCellEditable()) {\n            this.startEditing();\n        }\n        else {\n            this.showValue();\n        }\n        this.addDestroyFunc(function () {\n            _this.destroyAutoHeight && _this.destroyAutoHeight();\n        });\n    };\n    CellCtrl.prototype.setupAutoHeight = function (eParentOfValue) {\n        var _this = this;\n        if (!this.column.getColDef().autoHeight) {\n            return;\n        }\n        if (this.autoHeightElement == eParentOfValue) {\n            return;\n        }\n        if (this.destroyAutoHeight) {\n            this.destroyAutoHeight();\n        }\n        this.autoHeightElement = eParentOfValue;\n        if (!eParentOfValue) {\n            return;\n        }\n        var listener = function () {\n            var newHeight = eParentOfValue.offsetHeight;\n            _this.rowNode.setRowAutoHeight(newHeight, _this.column);\n        };\n        // do once to set size in case size doesn't change, common when cell is blank\n        listener();\n        var destroyResizeObserver = this.beans.resizeObserverService.observeResize(eParentOfValue, listener);\n        this.destroyAutoHeight = function () {\n            destroyResizeObserver();\n            _this.rowNode.setRowAutoHeight(undefined, _this.column);\n        };\n    };\n    CellCtrl.prototype.getInstanceId = function () {\n        return this.instanceId;\n    };\n    CellCtrl.prototype.showValue = function (forceNewCellRendererInstance) {\n        if (forceNewCellRendererInstance === void 0) { forceNewCellRendererInstance = false; }\n        var valueToDisplay = this.valueFormatted != null ? this.valueFormatted : this.value;\n        var params = this.createCellRendererParams();\n        var compDetails = this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(), params);\n        this.cellComp.setRenderDetails(compDetails, valueToDisplay, forceNewCellRendererInstance);\n        this.refreshHandle();\n    };\n    CellCtrl.prototype.setupControlComps = function () {\n        var colDef = this.column.getColDef();\n        this.includeSelection = this.isIncludeControl(colDef.checkboxSelection);\n        this.includeRowDrag = this.isIncludeControl(colDef.rowDrag);\n        this.includeDndSource = this.isIncludeControl(colDef.dndSource);\n        // text selection requires the value to be wrapped in another element\n        var forceWrapper = this.beans.gridOptionsWrapper.isEnableCellTextSelection() || this.column.getColDef().autoHeight == true;\n        this.cellComp.setIncludeSelection(this.includeSelection);\n        this.cellComp.setIncludeDndSource(this.includeDndSource);\n        this.cellComp.setIncludeRowDrag(this.includeRowDrag);\n        this.cellComp.setForceWrapper(forceWrapper);\n    };\n    CellCtrl.prototype.isIncludeControl = function (value) {\n        var rowNodePinned = this.rowNode.rowPinned != null;\n        var isFunc = typeof value === 'function';\n        var res = rowNodePinned ? false : isFunc || value === true;\n        return res;\n    };\n    CellCtrl.prototype.setupAriaExpanded = function () {\n        var _this = this;\n        var colDef = this.column.getColDef();\n        if (!this.rowNode.isExpandable()) {\n            return;\n        }\n        var showRowGroup = colDef.showRowGroup;\n        var rowGroupColumn = this.rowNode.rowGroupColumn;\n        var showingAllGroups = showRowGroup === true;\n        var showingThisGroup = rowGroupColumn && rowGroupColumn.getColId() === showRowGroup;\n        var colMatches = showingAllGroups || showingThisGroup;\n        if (!colMatches) {\n            return;\n        }\n        var listener = function () {\n            _this.cellComp.setAriaExpanded(!!_this.rowNode.expanded);\n        };\n        this.addManagedListener(this.rowNode, RowNode.EVENT_EXPANDED_CHANGED, listener);\n        listener();\n    };\n    CellCtrl.prototype.refreshShouldDestroy = function () {\n        var colDef = this.column.getColDef();\n        var selectionChanged = this.includeSelection != this.isIncludeControl(colDef.checkboxSelection);\n        var rowDragChanged = this.includeRowDrag != this.isIncludeControl(colDef.rowDrag);\n        var dndSourceChanged = this.includeDndSource != this.isIncludeControl(colDef.dndSource);\n        return selectionChanged || rowDragChanged || dndSourceChanged;\n    };\n    // either called internally if single cell editing, or called by rowRenderer if row editing\n    CellCtrl.prototype.startEditing = function (keyPress, charPress, cellStartedEdit) {\n        if (keyPress === void 0) { keyPress = null; }\n        if (charPress === void 0) { charPress = null; }\n        if (cellStartedEdit === void 0) { cellStartedEdit = false; }\n        if (!this.isCellEditable() || this.editing) {\n            return;\n        }\n        var editorParams = this.createCellEditorParams(keyPress, charPress, cellStartedEdit);\n        var colDef = this.column.getColDef();\n        var compDetails = this.beans.userComponentFactory.getCellEditorDetails(colDef, editorParams);\n        var popup = !!colDef.cellEditorPopup;\n        var position = colDef.cellEditorPopupPosition;\n        this.setEditing(true, popup);\n        this.cellComp.setEditDetails(compDetails, popup, position);\n        var event = this.createEvent(null, Events.EVENT_CELL_EDITING_STARTED);\n        this.beans.eventService.dispatchEvent(event);\n    };\n    CellCtrl.prototype.setEditing = function (editing, inPopup) {\n        if (inPopup === void 0) { inPopup = false; }\n        if (this.editing === editing) {\n            return;\n        }\n        this.editing = editing;\n        this.editingInPopup = inPopup;\n        this.setInlineEditingClass();\n        if (!editing) {\n            this.cellComp.setEditDetails();\n        }\n    };\n    // pass in 'true' to cancel the editing.\n    CellCtrl.prototype.stopRowOrCellEdit = function (cancel) {\n        if (cancel === void 0) { cancel = false; }\n        if (this.beans.gridOptionsWrapper.isFullRowEdit()) {\n            this.rowCtrl.stopRowEditing(cancel);\n        }\n        else {\n            this.stopEditing(cancel);\n        }\n    };\n    CellCtrl.prototype.onPopupEditorClosed = function () {\n        if (!this.isEditing()) {\n            return;\n        }\n        // note: this happens because of a click outside of the grid or if the popupEditor\n        // is closed with `Escape` key. if another cell was clicked, then the editing will \n        // have already stopped and returned on the conditional above.\n        this.stopEditingAndFocus();\n    };\n    CellCtrl.prototype.takeValueFromCellEditor = function (cancel) {\n        var noValueResult = { newValueExists: false };\n        if (cancel) {\n            return noValueResult;\n        }\n        var cellEditor = this.cellComp.getCellEditor();\n        if (!cellEditor) {\n            return noValueResult;\n        }\n        var userWantsToCancel = cellEditor.isCancelAfterEnd && cellEditor.isCancelAfterEnd();\n        if (userWantsToCancel) {\n            return noValueResult;\n        }\n        var newValue = cellEditor.getValue();\n        return {\n            newValue: newValue,\n            newValueExists: true\n        };\n    };\n    CellCtrl.prototype.saveNewValue = function (oldValue, newValue) {\n        if (newValue !== oldValue) {\n            // we suppressRefreshCell because the call to rowNode.setDataValue() results in change detection\n            // getting triggered, which results in all cells getting refreshed. we do not want this refresh\n            // to happen on this call as we want to call it explicitly below. otherwise refresh gets called twice.\n            // if we only did this refresh (and not the one below) then the cell would flash and not be forced.\n            this.suppressRefreshCell = true;\n            this.rowNode.setDataValue(this.column, newValue);\n            this.suppressRefreshCell = false;\n        }\n    };\n    CellCtrl.prototype.stopEditing = function (cancel) {\n        if (cancel === void 0) { cancel = false; }\n        if (!this.editing) {\n            return;\n        }\n        var _a = this.takeValueFromCellEditor(cancel), newValue = _a.newValue, newValueExists = _a.newValueExists;\n        var oldValue = this.getValueFromValueService();\n        if (newValueExists) {\n            this.saveNewValue(oldValue, newValue);\n        }\n        this.setEditing(false);\n        this.updateAndFormatValue();\n        this.refreshCell({ forceRefresh: true, suppressFlash: true });\n        this.dispatchEditingStoppedEvent(oldValue, newValue);\n    };\n    CellCtrl.prototype.dispatchEditingStoppedEvent = function (oldValue, newValue) {\n        var editingStoppedEvent = __assign(__assign({}, this.createEvent(null, Events.EVENT_CELL_EDITING_STOPPED)), { oldValue: oldValue,\n            newValue: newValue });\n        this.beans.eventService.dispatchEvent(editingStoppedEvent);\n    };\n    // if we are editing inline, then we don't have the padding in the cell (set in the themes)\n    // to allow the text editor full access to the entire cell\n    CellCtrl.prototype.setInlineEditingClass = function () {\n        if (!this.isAlive()) {\n            return;\n        }\n        // ag-cell-inline-editing - appears when user is inline editing\n        // ag-cell-not-inline-editing - appears when user is no inline editing\n        // ag-cell-popup-editing - appears when user is editing cell in popup (appears on the cell, not on the popup)\n        // note: one of {ag-cell-inline-editing, ag-cell-not-inline-editing} is always present, they toggle.\n        //       however {ag-cell-popup-editing} shows when popup, so you have both {ag-cell-popup-editing}\n        //       and {ag-cell-not-inline-editing} showing at the same time.\n        var editingInline = this.editing && !this.editingInPopup;\n        var popupEditorShowing = this.editing && this.editingInPopup;\n        this.cellComp.addOrRemoveCssClass(CSS_CELL_INLINE_EDITING, editingInline);\n        this.cellComp.addOrRemoveCssClass(CSS_CELL_NOT_INLINE_EDITING, !editingInline);\n        this.cellComp.addOrRemoveCssClass(CSS_CELL_POPUP_EDITING, popupEditorShowing);\n        this.rowCtrl.setInlineEditingCss(this.editing);\n    };\n    // this is needed as the JS CellComp still allows isPopup() on the CellEditor class, so\n    // it's possible the editor is in a popup even though it's not configured via the colDef as so\n    CellCtrl.prototype.hackSayEditingInPopup = function () {\n        if (this.editingInPopup) {\n            return;\n        }\n        this.editingInPopup = true;\n        this.setInlineEditingClass();\n    };\n    CellCtrl.prototype.createCellEditorParams = function (keyPress, charPress, cellStartedEdit) {\n        var res = {\n            value: this.getValueFromValueService(),\n            keyPress: keyPress,\n            charPress: charPress,\n            column: this.column,\n            colDef: this.column.getColDef(),\n            rowIndex: this.getCellPosition().rowIndex,\n            node: this.rowNode,\n            data: this.rowNode.data,\n            api: this.beans.gridOptionsWrapper.getApi(),\n            cellStartedEdit: cellStartedEdit,\n            columnApi: this.beans.gridOptionsWrapper.getColumnApi(),\n            context: this.beans.gridOptionsWrapper.getContext(),\n            onKeyDown: this.onKeyDown.bind(this),\n            stopEditing: this.stopEditingAndFocus.bind(this),\n            eGridCell: this.getGui(),\n            parseValue: this.parseValue.bind(this),\n            formatValue: this.formatValue.bind(this)\n        };\n        if (this.scope) {\n            res.$scope = this.scope;\n        }\n        return res;\n    };\n    CellCtrl.prototype.createCellRendererParams = function () {\n        var _this = this;\n        var addRowCompListener = function (eventType, listener) {\n            console.warn('AG Grid: since AG Grid v26, params.addRowCompListener() is deprecated. If you need this functionality, please contact AG Grid support and advise why so that we can revert with an appropriate workaround, as we dont have any valid use cases for it. This method was originally provided as a work around to know when cells were destroyed in AG Grid before custom Cell Renderers could be provided.');\n            _this.rowCtrl.addEventListener(eventType, listener);\n        };\n        var res = {\n            value: this.value,\n            valueFormatted: this.valueFormatted,\n            getValue: this.getValueFromValueService.bind(this),\n            setValue: function (value) { return _this.beans.valueService.setValue(_this.rowNode, _this.column, value); },\n            formatValue: this.formatValue.bind(this),\n            data: this.rowNode.data,\n            node: this.rowNode,\n            colDef: this.column.getColDef(),\n            column: this.column,\n            rowIndex: this.getCellPosition().rowIndex,\n            api: this.beans.gridOptionsWrapper.getApi(),\n            columnApi: this.beans.gridOptionsWrapper.getColumnApi(),\n            context: this.beans.gridOptionsWrapper.getContext(),\n            refreshCell: this.refreshCell.bind(this),\n            eGridCell: this.getGui(),\n            eParentOfValue: this.cellComp.getParentOfValue(),\n            registerRowDragger: function (rowDraggerElement, dragStartPixels) { return _this.registerRowDragger(rowDraggerElement, dragStartPixels); },\n            // this function is not documented anywhere, so we could drop it\n            // it was in the olden days to allow user to register for when rendered\n            // row was removed (the row comp was removed), however now that the user\n            // can provide components for cells, the destroy method gets call when this\n            // happens so no longer need to fire event.\n            addRowCompListener: addRowCompListener\n        };\n        if (this.scope) {\n            res.$scope = this.scope;\n        }\n        return res;\n    };\n    CellCtrl.prototype.parseValue = function (newValue) {\n        var colDef = this.column.getColDef();\n        var params = {\n            node: this.rowNode,\n            data: this.rowNode.data,\n            oldValue: this.getValue(),\n            newValue: newValue,\n            colDef: colDef,\n            column: this.column,\n            api: this.beans.gridOptionsWrapper.getApi(),\n            columnApi: this.beans.gridOptionsWrapper.getColumnApi(),\n            context: this.beans.gridOptionsWrapper.getContext()\n        };\n        var valueParser = colDef.valueParser;\n        return exists(valueParser) ? this.beans.expressionService.evaluate(valueParser, params) : newValue;\n    };\n    CellCtrl.prototype.setFocusOutOnEditor = function () {\n        if (!this.editing) {\n            return;\n        }\n        var cellEditor = this.cellComp.getCellEditor();\n        if (cellEditor && cellEditor.focusOut) {\n            cellEditor.focusOut();\n        }\n    };\n    CellCtrl.prototype.setFocusInOnEditor = function () {\n        if (!this.editing) {\n            return;\n        }\n        var cellEditor = this.cellComp.getCellEditor();\n        if (cellEditor && cellEditor.focusIn) {\n            // if the editor is present, then we just focus it\n            cellEditor.focusIn();\n        }\n        else {\n            // if the editor is not present, it means async cell editor (eg React fibre)\n            // and we are trying to set focus before the cell editor is present, so we\n            // focus the cell instead\n            this.focusCell(true);\n        }\n    };\n    CellCtrl.prototype.onCellChanged = function (event) {\n        var eventImpactsThisCell = event.column === this.column;\n        if (eventImpactsThisCell) {\n            this.refreshCell({});\n        }\n    };\n    // + stop editing {forceRefresh: true, suppressFlash: true}\n    // + event cellChanged {}\n    // + cellRenderer.params.refresh() {} -> method passes 'as is' to the cellRenderer, so params could be anything\n    // + rowCtrl: event dataChanged {suppressFlash: !update, newData: !update}\n    // + rowCtrl: api refreshCells() {animate: true/false}\n    // + rowRenderer: api softRefreshView() {}\n    CellCtrl.prototype.refreshCell = function (params) {\n        // if we are in the middle of 'stopEditing', then we don't refresh here, as refresh gets called explicitly\n        if (this.suppressRefreshCell || this.editing) {\n            return;\n        }\n        var colDef = this.column.getColDef();\n        var newData = params != null && !!params.newData;\n        var suppressFlash = (params != null && !!params.suppressFlash) || !!colDef.suppressCellFlash;\n        // we always refresh if cell has no value - this can happen when user provides Cell Renderer and the\n        // cell renderer doesn't rely on a value, instead it could be looking directly at the data, or maybe\n        // printing the current time (which would be silly)???. Generally speaking\n        // non of {field, valueGetter, showRowGroup} is bad in the users application, however for this edge case, it's\n        // best always refresh and take the performance hit rather than never refresh and users complaining in support\n        // that cells are not updating.\n        var noValueProvided = colDef.field == null && colDef.valueGetter == null && colDef.showRowGroup == null;\n        var forceRefresh = (params && params.forceRefresh) || noValueProvided || newData;\n        var valuesDifferent = this.updateAndFormatValue();\n        var dataNeedsUpdating = forceRefresh || valuesDifferent;\n        if (dataNeedsUpdating) {\n            // if it's 'new data', then we don't refresh the cellRenderer, even if refresh method is available.\n            // this is because if the whole data is new (ie we are showing stock price 'BBA' now and not 'SSD')\n            // then we are not showing a movement in the stock price, rather we are showing different stock.\n            this.showValue(newData);\n            // we don't want to flash the cells when processing a filter change, as otherwise the UI would\n            // be to busy. see comment in FilterManager with regards processingFilterChange\n            var processingFilterChange = this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering();\n            var flashCell = !suppressFlash && !processingFilterChange &&\n                (this.beans.gridOptionsWrapper.isEnableCellChangeFlash() || colDef.enableCellChangeFlash);\n            if (flashCell) {\n                this.flashCell();\n            }\n            this.cellCustomStyleFeature.applyUserStyles();\n            this.cellCustomStyleFeature.applyClassesFromColDef();\n        }\n        // we can't readily determine if the data in an angularjs template has changed, so here we just update\n        // and recompile (if applicable)\n        this.refreshToolTip();\n        // we do cellClassRules even if the value has not changed, so that users who have rules that\n        // look at other parts of the row (where the other part of the row might of changed) will work.\n        this.cellCustomStyleFeature.applyCellClassRules();\n    };\n    // cell editors call this, when they want to stop for reasons other\n    // than what we pick up on. eg selecting from a dropdown ends editing.\n    CellCtrl.prototype.stopEditingAndFocus = function (suppressNavigateAfterEdit) {\n        if (suppressNavigateAfterEdit === void 0) { suppressNavigateAfterEdit = false; }\n        this.stopRowOrCellEdit();\n        this.focusCell(true);\n        if (!suppressNavigateAfterEdit) {\n            this.navigateAfterEdit();\n        }\n    };\n    CellCtrl.prototype.navigateAfterEdit = function () {\n        var fullRowEdit = this.beans.gridOptionsWrapper.isFullRowEdit();\n        if (fullRowEdit) {\n            return;\n        }\n        var enterMovesDownAfterEdit = this.beans.gridOptionsWrapper.isEnterMovesDownAfterEdit();\n        if (enterMovesDownAfterEdit) {\n            this.beans.navigationService.navigateToNextCell(null, KeyCode.DOWN, this.getCellPosition(), false);\n        }\n    };\n    // user can also call this via API\n    CellCtrl.prototype.flashCell = function (delays) {\n        var flashDelay = delays && delays.flashDelay;\n        var fadeDelay = delays && delays.fadeDelay;\n        this.animateCell('data-changed', flashDelay, fadeDelay);\n    };\n    CellCtrl.prototype.animateCell = function (cssName, flashDelay, fadeDelay) {\n        var _this = this;\n        var fullName = \"ag-cell-\" + cssName;\n        var animationFullName = \"ag-cell-\" + cssName + \"-animation\";\n        var gridOptionsWrapper = this.beans.gridOptionsWrapper;\n        if (!flashDelay) {\n            flashDelay = gridOptionsWrapper.getCellFlashDelay();\n        }\n        if (!exists(fadeDelay)) {\n            fadeDelay = gridOptionsWrapper.getCellFadeDelay();\n        }\n        // we want to highlight the cells, without any animation\n        this.cellComp.addOrRemoveCssClass(fullName, true);\n        this.cellComp.addOrRemoveCssClass(animationFullName, false);\n        // then once that is applied, we remove the highlight with animation\n        window.setTimeout(function () {\n            _this.cellComp.addOrRemoveCssClass(fullName, false);\n            _this.cellComp.addOrRemoveCssClass(animationFullName, true);\n            _this.cellComp.setTransition(\"background-color \" + fadeDelay + \"ms\");\n            window.setTimeout(function () {\n                // and then to leave things as we got them, we remove the animation\n                _this.cellComp.addOrRemoveCssClass(animationFullName, false);\n                _this.cellComp.setTransition('transition');\n            }, fadeDelay);\n        }, flashDelay);\n    };\n    CellCtrl.prototype.onFlashCells = function (event) {\n        var cellId = this.beans.cellPositionUtils.createId(this.getCellPosition());\n        var shouldFlash = event.cells[cellId];\n        if (shouldFlash) {\n            this.animateCell('highlight');\n        }\n    };\n    CellCtrl.prototype.isCellEditable = function () {\n        return this.column.isCellEditable(this.rowNode);\n    };\n    CellCtrl.prototype.formatValue = function (value) {\n        var res = this.callValueFormatter(value);\n        return res != null ? res : value;\n    };\n    CellCtrl.prototype.callValueFormatter = function (value) {\n        return this.beans.valueFormatterService.formatValue(this.column, this.rowNode, this.scope, value);\n    };\n    CellCtrl.prototype.updateAndFormatValue = function (force) {\n        if (force === void 0) { force = false; }\n        var oldValue = this.value;\n        var oldValueFormatted = this.valueFormatted;\n        this.value = this.getValueFromValueService();\n        this.valueFormatted = this.callValueFormatter(this.value);\n        var valuesDifferent = force ? true :\n            !this.valuesAreEqual(oldValue, this.value) || this.valueFormatted != oldValueFormatted;\n        return valuesDifferent;\n    };\n    CellCtrl.prototype.valuesAreEqual = function (val1, val2) {\n        // if the user provided an equals method, use that, otherwise do simple comparison\n        var colDef = this.column.getColDef();\n        return colDef.equals ? colDef.equals(val1, val2) : val1 === val2;\n    };\n    CellCtrl.prototype.getComp = function () {\n        return this.cellComp;\n    };\n    CellCtrl.prototype.getValueFromValueService = function () {\n        // if we don't check this, then the grid will render leaf groups as open even if we are not\n        // allowing the user to open leaf groups. confused? remember for pivot mode we don't allow\n        // opening leaf groups, so we have to force leafGroups to be closed in case the user expanded\n        // them via the API, or user user expanded them in the UI before turning on pivot mode\n        var lockedClosedGroup = this.rowNode.leafGroup && this.beans.columnModel.isPivotMode();\n        var isOpenGroup = this.rowNode.group && this.rowNode.expanded && !this.rowNode.footer && !lockedClosedGroup;\n        // are we showing group footers\n        var groupFootersEnabled = this.beans.gridOptionsWrapper.isGroupIncludeFooter();\n        // if doing footers, we normally don't show agg data at group level when group is open\n        var groupAlwaysShowAggData = this.beans.gridOptionsWrapper.isGroupSuppressBlankHeader();\n        // if doing grouping and footers, we don't want to include the agg value\n        // in the header when the group is open\n        var ignoreAggData = (isOpenGroup && groupFootersEnabled) && !groupAlwaysShowAggData;\n        var value = this.beans.valueService.getValue(this.column, this.rowNode, false, ignoreAggData);\n        return value;\n    };\n    CellCtrl.prototype.getValue = function () {\n        return this.value;\n    };\n    CellCtrl.prototype.getValueFormatted = function () {\n        return this.valueFormatted;\n    };\n    CellCtrl.prototype.addDomData = function () {\n        var _this = this;\n        var element = this.getGui();\n        this.beans.gridOptionsWrapper.setDomData(element, CellCtrl.DOM_DATA_KEY_CELL_CTRL, this);\n        this.addDestroyFunc(function () { return _this.beans.gridOptionsWrapper.setDomData(element, CellCtrl.DOM_DATA_KEY_CELL_CTRL, null); });\n    };\n    CellCtrl.prototype.createEvent = function (domEvent, eventType) {\n        var event = {\n            type: eventType,\n            node: this.rowNode,\n            data: this.rowNode.data,\n            value: this.value,\n            column: this.column,\n            colDef: this.column.getColDef(),\n            context: this.beans.gridOptionsWrapper.getContext(),\n            api: this.beans.gridApi,\n            columnApi: this.beans.columnApi,\n            rowPinned: this.rowNode.rowPinned,\n            event: domEvent,\n            rowIndex: this.rowNode.rowIndex\n        };\n        // because we are hacking in $scope for angular 1, we have to de-reference\n        if (this.scope) {\n            event.$scope = this.scope;\n        }\n        return event;\n    };\n    CellCtrl.prototype.onKeyPress = function (event) {\n        this.cellKeyboardListenerFeature.onKeyPress(event);\n    };\n    CellCtrl.prototype.onKeyDown = function (event) {\n        this.cellKeyboardListenerFeature.onKeyDown(event);\n    };\n    CellCtrl.prototype.onMouseEvent = function (eventName, mouseEvent) {\n        this.cellMouseListenerFeature.onMouseEvent(eventName, mouseEvent);\n    };\n    CellCtrl.prototype.getGui = function () {\n        return this.eGui;\n    };\n    CellCtrl.prototype.refreshToolTip = function () {\n        this.cellTooltipFeature.refreshToolTip();\n    };\n    CellCtrl.prototype.getColSpanningList = function () {\n        return this.cellPositionFeature.getColSpanningList();\n    };\n    CellCtrl.prototype.onLeftChanged = function () {\n        this.cellPositionFeature.onLeftChanged();\n        this.refreshAriaIndex(); // should change this to listen for when column order changes\n    };\n    CellCtrl.prototype.refreshAriaIndex = function () {\n        var colIdx = this.beans.columnModel.getAriaColumnIndex(this.column);\n        this.cellComp.setAriaColIndex(colIdx);\n    };\n    CellCtrl.prototype.isSuppressNavigable = function () {\n        return this.column.isSuppressNavigable(this.rowNode);\n    };\n    CellCtrl.prototype.onWidthChanged = function () {\n        return this.cellPositionFeature.onWidthChanged();\n    };\n    CellCtrl.prototype.getColumn = function () {\n        return this.column;\n    };\n    CellCtrl.prototype.getRowNode = function () {\n        return this.rowNode;\n    };\n    CellCtrl.prototype.getBeans = function () {\n        return this.beans;\n    };\n    CellCtrl.prototype.isPrintLayout = function () {\n        return this.printLayout;\n    };\n    CellCtrl.prototype.appendChild = function (htmlElement) {\n        this.eGui.appendChild(htmlElement);\n    };\n    CellCtrl.prototype.refreshHandle = function () {\n        if (this.editing) {\n            return;\n        }\n        if (this.cellRangeFeature) {\n            this.cellRangeFeature.refreshHandle();\n        }\n    };\n    CellCtrl.prototype.getCellPosition = function () {\n        return this.cellPosition;\n    };\n    CellCtrl.prototype.isEditing = function () {\n        return this.editing;\n    };\n    // called by rowRenderer when user navigates via tab key\n    CellCtrl.prototype.startRowOrCellEdit = function (keyPress, charPress) {\n        if (this.beans.gridOptionsWrapper.isFullRowEdit()) {\n            this.rowCtrl.startRowEditing(keyPress, charPress, this);\n        }\n        else {\n            this.startEditing(keyPress, charPress, true);\n        }\n    };\n    CellCtrl.prototype.getRowCtrl = function () {\n        return this.rowCtrl;\n    };\n    CellCtrl.prototype.getRowPosition = function () {\n        return {\n            rowIndex: this.cellPosition.rowIndex,\n            rowPinned: this.cellPosition.rowPinned\n        };\n    };\n    CellCtrl.prototype.updateRangeBordersIfRangeCount = function () {\n        if (this.cellRangeFeature) {\n            this.cellRangeFeature.updateRangeBordersIfRangeCount();\n        }\n    };\n    CellCtrl.prototype.onRangeSelectionChanged = function () {\n        if (this.cellRangeFeature) {\n            this.cellRangeFeature.onRangeSelectionChanged();\n        }\n    };\n    CellCtrl.prototype.isRangeSelectionEnabled = function () {\n        return this.cellRangeFeature != null;\n    };\n    CellCtrl.prototype.focusCell = function (forceBrowserFocus) {\n        if (forceBrowserFocus === void 0) { forceBrowserFocus = false; }\n        this.beans.focusService.setFocusedCell(this.getCellPosition().rowIndex, this.column, this.rowNode.rowPinned, forceBrowserFocus);\n    };\n    CellCtrl.prototype.onRowIndexChanged = function () {\n        // when index changes, this influences items that need the index, so we update the\n        // grid cell so they are working off the new index.\n        this.createCellPosition();\n        // when the index of the row changes, ie means the cell may have lost or gained focus\n        this.onCellFocused();\n        // check range selection\n        if (this.cellRangeFeature) {\n            this.cellRangeFeature.onRangeSelectionChanged();\n        }\n    };\n    CellCtrl.prototype.onFirstRightPinnedChanged = function () {\n        if (!this.cellComp) {\n            return;\n        }\n        var firstRightPinned = this.column.isFirstRightPinned();\n        this.cellComp.addOrRemoveCssClass(CSS_CELL_FIRST_RIGHT_PINNED, firstRightPinned);\n    };\n    CellCtrl.prototype.onLastLeftPinnedChanged = function () {\n        if (!this.cellComp) {\n            return;\n        }\n        var lastLeftPinned = this.column.isLastLeftPinned();\n        this.cellComp.addOrRemoveCssClass(CSS_CELL_LAST_LEFT_PINNED, lastLeftPinned);\n    };\n    CellCtrl.prototype.onCellFocused = function (event) {\n        if (!this.cellComp) {\n            return;\n        }\n        var cellFocused = this.beans.focusService.isCellFocused(this.cellPosition);\n        if (!this.gow.isSuppressCellSelection()) {\n            this.cellComp.addOrRemoveCssClass(CSS_CELL_FOCUS, cellFocused);\n        }\n        // see if we need to force browser focus - this can happen if focus is programmatically set\n        if (cellFocused && event && event.forceBrowserFocus) {\n            var focusEl = this.cellComp.getFocusableElement();\n            focusEl.focus();\n            // Fix for AG-3465 \"IE11 - After editing cell's content, selection doesn't go one cell below on enter\"\n            // IE can fail to focus the cell after the first call to focus(), and needs a second call\n            if (!document.activeElement || document.activeElement === document.body) {\n                focusEl.focus();\n            }\n        }\n        // if another cell was focused, and we are editing, then stop editing\n        var fullRowEdit = this.beans.gridOptionsWrapper.isFullRowEdit();\n        if (!cellFocused && !fullRowEdit && this.editing) {\n            this.stopRowOrCellEdit();\n        }\n    };\n    CellCtrl.prototype.createCellPosition = function () {\n        this.cellPosition = {\n            rowIndex: this.rowNode.rowIndex,\n            rowPinned: this.rowNode.rowPinned,\n            column: this.column\n        };\n    };\n    // CSS Classes that only get applied once, they never change\n    CellCtrl.prototype.applyStaticCssClasses = function () {\n        this.cellComp.addOrRemoveCssClass(CSS_CELL, true);\n        this.cellComp.addOrRemoveCssClass(CSS_CELL_NOT_INLINE_EDITING, true);\n        // normal cells fill the height of the row. autoHeight cells have no height to let them\n        // fit the height of content.\n        // const autoHeight = this.column.getColDef().autoHeight == true;\n        // this.cellComp.addOrRemoveCssClass(CSS_AUTO_HEIGHT, autoHeight);\n        // this.cellComp.addOrRemoveCssClass(CSS_NORMAL_HEIGHT, !autoHeight);\n        this.cellComp.addOrRemoveCssClass(CSS_NORMAL_HEIGHT, true);\n    };\n    CellCtrl.prototype.onColumnHover = function () {\n        if (!this.cellComp) {\n            return;\n        }\n        if (!this.beans.gridOptionsWrapper.isColumnHoverHighlight()) {\n            return;\n        }\n        var isHovered = this.beans.columnHoverService.isHovered(this.column);\n        this.cellComp.addOrRemoveCssClass(CSS_COLUMN_HOVER, isHovered);\n    };\n    CellCtrl.prototype.onNewColumnsLoaded = function () {\n        if (!this.cellComp) {\n            return;\n        }\n        this.setWrapText();\n        if (!this.editing) {\n            this.refreshCell({ forceRefresh: true });\n        }\n    };\n    CellCtrl.prototype.setWrapText = function () {\n        var value = this.column.getColDef().wrapText == true;\n        this.cellComp.addOrRemoveCssClass(CSS_CELL_WRAP_TEXT, value);\n    };\n    CellCtrl.prototype.dispatchCellContextMenuEvent = function (event) {\n        var colDef = this.column.getColDef();\n        var cellContextMenuEvent = this.createEvent(event, Events.EVENT_CELL_CONTEXT_MENU);\n        this.beans.eventService.dispatchEvent(cellContextMenuEvent);\n        if (colDef.onCellContextMenu) {\n            // to make the callback async, do in a timeout\n            window.setTimeout(function () { return colDef.onCellContextMenu(cellContextMenuEvent); }, 0);\n        }\n    };\n    CellCtrl.prototype.getCellRenderer = function () {\n        return this.cellComp ? this.cellComp.getCellRenderer() : null;\n    };\n    CellCtrl.prototype.getCellEditor = function () {\n        return this.cellComp ? this.cellComp.getCellEditor() : null;\n    };\n    CellCtrl.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n    };\n    CellCtrl.prototype.createSelectionCheckbox = function () {\n        var cbSelectionComponent = new CheckboxSelectionComponent();\n        this.beans.context.createBean(cbSelectionComponent);\n        cbSelectionComponent.init({ rowNode: this.rowNode, column: this.column });\n        // put the checkbox in before the value\n        return cbSelectionComponent;\n    };\n    CellCtrl.prototype.createDndSource = function () {\n        var dndSourceComp = new DndSourceComp(this.rowNode, this.column, this.beans, this.eGui);\n        this.beans.context.createBean(dndSourceComp);\n        return dndSourceComp;\n    };\n    CellCtrl.prototype.registerRowDragger = function (customElement, dragStartPixels) {\n        var _this = this;\n        // if previously existed, then we are only updating\n        if (this.customRowDragComp) {\n            this.customRowDragComp.setDragElement(customElement, dragStartPixels);\n            return;\n        }\n        var newComp = this.createRowDragComp(customElement, dragStartPixels);\n        if (newComp) {\n            this.customRowDragComp = newComp;\n            this.addDestroyFunc(function () { return _this.beans.context.destroyBean(newComp); });\n        }\n    };\n    CellCtrl.prototype.createRowDragComp = function (customElement, dragStartPixels) {\n        var _this = this;\n        var pagination = this.beans.gridOptionsWrapper.isPagination();\n        var rowDragManaged = this.beans.gridOptionsWrapper.isRowDragManaged();\n        var clientSideRowModelActive = this.beans.gridOptionsWrapper.isRowModelDefault();\n        if (rowDragManaged) {\n            // row dragging only available in default row model\n            if (!clientSideRowModelActive) {\n                doOnce(function () { return console.warn('AG Grid: managed row dragging is only allowed in the Client Side Row Model'); }, 'CellComp.addRowDragging');\n                return;\n            }\n            if (pagination) {\n                doOnce(function () { return console.warn('AG Grid: managed row dragging is not possible when doing pagination'); }, 'CellComp.addRowDragging');\n                return;\n            }\n        }\n        // otherwise (normal case) we are creating a RowDraggingComp for the first time\n        var rowDragComp = new RowDragComp(function () { return _this.value; }, this.rowNode, this.column, customElement, dragStartPixels);\n        this.beans.context.createBean(rowDragComp);\n        return rowDragComp;\n    };\n    CellCtrl.DOM_DATA_KEY_CELL_CTRL = 'cellCtrl';\n    return CellCtrl;\n}(BeanStub));\nexport { CellCtrl };\n"]},"metadata":{},"sourceType":"module"}